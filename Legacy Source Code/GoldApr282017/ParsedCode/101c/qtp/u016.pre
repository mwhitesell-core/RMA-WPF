;-------------------------------------------------------------------
;CORE SOFTWARE CORP. (R) 32-bit PowerHouse Preprocessor for 80x86
;CORE Migration PREP Version 4.1.3.
;Copyright (C) CORE SOFTWARE CORP. 1997-1999. Patent Pending.
;All rights reserved.
;-------------------------------------------------------------------
;
BEGINMODULE U016.QTS
COMMENT "2014/JUL/24 MC - update the next monthend date for the clinics that have run"
COMMENT "- reset the cycle to 1  "
COMMENT "2015/JAN/05   MC1     - pass/prompt PED as the second parameter, set the ped to the correct ped slot"
COMMENT "based on the iconst-ped-number-within-fiscal-year"
CANCEL CLEAR
SET LOCK RECORD UPDATE
SET PROCESS NOLIMIT
REQUEST UPD_CLINICS ON CALCULATION ERRORS REPORT ON EDIT ERRORS REPORT
ACCESS ICONST-MSTR-REC
CHOOSE ICONST-CLINIC-NBR-1-2 22 TO 99
DEF X-MONTHEND CHAR*1 = PARM PROMPT "ENTER the monthend (1 or 2 or 3):   "
COMMENT "MC1"
DEF X-PED DATE = PARM PROMPT "ENTER the Period End Date:  "
COMMENT "MC1 - end"
SEL IF ICONST-MONTHEND = X-MONTHEND
OUTPUT ICONST-MSTR-REC UPDATE ON ERRORS REPORT
ITEM ICONST-CLINIC-CYCLE-NBR FINAL 1
COMMENT "MC1"
COMMENT "item  iconst-ped-number-within-fiscal-year final iconst-ped-number-within-fiscal-year + 1"
ITEM ICONST-PED-NUMBER-WITHIN-FISCAL-YEAR FINAL ICONST-PED-NUMBER-WITHIN-FISCAL-YEAR + 1 IF ICONST-PED-NUMBER-WITHIN-FISCAL-YEAR < 13 ELSE 1 IF ICONST-PED-NUMBER-WITHIN-FISCAL-YEAR = 13
COMMENT "iconst-date-period-end-2  if iconst-ped-number-within-fiscal-year = 2 &"
COMMENT "else iconst-date-period-end-3  if iconst-ped-number-within-fiscal-year = 3 &"
COMMENT "else iconst-date-period-end-4  if iconst-ped-number-within-fiscal-year = 4 &"
COMMENT "else iconst-date-period-end-5  if iconst-ped-number-within-fiscal-year = 5 &"
COMMENT "else iconst-date-period-end-6  if iconst-ped-number-within-fiscal-year = 6 &"
COMMENT "else iconst-date-period-end-7  if iconst-ped-number-within-fiscal-year = 7 &"
COMMENT "else iconst-date-period-end-8  if iconst-ped-number-within-fiscal-year = 8 &"
COMMENT "else iconst-date-period-end-9  if iconst-ped-number-within-fiscal-year = 9 &"
COMMENT "else iconst-date-period-end-10 if iconst-ped-number-within-fiscal-year = 10 &"
COMMENT "else iconst-date-period-end-11 if iconst-ped-number-within-fiscal-year = 11 &"
COMMENT "else iconst-date-period-end-12 if iconst-ped-number-within-fiscal-year = 12 &"
COMMENT "else iconst-date-period-end-13 if iconst-ped-number-within-fiscal-year = 13"
ITEM ICONST-DATE-PERIOD-END FINAL X-PED
ITEM ICONST-DATE-PERIOD-END-1 FINAL X-PED IF ICONST-PED-NUMBER-WITHIN-FISCAL-YEAR = 1
ITEM ICONST-DATE-PERIOD-END-2 FINAL X-PED IF ICONST-PED-NUMBER-WITHIN-FISCAL-YEAR = 2
ITEM ICONST-DATE-PERIOD-END-3 FINAL X-PED IF ICONST-PED-NUMBER-WITHIN-FISCAL-YEAR = 3
ITEM ICONST-DATE-PERIOD-END-4 FINAL X-PED IF ICONST-PED-NUMBER-WITHIN-FISCAL-YEAR = 4
ITEM ICONST-DATE-PERIOD-END-5 FINAL X-PED IF ICONST-PED-NUMBER-WITHIN-FISCAL-YEAR = 5
ITEM ICONST-DATE-PERIOD-END-6 FINAL X-PED IF ICONST-PED-NUMBER-WITHIN-FISCAL-YEAR = 6
ITEM ICONST-DATE-PERIOD-END-7 FINAL X-PED IF ICONST-PED-NUMBER-WITHIN-FISCAL-YEAR = 7
ITEM ICONST-DATE-PERIOD-END-8 FINAL X-PED IF ICONST-PED-NUMBER-WITHIN-FISCAL-YEAR = 8
ITEM ICONST-DATE-PERIOD-END-9 FINAL X-PED IF ICONST-PED-NUMBER-WITHIN-FISCAL-YEAR = 9
ITEM ICONST-DATE-PERIOD-END-10 FINAL X-PED IF ICONST-PED-NUMBER-WITHIN-FISCAL-YEAR = 10
ITEM ICONST-DATE-PERIOD-END-11 FINAL X-PED IF ICONST-PED-NUMBER-WITHIN-FISCAL-YEAR = 11
ITEM ICONST-DATE-PERIOD-END-12 FINAL X-PED IF ICONST-PED-NUMBER-WITHIN-FISCAL-YEAR = 12
ITEM ICONST-DATE-PERIOD-END-13 FINAL X-PED IF ICONST-PED-NUMBER-WITHIN-FISCAL-YEAR = 13
COMMENT "MC1 - end"
BUILD $OBJ/U016
ENDMODULE U016.QTS
