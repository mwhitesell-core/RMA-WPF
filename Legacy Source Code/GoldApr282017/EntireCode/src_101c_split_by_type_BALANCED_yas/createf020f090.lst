* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page   1
*                      createf020f090.cbl
* Directives File: /usr/opt/mfcobol4.0/cobol.dir
* Accepted - SHOW-DIR
* Accepted - SOURCEFORMAT"FREE"
* Accepted - SPZERO
* Accepted - TIME
* Accepted - TRUNC
* Accepted - LIST
* Accepted - RESEQ
* End Of Directives File: /usr/opt/mfcobol4.0/cobol.dir
* Options: int(createf020f090.int) verbose nolist endp list(createf020f090.lst)
identification division.
program-id. createfiles.
author. dyad systems inc.
installation. rma.
date-written. 98/01/09.
date-compiled. 01-Jun-11 11:49.
security.
environment division.
input-output section.
file-control.

    copy "eft_logical_rec_file.slr".
    select eft-logical-rec-file
        assign to ws-work-file-a
        organization is sequential.
    copy "f001_batch_control_file.slr".
    select batch-ctrl-file
*       assign index to "f001_batch_control_file"
*       assign data  to "f001_batch_control_file"
        assign to disk "$pb_data/f001_batch_control_file"
        organization is indexed
        access mode  is dynamic
*mf added lock mode so that files aren't open exclusively
        lock mode is manual

*       record key   is key-batctrl-file length is 9
        record key   is key-batctrl-file
*tobefixed*     record key   is key-gen-batctrl-file length is 2   S
              status is status-cobol-batctrl-file.
*       infos status is status-batctrl-file.
*       eof-flag     is eof-batctrl-file
*

    copy "f020_doctor_mstr.slr".
    select doc-mstr
*mf     assign index to "f020_doctor_mstr"
*mf     assign data  to "f020_doctor_mstr"
        assign to disk "$pb_data/f020_doctor_mstr"
        organization is indexed
        access mode  is dynamic
*mf added lock mode so that files aren't open exclusively
        lock mode is manual

        record key   is doc-nbr of doc-mstr-rec

*mf added two  alternative keys below
        alternate key is doc-name-soundex
         with duplicates
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page   2
*                      createf020f090.cbl (/alpha/rmabill/rmabill101c)
        alternate key is doc-ohip-nbr of doc-mstr
         with duplicates
              status  is status-cobol-doc-mstr.
*       infos status  is status-doc-mstr.
*       eof-flag     is eof-doc-mstr
*
    copy "f030_locations_mstr.slr".
    select loc-mstr
*       assign index to "f030_locations_mstr"
*               contiguous
*       assign data  to "f030_locations_mstr"
        assign  to disk "$pb_data/f030_locations_mstr"
        organization is indexed
        access mode  is dynamic
*mf added lock mode so that files aren't open exclusively
        lock mode is manual
        record key   is loc-nbr
*       infos status is status-loc-mstr.
        status is status-cobol-loc-mstr.
    copy "f040_oma_fee_mstr.slr".
    select oma-fee-mstr
*mf     assign index to "f040_oma_fee_mstr"
*mf     assign data  to "f040_oma_fee_mstr"
        assign to disk "$pb_data/f040_oma_fee_mstr"
        organization is indexed
        access mode  is dynamic
*mf added lock mode so that files aren't open exclusively
        lock mode is manual
        record key   is fee-oma-cd
*mf     infos status is status-oma-mstr.
*       eof-flag     is eof-oma-mstr
        status is status-cobol-oma-mstr.
    copy "f050_doc_revenue_mstr.slr".
        select docrev-mstr
*       assign index to "f050_doc_revenue_mstr"
*       assign data  to "f050_doc_revenue_mstr"
        assign to disk "$pb_data/f050_doc_revenue_mstr"
*               contiguous
*               space management
        organization is indexed
        access mode  is dynamic
*mf added lock mode so that files aren't open exclusively
        lock mode is manual

        record key   is docrev-key
        status       is status-cobol-docrev-mstr.
*       infos status  is status-docrev-mstr.
    copy "f050tp_doc_revenue_mstr.slr".
    select docrevtp-mstr
*       assign index to "f050tp_doc_revenue_mstr"
*       assign data  to "f050tp_doc_revenue_mstr"
        assign to disk "$pb_data/f050tp_doc_revenue_mstr"
*               contiguous
*               space management
        organization is indexed
        access mode  is dynamic
*mf added lock mode so that files aren't open exclusively
        lock mode is manual
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page   3
*                      createf020f090.cbl (/alpha/rmabill/rmabill101c)

        record key   is docrevtp-key
        status       is status-cobol-docrevtp-mstr.
*       infos status  is status-docrevtp-mstr.

    copy "f051_doc_cash_mstr.slr".
    select docash-mstr
*       assign index to "f051_doc_cash_mstr"
*       assign data  to "f051_doc_cash_mstr"
        assign to disk "$pb_data/f051_doc_cash_mstr"
*               contiguous
*               space management
        organization is indexed
        access mode  is dynamic
*mf added lock mode so that files aren't open exclusively
        lock mode is manual

        record key   is docash-key
        status       is status-cobol-docash-mstr.
*       infos status  is status-docash-mstr.
*       eof-flag     is eof-cash-mstr
*
    copy "f051tp_doc_cash_mstr.slr".
    select docashtp-mstr
*       assign index to "f051tp_doc_cash_mstr"
*       assign data  to "f051tp_doc_cash_mstr"
        assign to disk "$pb_data/f051tp_doc_cash_mstr"
*               contiguous
*               space management
        organization is indexed
        access mode  is dynamic
*mf added lock mode so that files aren't open exclusively
        lock mode is manual

        record key   is docashtp-key
        status       is status-cobol-docashtp-mstr.
*       infos status  is status-docashtp-mstr.
*       eof-flag     is eof-cash-mstr
*

    copy "f060_cheque_reg_mstr.slr".
    select cheque-reg-mstr
*       assign index to "f060_cheque_reg_mstr"
*               contiguous
*       assign data  to "f060_cheque_reg_mstr"
        assign to disk "$pb_data/f060_cheque_reg_mstr"
        organization is indexed
        access mode  is dynamic
*mf added lock mode so that files aren't open exclusively
        lock mode is manual

        record key   is chq-reg-key
        file  status is status-cobol-chq-reg-mstr.
*       infos status is status-chq-reg-mstr.
*
    copy "f070_dept_mstr.slr".
    select dept-mstr
*        assign index to "f070_dept_mstr"
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page   4
*                      createf020f090.cbl (/alpha/rmabill/rmabill101c)
*        assign data  to "f070_dept_mstr"
        assign to disk "$pb_data/f070_dept_mstr"
        organization is indexed
        access mode  is dynamic
*mf added lock mode so that files aren't open exclusively
        lock mode is manual
        record key   is dept-nbr
*        infos status  is status-dept-mstr.
*       eof-flag     is eof-dept-mstr
        status is status-cobol-dept-mstr.
    copy "f071_client_rma_claim_nbr.slr".
    select client-rma-claim-nbr
*mf       assign index to "F071_CLAIM_NBR_RMA"
*mf       assign data  to "F071_CLIENT_RMA_CLAIM_NBR.DB"
          assign to disk  "$pb_data/f071_client_rma_claim_nbr"
          organization is indexed
          access mode  is dynamic
*mf added lock mode so that files aren't open exclusively
          lock mode is manual

*mf changed primary key to alternative  (B.E. 98/Sep/09)
          record key   is claim-nbr-client

*mf added alternative key below (B.E. 98/Sep/09)
* 2003/06/10 - MC
*          alternate key is claim-nbr-rma
          alternate key is claim-nbr-rma-clinic
* 2003/06/10 - end

          status is status-cobol-client-rma-nbr.
*          infos status is status-client-rma-claim-nbr.

    copy "f072_client_mstr.slr".
    select client-mstr
*mf       assign index to "F072_CLIENT_ID"
*mf       assign data  to "F072_CLIENT_MSTR.DB"
          assign to disk  "$pb_data/f072_client_mstr"
          organization is indexed
          access mode  is dynamic
*mf added lock mode so that files aren't open exclusively
          lock mode is manual
          record key   is client-id of client-mstr-rec
*         infos status is status-client-mstr.
          status is status-cobol-client-mstr.
    copy "f073_client_doc_mstr.slr".
    select client-doc-mstr
*mf       assign index to "F073_DOC_NBR"
*mf       assign data  to "F073_CLIENT_DOC_MSTR.DB"
          assign to disk  "$pb_data/f073_client_doc_mstr"
          organization is indexed
          access mode  is dynamic
*mf added lock mode so that files aren't open exclusively
          lock mode is manual
          record    key is doc-nbr   of client-doc-rec
*         alternate key is client-id of client-doc-rec with duplicates
          alternate key is client-doc of  client-doc-rec
*         infos status is status-client-doc-mstr.
          status is status-cobol-client-doc-mstr.
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page   5
*                      createf020f090.cbl                            )
    copy "f080_bank_mstr.slr".
    select bank-mstr
*       assign index to disk "f080_bank_mstr"
*       assign to disk "f080_bank_mstr.dat"
        assign to disk "$pb_data/f080_bank_mstr"
*               contiguous
*               space management
        organization is indexed
        access mode  is random
*mf added lock mode so that files aren't open exclusively
        lock mode is manual
        record key   is bank-cd
*       infos status  is status-bank-mstr.
        status  is status-cobol-bank-mstr.
    copy "f085_rejected_claims.slr".
    select rejected-claims
*       assign index to "f085_rejected_claims.00.idx"
*       assign data  to "f085_rejected_claims"
        assign to disk "$pb_data/f085_rejected_claims"
        organization is indexed
        access mode  is dynamic
*mf     record key   is clmhdr-pat-id length is 16
        record key   is claim-nbr
        alternate record key is clmhdr-pat-id
        with duplicates
*tobefixed*             with duplicates occurrence is rej-clm-occur
        status       is status-cobol-rejected-claims.
*       infos status  is status-info-rejected-claims.

*
    copy "f090_constants_mstr.slr".
select iconst-mstr
assign to disk "$pb_data/f090_constants_mstr"
organization is indexed
access mode  is dynamic
*mf added lock mode so that files aren't open exclusively
lock mode is manual
record key   is iconst-clinic-nbr-1-2
*       eof-flag     is eof-iconst-mstr
status is status-cobol-iconst-mstr.
    copy "f091_diagnostic_codes.slr".
    select diag-mstr
*mf     assign index to "f091_diag_codes_mstr"
*mf     assign data  to "f091_diag_codes_mstr"
        assign to disk "$pb_data/f091_diag_codes_mstr"
        organization is indexed
        access mode  is dynamic
*mf added lock mode so that files aren't open exclusively
        lock mode is manual

        record key   is diag-cd
              status is status-cobol-diag-mstr.
*mf     infos status is status-diag-mstr.
*       eof-flag     is eof-diag-mstr
*
    copy "f094_msg_sub_mstr.slr".
    select msg-sub-mstr
*mf     assign index    to "f094_msg_sub_mstr"
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page   6
*                      createf020f090.cbl (/alpha/rmabill/rmabill101c)
*mf     assign data     to "f094_msg_sub_mstr"
        assign to disk "$pb_data/f094_msg_sub_mstr"
        organization    is indexed
        access mode     is dynamic
*mf added lock mode so that files aren't open exclusively
        lock mode is manual
        record key      is msg-sub-key
              status    is status-cobol-msg-sub-mstr.
*mf     infos status    is status-infos-msg-sub-mstr.
    copy "f096_ohip_pay_code.slr".
    select pay-code-mstr
*       assign index to "f096_ohip_pay_code.00.idx"
*       assign data  to "f096_ohip_pay_code"
        assign to disk "$pb_data/f096_ohip_pay_code"
        organization is indexed
        access mode  is dynamic
*mf added lock mode so that files aren't open exclusively
        lock mode is manual
        record key   is pay-code
        status is status-cobol-pay-code-mstr.
*       infos status  is status-pay-code-mstr.
*       eof-flag     is eof-pay-code-mstr
*

    copy "r051_docrev_work_mstr.slr".
    select      r051-work-file
                assign to "r051wf"
                organization is sequential.

select corrected-pat
        assign        to "f086_pat_id.dat"
        file status   is status-corrected-pat.


*
* The default file format only allows 65K duplicates within a key
* The IDXFORMAT"4" format allows  up to 4M duplicatesS
* $SET IDXFORMAT"4"
*    copy "f010_new_patient_file.slr".
*    copy "f010_new_patient_mstr.slr".

data division.
file section.
    copy "eft_logical_rec_file.fd".
* 99/dec/16 B.E. separated originator number and file creation number
*                into 2 separate fields


fd    eft-logical-rec-file
                block    contains   1464  characters
                record   contains   1464  characters.

01    eft-record-type-a.
*mf          05   a-01-record-type                 pic a.
             05   a-01-record-type                 pic x.
             05   a-02-record-count                pic 9(9).
             05   a-03-originator-number           pic x(10).
             05   a-04-file-creation-number        pic 9(4).
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page   7
*                      createf020f090.cbl (/alpha/rmabill/rmabill101c)
             05   a-05-creation-date               pic 9(6).
             05   a-06-destination-data-centre     pic 9(5).
             05   a-07-filler                      pic x(1213).
             05   a-08-version-number              pic 9(4).
             05   a-09-settlement-account          pic 99.
             05   a-10-institution-account.
                  10   institution-account  occurs  10 times.
                       15   institution-id         pic 9(9).
                       15   settlement-account     pic x(12).

01    eft-record-type-c.

             05    c-01-record-type                pic a.
             05    c-02-record-count               pic 9(9).
*            05    c-03-origin-contl-nbr           pic x(14).
             05    c-03-originator-nbr             pic x(10).
             05    c-03-file-creation-nbr          pic 9(04).

             05    c-04-transaction-type           pic 9(3).
             05    c-05-amount                     pic 9(8)v99.
             05    c-06-fund-available-date        pic 9(6).
             05    c-07-bank-nbr                   pic 9(9).
             05    c-08-payee-acc-nbr              pic x(12).
             05    c-09-reserved                   pic x(22).
             05    c-10-stored-trans-type          pic 9(3).
*            05    c-11-rma-short-name             pic x(15).
             05    c-11-short-name                 pic x(15).
             05    c-12-payee-name                 pic x(30).
*            05    c-13-rma-long-name              pic x(30).
             05    c-13-long-name                  pic x(30).
             05    c-14-originator-nbr             pic x(10).
             05    c-15-cross-ref-nbr              pic x(19).
             05    c-16-institution-return         pic 9(9).
             05    c-17-account-return             pic x(12).
             05    c-18-sundry                     pic x(15).
             05    c-19-filler                     pic x(22).
             05    c-20-settlement-indicator       pic 9(2).
             05    c-21-invalid-indicator          pic 9(11).
             05    c-seg-two-six                   pic x(1200).


01    eft-record-type-z.

             05    z-01-record-type                pic a.
             05    z-02-record-count               pic 9(9).
*                05    z-03-origin-contl-nbr           pic x(14).
             05    z-03-originator-nbr             pic x(10).
             05    z-03-file-creation-number       pic 9(4).
             05    z-04-total-debit-value          pic 9(12)v99.
             05    z-05-total-debit-nbr            pic 9(8).
             05    z-06-total-credit-value         pic 9(12)v99.
             05    z-07-total-credit-nbr           pic 9(8).
             05    z-08-filler                     pic x(1396).

    copy "f001_batch_control_file.fd".
*  98/aug/01 B.E.      - unix conversion - moved external key to internal keyp
*  98/dec/01 D.B.       - y2k
*  99/Jan/21 M.C.       - move 'adj-cd' and 'adj-cd-sub-type' between
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page   8
*                      createf020f090.cbl (/alpha/rmabill/rmabill101c)
*                         'batch-type' and 'last-claim-nbr' fields
*                       - comment out filler
*  99/Apr/23 M.C.       - change key-batctrl-file from numeric to alpha
*  99/May/27 M.C.       - change batctrl-clinic-nbr numeric to alpha
*  99/nov/18 B.E.       - location changed from x999 to x(4).
*  01/nov/06 B.E.       - added batctrl-payroll as redefine of batctrl-hosp
*  03/oct/20 b.e. - alpha doctor nbr

fd batch-ctrl-file
*!          block  contains 112 characters
*!          record contains 112 characters.
          block  contains 111 characters
          record contains 111 characters.

01  batctrl-rec.

    05  batctrl-batch-nbr.
        10  batctrl-bat-clinic-nbr-1-2          pic 99.
*!      10  batctrl-bat-doc-nbr                 pic 9(4).
        10  batctrl-bat-doc-nbr                 pic x(3).
        10  batctrl-bat-week-day.
            15  batctrl-bat-week                pic 99.
            15  batctrl-bat-day                 pic 9.
        10  batctrl-bat-week-day-r redefines batctrl-bat-week-day
                                                pic 999.
    05  key-batctrl-file-r redefines batctrl-batch-nbr.
*mc     10  key-batctrl-file                    pic 9(9).
* mc - redefined from numeric to alpha so that programs moving
*      alphabetic fields to this field get left justified results
*      rather than right justified results which the numeric
*      definition gives.  For example,  cobol programs doing
*      'read approximates' move "22" to this field and with the
*      numeric definition get "00000022" to read. By changing
*      to alphabetic field, we get "22     " and the read
*      aproximate works the same with this internal key as
*      before when we had  external key.
*!        10  key-batctrl-file                  pic x(9).
        10  key-batctrl-file                    pic x(8).


    05  batctrl-batch-type                      pic x.
    05  batctrl-adj-cd                          pic x.
    05  batctrl-adj-cd-sub-type                 pic x.
    05  batctrl-last-claim-nbr                  pic 99.
    05  batctrl-clinic-nbr.
*       10  batctrl-clinic-nbr-1-2              pic 99.
*       10  batctrl-clinic-nbr-3-4              pic 99.
        10  batctrl-clinic-nbr-1-2              pic xx.
        10  batctrl-clinic-nbr-3-4              pic xx.
    05  batctrl-doc-nbr-ohip                    pic 9(6).

    05  batctrl-hosp                            pic x.
    05  batctrl-payroll redefines batctrl-hosp  pic x.

    05  batctrl-loc.
        10  batctrl-loc1                        pic x.
* 99/nov/19 B.E.
*       10  batctrl-loc2-4                      pic 999.
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page   9
*                      createf020f090.cbl (/alpha/rmabill/rmabill101c)
        10  batctrl-loc2-4                      pic xxx.
    05  batctrl-agent-cd                        pic 9.
*   05  batctrl-adj-cd                          pic x.
    05  batctrl-i-o-pat-ind                     pic x.
*       ('batctrl-date-batch-entered' formerly called 'batctrl-date-claimed-sys'
    05  batctrl-date-batch-entered              pic x(8).
*       ('filler' formerly called 'batctrl-date-sv')
*   05  filler                                  pic x(6).  - use for y2k
    05  batctrl-date-period-end.
        10 batctrl-date-period-end-yy           pic xxxx.
        10 batctrl-date-period-end-mm           pic xx.
        10 batctrl-date-period-end-dd           pic xx.
    05  batctrl-cycle-nbr                       pic 999.
    05  batctrl-amt-est                         pic s9(5)v99.
    05  batctrl-amt-act                         pic s9(5)v99.
    05  batctrl-svc-est                         pic 9(4).
    05  batctrl-svc-act                         pic 9(4).
    05  batctrl-ar-yy-mm                        pic x(6).
    05  batctrl-calc-ar-due                     pic s9(5)v99.
    05  batctrl-calc-tot-rev                    pic s9(5)v99.
    05  batctrl-manual-pay-tot                  pic s9(5)v99.
    05  batctrl-batch-status                    pic x.
    05  batctrl-nbr-claims-in-batch             pic 99.
    05  filler                                  pic x(10).
*--------------------------------------------------------------------
*       the 'adj-cd' field above and 'adj-cd-sub-type' below should
*       be moved between 'batch-type' and 'last-claim-nbr' fields
*--------------------------------------------------------------------
*   05  batctrl-adj-cd-sub-type                 pic x.

    copy "f020_doctor_mstr.fd".
* sms 137  bml  05-dec-90  increase fields by 2
* sms 139  mc   10-jun-92  add 5 clinic nbr and 2 spec codes in
*                          reserved for nip
*          mc   24-nov-93  include brad's fields of earning subsystem
*          mc   12-feb-94  include doc-ep-pay-code and doc-ep-pay-sub-code
*          db   03-jun-98  Year 2000
*          mc   16-jul-02  add 5 additional batch nbr for each additional
*                          clinic
*          mc   23-sep-02  rename the second occurrence of group-regular-service
*                          to group-over-serviced
*          be   05-nov-03  alpha doctor nbr
*          mc   03-mar-04  reuse filler x(4) for doc-afp-paym-group from filler2
*          be   06-apr-17  - increase to 800 when $1M payroll figures changed th

fd  doc-mstr
*       block  contains 680 characters
*       record contains 680 characters.
*       block  contains 695 characters
*       record contains 695 characters.
        block  contains 800 characters
        record contains 800 characters.

01 doc-mstr-rec.
*    05  doc-nbr                                        pic 9(3).
    05  doc-nbr                                 pic x(3).
    05  doc-dept                                pic 99.
    05  doc-ohip-nbr                            pic 9(6).
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page  10
*                      createf020f090.cbl (/alpha/rmabill/rmabill101c)
    05  doc-pract-nbr redefines doc-ohip-nbr    pic 9(6).
    05  doc-sin-nbr.
        10  doc-sin-123                         pic 999.
        10  doc-sin-456                         pic 999.
        10  doc-sin-789                         pic 999.
    05  doc-clinic-nbr                          pic 99.
    05  doc-spec-cd                             pic 99.
    05  doc-hosp-nbr                            pic x999.
    05  doc-name                                pic x(24).
    05  doc-name-soundex                        pic x(4).

    05  doc-inits.
        10  doc-init1                           pic x.
        10  doc-init2                           pic x.
        10  doc-init3                           pic x.
    05  doc-address-office.
        10  doc-addr-office-1                   pic x(24).
        10  doc-addr-office-2                   pic x(24).
        10  doc-addr-office-3                   pic x(24).
    05  doc-addr-office-r  redefines  doc-address-office.
        10  doc-addr-office  occurs 3 times     pic x(24).
    05  doc-addr-office-pc.
        10  doc-addr-office-pc-123.
            15  doc-addr-office-pc1             pic a.
            15  doc-addr-office-pc2             pic 9.
            15  doc-addr-office-pc3             pic a.
        10  doc-addr-office-pc-456.
            15  doc-addr-office-pc4             pic 9.
            15  doc-addr-office-pc5             pic a.
            15  doc-addr-office-pc6             pic 9.
    05  doc-address-home.
        10  doc-addr-home-1                     pic x(24).
        10  doc-addr-home-2                     pic x(24).
        10  doc-addr-home-3                     pic x(24).
    05  doc-addr-home-r  redefines doc-address-home.
        10  doc-addr-home  occurs 3 times       pic x(24).
    05  doc-addr-home-pc.
        10  doc-addr-home-pc-123.
            15  doc-addr-home-pc1               pic a.
            15  doc-addr-home-pc2               pic 9.
            15  doc-addr-home-pc3               pic a.
        10  doc-addr-home-pc-456.
            15  doc-addr-home-pc4               pic 9.
            15  doc-addr-home-pc5               pic a.
            15  doc-addr-home-pc6               pic 9.
    05  doc-full-part-ind                       pic x.
    05  doc-class-code redefines doc-full-part-ind pic x.
    05  doc-bank-info.
        10  doc-bank-nbr                        pic 9(4).
        10  doc-bank-branch                     pic 9(5).
        10  doc-bank-acct                       pic x(12).
*   05  doc-tax-info.
*       10  doc-billing-percent                 pic 9v99.
*       10  doc-misc-percent                    pic 9v99.
*       10  doc-tax-percent                     pic 9v99.
*       10  doc-billing-percent                 pic 9v9999.
*       10  doc-misc-percent                    pic 9v9999.
*       10  doc-tax-percent                     pic 9v9999.
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page  11
*                      createf020f090.cbl (/alpha/rmabill/rmabill101c)
*       10  doc-pay-code                        pic x.
    05  doc-fac-dates.
        10  doc-date-fac-start.
* y2k       15  doc-date-fac-start-yy           pic 99.
            15  doc-date-fac-start-yy           pic 9999.
            15  doc-date-fac-start-mm           pic 99.
            15  doc-date-fac-start-dd           pic 99.
        10  doc-date-fac-term.
* y2k       15  doc-date-fac-term-yy            pic 99.
            15  doc-date-fac-term-yy            pic 9999.
            15  doc-date-fac-term-mm            pic 99.
            15  doc-date-fac-term-dd            pic 99.
    05    doc-fac-dates-r redefines doc-fac-dates.
        10  doc-date-fac occurs 2 times.
* y2k       15  doc-date-fac-yy                 pic 99.
            15  doc-date-fac-yy                 pic 9999.
            15  doc-date-fac-mm                 pic 99.
            15  doc-date-fac-dd                 pic 99.
    05  doc-annual-ceiling-info.
*        10  doc-ytdgua                          pic s9(7)v99 comp.
        10  doc-ytdgua                          pic s9(7)v99.
*        10  doc-ytdgub                          pic s9(7)v99 comp.
        10  doc-ytdgub                          pic s9(7)v99.
*        10  doc-ytdguc                          pic s9(7)v99 comp.
        10  doc-ytdguc                          pic s9(7)v99.
*        10  doc-ytdgud                          pic s9(7)v99 comp.
        10  doc-ytdgud                          pic s9(7)v99.
*        10  doc-ytdcea                          pic s9(7)v99 comp.
        10  doc-ytdcea                          pic s9(7)v99.
*        10  doc-ytdcex                          pic s9(7)v99 comp.
        10  doc-ytdcex                          pic s9(7)v99.
*        10  doc-ytdear                          pic s9(7)v99 comp.
        10  doc-ytdear                          pic s9(7)v99.
*        10  doc-ytdinc                          pic s9(7)v99 comp.
        10  doc-ytdinc                          pic s9(7)v99.
*        10  doc-ytdeft                          pic s9(7)v99 comp.
        10  doc-ytdeft                          pic s9(7)v99.
*        10  doc-totinc-g                        pic s9(7)v99 comp.
        10  doc-totinc-g                        pic s9(7)v99.
* y2k
*       10  doc-ep-date-deposit                 pic 9(4) comp.
        10  doc-ep-date-deposit                 pic 9(8).
*        10  doc-totinc                          pic s9(7)v99 comp.
        10  doc-totinc                          pic s9(7)v99.
*        10  doc-ep-ceiexp                       pic s9(7)v99 comp.
        10  doc-ep-ceiexp                       pic s9(7)v99.
*        10  doc-adjcea                          pic s9(7)v99 comp.
        10  doc-adjcea                          pic s9(7)v99.
*        10  doc-adjcex                          pic s9(7)v99 comp.
        10  doc-adjcex                          pic s9(7)v99.
*        10  doc-ceicea                          pic s9(7)v99 comp.
        10  doc-ceicea                          pic s9(7)v99.
*        10  doc-ceicex                          pic s9(7)v99 comp.
        10  doc-ceicex                          pic s9(7)v99.
        10  ceicea-prt-format                   pic x(13).
        10  ceicex-prt-format                   pic x(13).
        10  ytdcea-prt-format                   pic x(13).
        10  ytdcex-prt-format                   pic x(13).
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page  12
*                      createf020f090.cbl (/alpha/rmabill/rmabill101c)
        10  doc-clinic-nbr-2                    pic 99.
        10  doc-clinic-nbr-3                    pic 99.
        10  doc-clinic-nbr-4                    pic 99.
        10  doc-clinic-nbr-5                    pic 99.
        10  doc-clinic-nbr-6                    pic 99.
        10  doc-spec-cd-2                       pic 99.
        10  doc-spec-cd-3                       pic 99.
*        10  doc-ytdinc-g                        pic s9(7)v99 comp.
        10  doc-ytdinc-g                        pic s9(7)v99.
    05  doc-locations.
        10  doc-loc-1                           pic x999.
        10  doc-loc-2                           pic x999.
        10  doc-loc-3                           pic x999.
        10  doc-loc-4                           pic x999.
        10  doc-loc-5                           pic x999.
        10  doc-loc-6                           pic x999.
        10  doc-loc-7                           pic x999.
        10  doc-loc-8                           pic x999.
        10  doc-loc-9                           pic x999.
        10  doc-loc-10                          pic x999.
        10  doc-loc-11                          pic x999.
        10  doc-loc-12                          pic x999.
        10  doc-loc-13                          pic x999.
        10  doc-loc-14                          pic x999.
        10  doc-loc-15                          pic x999.
        10  doc-loc-16                          pic x999.
        10  doc-loc-17                          pic x999.
        10  doc-loc-18                          pic x999.
        10  doc-loc-19                          pic x999.
        10  doc-loc-20                          pic x999.
        10  doc-loc-21                          pic x999.
        10  doc-loc-22                          pic x999.
        10  doc-loc-23                          pic x999.
        10  doc-loc-24                          pic x999.
        10  doc-loc-25                          pic x999.
        10  doc-loc-26                          pic x999.
        10  doc-loc-27                          pic x999.
        10  doc-loc-28                          pic x999.
        10  doc-loc-29                          pic x999.
        10  doc-loc-30                          pic x999.
    05  doc-locations-r  redefines  doc-locations.
        10  doc-loc     occurs 30 times         pic x999.
*
    05  doc-rma-expense-percent-misc            pic 9(5)v9(4) comp.
* 2004/03/03 - MC
*   05  filler2                                 pic x(8).
    05  doc-afp-paym-group                      pic x(4).
    05  filler2                                 pic x(4).
* 2004/030/03 - end
    05  doc-ind-pays-gst                        pic x.
    05  doc-nx-avail-batch                      pic 999.
* 2002/07/16 - MC - add 5 more next batch nbr for each clinic
    05  doc-nx-avail-batch-2                    pic 999.
    05  doc-nx-avail-batch-3                    pic 999.
    05  doc-nx-avail-batch-4                    pic 999.
    05  doc-nx-avail-batch-5                    pic 999.
    05  doc-nx-avail-batch-6                    pic 999.
** 2002/07/16 - end
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page  13
*                      createf020f090.cbl (/alpha/rmabill/rmabill101c)
*    05  doc-yrly-ceiling-computed               pic 9(7)v99 comp.
    05  doc-yrly-ceiling-computed               pic 9(7)v99.
*    05  doc-yrly-expense-computed               pic 9(7)v99 comp.
    05  doc-yrly-expense-computed               pic 9(7)v99.
    05  doc-rma-expense-percent-reg             pic 9(5)v9(4) comp.
    05  doc-sub-specialty                       pic x(15).
*    05  doc-payeft                              pic s9(7)v99 comp.
    05  doc-payeft                              pic s9(7)v99.
*    05  doc-ytdded                              pic s9(7)v99 comp.
    05  doc-ytdded                              pic s9(7)v99.
    05  doc-dept-expense-percent-misc           pic 9(5)v9(4) comp.
    05  doc-dept-expense-percent-reg            pic 9(5)v9(4) comp.
    05  doc-ep-ped                              pic s9(9) comp.
    05  doc-ep-pay-code                         pic x.
    05  doc-ep-pay-sub-code                     pic x.
    05  filler3                                 pic x(1).
    05  doc-ind-holdback-active                 pic x(1).
    05  group-regular-service                   pic x(4).
* 2002/09/23 - MC
*    05  group-regular-service                  pic x(4).
    05  group-over-serviced                     pic x(4).
* 2002/09/23 - end
    05  doc-specialties                         pic x(90).

    copy "f030_locations_mstr.fd".

* 1999/Apr/01 B.E. - added loc-ministry-loc-code and filler, adjusted rec length
* 1999/apr/27 B.E. - added loc-hospital-code field as contingency field in case
*                    it's needed as the current claim rec hospital field is
*                    only 1 character long and is now too small.
* 2001/Jan/26 A.A  - added loc-payroll-flag and decreased the filler to 14 char.
*                    This field used to HSC ONLY
* 2001/may/03 B.E. - redefined card-colour field to indicate it's real purpose
*                    of specifying in/out patient indicator
*                  - added 'active for entry' field
* 2006/apr/03 M.C. - include service location indicator (SLI)

fd  loc-mstr
*       index block contains 512 characters
*       data  block contains 37 characters
*             block contains 37 characters
*       record      contains 37 characters.
              block contains 60 characters
        record      contains 60 characters.

01 loc-mstr-rec.
    05  loc-nbr                         pic x999.
    05  loc-nbr-r     redefines loc-nbr         pic x(4).

    05  loc-clinic-nbr                  pic 9(4).
    05  loc-hospital-nbr                pic 9(4).
    05  loc-hospital-code               pic x(4).

    05  loc-card-colour                 pic x(1).
    05  loc-in-out-ind redefines loc-card-colour
                                        pic x(1).

    05  loc-name                        pic x(24).
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page  14
*                      createf020f090.cbl (/alpha/rmabill/rmabill101c)
    05  loc-ministry-loc-code           pic 9(4).

    05  loc-payroll-flag                pic x(1).
    05  loc-active-for-entry            pic x(1).
* 2006/04/03 - MC
*   05  filler-reserved-for-nip         pic x(13).
    05  loc-service-location-indicator  pic x(4).
    05  filler-reserved-for-nip         pic x(9).
* 2006/04/03 - end

    copy "f040_oma_fee_mstr.fd".
* 98/dec/01 D.B.  - y2k
* 99/apr/28 B.E.  - split page (999) into page-alpha (xx) + page-numeric (999)
* 99/nov/30 B.E.  - correction to 'fee-page' definition in redefines
* 00/jul/31 B.E.  - fees changed from 9(5)v99 to 9(4)v999.
* 00/aug/01 B.E.  - added addition length to record for future expansion
*                 - add fee-active-for-entry y/n (1 byte)
*                 - add fee-min, fee-max (current/previous and oma/ohip)
*                                                        2*2*2*7 = 56 bytes)
*                 - add filler for growth -11 flags + 2  nbrs = 11*28 = 39 bytes
* 00/sep/05 B.E.  - add 'fee-global-addon-cd-exclusion-flag'
*
fd  oma-fee-mstr
*       block       contains 247 characters
*       record      contains 247 characters  .
        block       contains 315 characters
        record      contains 315 characters  .
*       feedback is feedback-oma-fee-mstr.

* insert this warning message from "f000_duplicate_fd_warning.fd
*----------------  note  -----------------------
*-- any changes to this fd must also be made  --
*-- to the corresponding "..._d001_..." fd    --
*-- and visa versa                            --
*----------------  note  -----------------------
01 fee-mstr-rec.
    05  fee-oma-cd.
        10  fee-oma-cd-ltr1                     pic x.
        10  filler                              pic 999.
    05  fee-special-m-suffix-ind                pic x.

    05  fee-effective-date.
* y2k   10  fee-date-yy                         pic 99.
        10  fee-date-yy                         pic 9999.
        10  fee-date-mm                         pic 99.
        10  fee-date-dd                         pic 99.
* 00/aug/01 B.E.
    05  fee-active-for-entry                    pic x(1).


    05  fee-desc                                pic x(48).
    05  fee-current-prev-years.
*           (CURRENT rates)
*           (00/aug/01 B.E. - fees changed from 2 to 3 decimals)
        10  fee-curr-a-fee-1                    pic s9(4)v999
                                        sign is leading .
        10  fee-curr-h-fee-1                    pic s9(4)v999
                                        sign is leading .
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page  15
*                      createf020f090.cbl (/alpha/rmabill/rmabill101c)
        10  fee-curr-a-fee-2                    pic s9(4)v999
                                        sign is leading .
        10  fee-curr-h-fee-2                    pic s9(4)v999
                                        sign is leading .
*           (00/aug/01 B.E.)
        10  fee-curr-a-min              pic s9(4)v999
                                        sign is leading .
        10  fee-curr-h-min              pic s9(4)v999
                                        sign is leading .
        10  fee-curr-a-max              pic s9(4)v999
                                        sign is leading .
        10  fee-curr-h-max              pic s9(4)v999
                                        sign is leading .

        10  fee-curr-a-anae                     pic 99.
        10  fee-curr-h-anae                     pic 99.
        10  fee-curr-a-asst                     pic 99.
        10  fee-curr-h-asst                     pic 99.

        10  fee-curr-add-on-codes.
            15  fee-curr-add-on-cd              pic x999    occurs 10 times.
        10  fee-curr-oma-ind-card-reqs.
            15  fee-curr-oma-ind-card-required  pic x       occurs  3 times.
* 99/apr/28
*       10  fee-curr-page                       pic 999.
        10  fee-curr-page.
            15 fee-curr-page-alpha              pic x(2).
            15 fee-curr-page-numeric            pic 999.

        10  fee-curr-add-on-perc-flat-ind       pic x.

*           (PREVIOUS rates)
*           (00/aug/01 B.E. - fees changed from 2 to 3 decimals)
        10  fee-prev-a-fee-1                    pic s9(4)v999
                                        sign is leading .
        10  fee-prev-h-fee-1                    pic s9(4)v999
                                        sign is leading .
        10  fee-prev-a-fee-2                    pic s9(4)v999
                                        sign is leading .
        10  fee-prev-h-fee-2                    pic s9(4)v999
                                        sign is leading .
*           (00/aug/01 B.E.)
        10  fee-prev-a-min              pic s9(4)v999
                                        sign is leading .
        10  fee-prev-h-min              pic s9(4)v999
                                        sign is leading .
        10  fee-prev-a-max              pic s9(4)v999
                                        sign is leading .
        10  fee-prev-h-max              pic s9(4)v999
                                        sign is leading .
        10  fee-prev-a-anae                     pic 99.
        10  fee-prev-h-anae                     pic 99.
        10  fee-prev-a-asst                     pic 99.
        10  fee-prev-h-asst                     pic 99.

        10  fee-prev-add-on-codes.
            15  fee-prev-add-on-cd              pic x999        occurs 10 times.
        10  fee-prev-oma-ind-card-reqs.
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page  16
*                      createf020f090.cbl (/alpha/rmabill/rmabill101c)
            15  fee-prev-oma-ind-card-required  pic x           occurs  3 times.
*       10  fee-prev-page                       pic 999.
        10  fee-prev-page.
            15 fee-prev-page-alpha              pic x(2).
            15 fee-prev-page-numeric            pic 999.
        10  fee-prev-add-on-perc-flat-ind       pic x.
    05  fee-current-prev-year-r redefines fee-current-prev-years.
* ---------------------- n o t e -------------------------
* ----- set up the following subscripts when using this file
* ----- set subscript  'curr' to 1  and  'prev' 2
        10  fee-years occurs 2 times.
* ----- set subscript  'oma' to 1  and  'ohip' to 2

            15  fee-1           occurs 2 times
*                                                       pic s9(5)v99
                                        pic s9(4)v999
                                        sign is leading.
            15  fee-2           occurs 2 times
*                                                       pic s9(5)v99
                                        pic s9(4)v999
                                        sign is leading.
*               (00/aug/01 B.E.)

*                 - fee-min, fee-max used only if "P" percentage based fee
            15  fee-min         occurs 2 times
                                        pic s9(4)v999
                                        sign is leading.
            15  fee-max         occurs 2 times
                                        pic s9(4)v999
                                        sign is leading.

            15  fee-anae        occurs 2 times
                                                pic 99.
            15  fee-asst        occurs 2 times
                                                pic 99.
            15  fee-add-on-codes.
                20  fee-add-on-cd               pic x999        occurs 10 times.
            15  fee-oma-ind-card-requireds.
                20  fee-oma-ind-card-required   pic x           occurs  3 times.
*y2k
*           15  fee-page                        pic 999.
            15  fee-page-alpha-numeric.
                20 fee-page-alpha               pic x(2).
                20 fee-page                     pic 9(3).

            15  fee-add-on-perc-or-flat-ind     pic x.

*       internal computer code (icc) -- used to perform price reductions
    05  fee-icc-code.
        10  fee-icc-sec                         pic xx.
        10  fee-icc-cat                         pic  9.
        10  fee-icc-grp                         pic 99.
        10  fee-icc-reduc-ind                   pic  9.
*       (diag ind = 'y' --> batch claim header diag cd must not = zero)
    05  fee-diag-ind                            pic x.
    05  fee-phy-ind                             pic x.
    05  fee-tech-ind                            pic x.
    05  fee-hosp-nbr-ind                        pic x.
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page  17
*                      createf020f090.cbl (/alpha/rmabill/rmabill101c)
    05  fee-i-o-ind                             pic x.
    05  fee-admit-ind                           pic x.
    05  fee-spec-fr                             pic 99.
    05  fee-spec-to                             pic 99.

*          (00/aug/01 B.E. filler for growth)
*           05  filler                                  pic x(39).
*       (00/sep/05 B.E.)
    05  fee-global-addon-cd-exclusion           pic x(01).
    05  filler                                  pic x(38).

    copy "f050_doc_revenue_mstr.fd".
* 03/nov/05 b.e. - alpha doctor nbr

fd  docrev-mstr
* 01/Feb/19 A.A
*     block  contains 64 characters
*     record contains 64 characters .
     block  contains 66 characters
     record contains 66 characters .

01  docrev-master-rec.

*
*       this file contains revenue records only.  as of may/82,
*       cash records are now stored in file "DOCASH"
*
*       key is:
*
*          ohip claim     : clinic
*                           dept
*                           doctor number
*                           location or "MISC
*                           oma code + suffix
*               both in + out patient areas are used
*               for svc and dollar calculations
*               if location is "MISC" the record is a
*               miscellaneous revenue record
*
    05  docrev-key.
        10  docrev-clinic-1-2           pic x(2).
        10  docrev-dept                 pic 99.
*!       10  docrev-doc-nbr              pic 999.
        10  docrev-doc-nbr              pic xxx.
        10  docrev-location             pic x999.
        10  docrev-oma-cd               pic x(5).
        10  docrev-oma-cd-r redefines docrev-oma-cd.
            15 docrev-oma-code          pic x(4).
            15 docrev-oma-suff          pic x.
            15 docrev-adj-cd-sub-type   redefines docrev-oma-suff
                                        pic x.
*       ( removed because the doctor revenue file has been split
*         into 2 files - the docrev file and the doccash file.
*         the doccash file uses the 'agency type' as a part of its
*         key and the docrev uses the oma code).
*       10  docrev-cash-record redefines docrev-oma-cd-r.
*           15  docrev-agency-type      pic x.
*           15  filler                  pic xxxx.
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page  18
*                      createf020f090.cbl (/alpha/rmabill/rmabill101c)

*       05  docrev-adj-cd-sub-type              pic x.
    05  docrev-month-to-date.
*       10  docrev-mtd-in-rec           pic s9(5)v99.
        10  docrev-mtd-in-rec           pic s9(6)v99.
* 01/Feb/19 A.A
*       10  docrev-mtd-in-svc           pic s9(3).
        10  docrev-mtd-in-svc           pic s9(4).
*       10  docrev-mtd-out-rec          pic s9(5)v99.
        10  docrev-mtd-out-rec          pic s9(6)v99.
* 01/Feb/19 A.A
*       10  docrev-mtd-out-svc          pic s9(3).
        10  docrev-mtd-out-svc          pic s9(4).

    05  docrev-year-to-date.
        10  docrev-ytd-in-rec           pic s9(6)v99.
        10  docrev-ytd-in-svc           pic s9(5).
        10  docrev-ytd-out-rec          pic s9(6)v99.
        10  docrev-ytd-out-svc          pic s9(5).
    copy "f050tp_doc_revenue_mstr.fd".
fd  docrevtp-mstr
*    index block contains 512 characters
*    data  block contains 512 characters
           block contains 512 characters
    record      contains 183 characters .
*    feedback is feedback-docrevtp-mstr.

01  docrevtp-master-rec.

    05  docrevtp-key.
        10  docrevtp-clinic-nbr                 pic 99.
        10  docrevtp-agent-cd                   pic x.
        10  docrevtp-loc-cd                     pic x999.
        10  docrevtp-oma-cd.
            15  docrevtp-oma-code               pic x999.
            15  docrevtp-oma-suffix             pic x.
*!        10  docrevtp-doc-nbr                    pic 999.
        10  docrevtp-doc-nbr                    pic xxx.

    05  docrevtp-mtd-ytd occurs 2 times.
        10  docrevtp-in-out occurs 2 times.
            15  docrevtp-tech-prof-amts occurs 2 times.
                20  docrevtp-amt-billed         pic s9(6)v99.
                20  docrevtp-amt-adjusts        pic s9(6)v99.
                20  docrevtp-nbr-svc            pic 9(5).

*       subscripts -    mtd     = 1
*                       ytd     = 2
*                       in      = 1
*                       out     = 2
*                       tech    = 1
*                       prof    = 2
    copy "f051_doc_cash_mstr.fd".
fd  docash-mstr
*    index block contains 512 characters
*    data  block contains 512 characters
           block contains 512 characters
*   record      contains  45 characters
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page  19
*                      createf020f090.cbl (/alpha/rmabill/rmabill101c)
     record     contains  46 characters .
*    feedback is feedback-docash-mstr.

01  docash-master-rec.

*
*       this file contains cash records only and is in use as of
*       may/82.
*
*       key is:
*
*                         : clinic
*                           dept.
*                           doctor number
*                           location
*                           agent code
*                           filler of spaces
*
*               only the in-patient amount areas are used
*               all the out-patient areas are zeroed out
*               and all sv areas for both sections are set to zero
*
    05  docash-key.
        10  docash-clinic-1-2           pic x(2).
        10  docash-dept                 pic 99.
*!        10  docash-doc-nbr              pic 999.
        10  docash-doc-nbr              pic xxx.
        10  docash-location             pic x999.
        10  docash-agency-type          pic x.

    05  docash-month-to-date.
*       10  docash-mtd-in-rec           pic s9(5)v99.
        10  docash-mtd-in-rec           pic s9(6)v99.
        10  docash-mtd-in-svc           pic s9(3).

    05  docash-year-to-date.
* 2011/05/30 - MC - increase field size
*       10  docash-ytd-in-rec           pic s9(6)v99.
        10  docash-ytd-in-rec           pic s9(7)v99.
* 2011/05/30 - end
        10  docash-ytd-in-svc           pic s9(5).

* 2011/05/30 -MC
*       10  filler                      pic x(10).
        10  filler                      pic x(9).
* 2011/05/30 - end
    copy "f051tp_doc_cash_mstr.fd".
fd  docashtp-mstr
*    index block contains 512 characters
*    data  block contains 512 characters
           block contains 512 characters
    record      contains  74 characters .
*    feedback is feedback-docashtp-mstr.

01  docashtp-master-rec.

    05  docashtp-key.
        10  docashtp-clinic-nbr         pic 99.
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page  20
*                      createf020f090.cbl (/alpha/rmabill/rmabill101c)
        10  docashtp-agent-cd           pic x.
        10  docashtp-loc-cd             pic x999.
*!        10  docashtp-doc-nbr            pic 999.
        10  docashtp-doc-nbr            pic xxx.

    05  docashtp-mtd-ytd occurs 2 times.
        07  docashtp-in-out occurs 2 times.
            09  docashtp-tech-prof occurs 2 times.
                11  docashtp-amt-paid   pic s9(6)v99.

*       subscripts -    mtd     = 1
*                       ytd     = 2
*                       in      = 1
*                       out     = 2
*                       tech    = 1
*                       prof    = 2
    copy "f060_cheque_reg_mstr.fd".
*   revised dec 7/90 (b.m.l.) - sms 137
* 03/nov/05 b.e. - alpha doctor nbr


*
fd  cheque-reg-mstr
*       index block contains 512 characters
*       data  block contains 2041 characters
*       data  block contains 2095 characters
* y2K         block contains 2095 characters
              block contains 2131 characters
*       record      contains 2041 characters
        record      contains 2131 characters .
*       feedback    is feedback-cheque-reg-mstr.

*       the  18  occurances in the file, hold 18 months of doctor figures
*       in the following manner:
*
*       occurs 1 thru 6 contain mths 1 (jan) thru 6 (jun) of the previous r.m.a.
*                                                                ========
*                               fiscal year. they are for tax reporting purposes
*       occurs 7 thru 12 contain fiscal mths 1 (july) thru 6 (dec) of the presen
*                                                                         ------
*                               r.m.a. fiscal year.
*       occurs 13 thru 18 contain fiscal mths 7 (jan) thru 18 (june) of the
*                               present fiscal year.
*                               -------
*
*       modications and update are allowed only the present fiscal year -- 7 thr
*       after the fiscal year end the values in 13 thru 18 are moved to
*       positions 1 thru 6 for tax reporting purposes and position 7 thru
*       18 are zeroed out in preparation for the new r.m.a. fiscal year.


01 cheque-reg-rec.
    05  chq-reg-key.
        10  chq-reg-clinic-nbr-1-2              pic 99.
        10  chq-reg-dept                        pic 99.
*!        10  chq-reg-doc-nbr                     pic 9(3).
        10  chq-reg-doc-nbr                     pic x(3).

* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page  21
*                      createf020f090.cbl (/alpha/rmabill/rmabill101c)
    05  chq-doc-data    occurs 18 times.
*       10  chq-reg-perc-bill                   pic 9v99        comp-3.
        10  chq-reg-perc-bill                   pic 9v9999      comp-3.
*       10  chq-reg-perc-misc                   pic 9v99        comp-3.
        10  chq-reg-perc-misc                   pic 9v9999      comp-3.
        10  chq-reg-pay-code                    pic x.
*       10  chq-reg-perc-tax                    pic 9v99        comp-3.
        10  chq-reg-perc-tax                    pic 9v9999      comp-3.
        10  chq-reg-mth-bill-amt                pic s9(7)v99    comp-3.
        10  chq-reg-mth-misc-amt occurs 10 times
                                                pic s9(7)v99    comp-3.
        10  chq-reg-mth-exp-amt                 pic s9(7)v99    comp-3.
        10  chq-reg-comp-ann-exp-this-pay       pic s9(7)v99    comp-3.
        10  chq-reg-mth-ceil-amt                pic s9(7)v99    comp-3.
        10  chq-reg-comp-ann-ceil-this-pay      pic s9(7)v99    comp-3.
        10  chq-reg-earnings-this-mth           pic s9(7)v99    comp-3.
        10  chq-reg-regular-pay-this-mth        pic s9(7)v99    comp-3.
        10  chq-reg-regular-tax-this-mth        pic s9(7)v99    comp-3.
        10  chq-reg-man-pay-this-mth            pic s9(7)v99    comp-3.
        10  chq-reg-man-tax-this-mth            pic s9(7)v99    comp-3.
* y2k   10  chq-reg-pay-date                    pic 9(6).
        10  chq-reg-pay-date                    pic 9(8).
    copy "f070_dept_mstr.fd".

fd  dept-mstr
*       index block contains   2 characters
*       data  block contains 200 characters
              block contains 200 characters
        record      contains 200 characters.


01 dept-mstr-rec.
    05  dept-nbr                                pic 99.
    05  dept-name                               pic x(30).
    05  dept-addr1                              pic x(30).
    05  dept-addr2                              pic x(30).
    05  dept-addr3                              pic x(30).
    05  dept-chairman                           pic x(25).
    05  dept-co-ordinator                       pic x(25).
    05  dept-nbr-docs                           pic 999.
* 2003/01/20 - MC
*    05  filler                                 pic x(25).
    05  dept-company                            pic 99.
    05  filler                                  pic x(23).
* 2003/01/20 - end
    copy "f071_client_rma_claim_nbr.fd".
* 2000/jan/18 m.c.      - include clinic nbr
* 2003/jun/10 m.c.      - include clinic nbr as part of claim-nbr-rma-clinic
* 2003/dec/10 m.c.      - alphd doc nbr

fd  client-rma-claim-nbr
*    index block contains  8 characters
*    data  block contains 22 characters
*    block contains 22 characters
*    record contains 22 characters .
     block contains 24 characters
     record contains 24 characters .
*    feedback is feedback-client-rma-claim-nbr.
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page  22
*                      createf020f090.cbl (/alpha/rmabill/rmabill101c)

01  client-rma-claim-nbr-rec.
    05  claim-nbr-client.
        10  doc-ohip-nbr                pic x(6).
        10  doc-account-nbr             pic x(8).
* 2003/06/10 - MC
*   05  claim-nbr-rma                   pic 9(8).
*   05  clinic-nbr                      pic 9(2).
    05  claim-nbr-rma-clinic.
        10  clinic-nbr                  pic 9(2).
*!        10  claim-nbr-rma               pic 9(8).
        10  claim-nbr-rma               pic x(8).
* 2003/06/10 - end

    copy "f072_client_mstr.fd".
fd  client-mstr
*    index block contains  5 characters
*    data  block contains 38 characters
    block contains 38 characters
    record contains 38 characters .
*   feedback is feedback-client-mstr.

01  client-mstr-rec.
    05  client-id                       pic x(5).
    05  client-operator-nbr             pic 9(3).
    05  client-desc                     pic x(30).

    copy "f073_client_doc_mstr.fd".
fd  client-doc-mstr
*    index block contains  3 characters
*    data  block contains  8 characters
     block contains  8 characters
     record contains 8 characters .
*    feedback is feedback-client-doc-mstr.

01  client-doc-rec.
* 2003/11/25 - MC - change sequence
*   05  doc-nbr                         pic 9(3).
*   05  client-id                       pic x(5).
    05  client-doc.
        10  client-id                   pic x(5).
*!      10  doc-nbr                     pic 9(3).
        10  doc-nbr                     pic x(3).
* 2003/11/25 - end

    copy "f080_bank_mstr.fd".
fd  bank-mstr
*       index block  contains 512 characters
*       data  block  contains 135 characters
              block  contains 135 characters
        record       contains 135 characters.

01 bank-mstr-rec.
    05  bank-cd                         pic x(9).
    05  bank-name                       pic x(30).
    05  bank-address.
        10  bank-address1               pic x(30).
        10  bank-address2               pic x(30).
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page  23
*                      createf020f090.cbl (/alpha/rmabill/rmabill101c)
    05  bank-city-prov.
        10  bank-city                   pic x(15).
        10  bank-prov                   pic x(15).
    05  bank-postal-cd.
        10  bank-pc-123.
            15  bank-pc1                        pic x.
            15  bank-pc2                        pic 9.
            15  bank-pc3                        pic x.
        10  bank-pc-456.
            15  bank-pc4                        pic 9.
            15  bank-pc5                        pic x.
            15  bank-pc6                        pic 9.
    copy "f085_rejected_claims.fd".
* sms 141  mc   21-apr-93  created
* 03/nov/05 b.e. - alpha doctor nbr
* 10/jun/01 MC   - include new field logically-deleted-flag
* 10/jun/21 MC   - include new field clmhdr-submit-date

fd  rejected-claims
*       data  block contains  36 characters
              block contains  45 characters
        record      contains  45 characters .

01  rejected-claims-rec.
*!    05  claim-nbr                              pic 9(10).
*!    05  doc-nbr                                pic 9(3).
    05  claim-nbr                               pic x(10).
    05  doc-nbr                                 pic x(3).

    05  clmhdr-pat-id                           pic x(16).
    05  rejected-loc                            pic x(4).
    05  mess-code                               pic x(3).
    05  logically-deleted-flag                  pic x.
    05  clmhdr-submit-date                      pic 9(8).
    copy "f086_pat_id.fd".
* sms 141  agk  19-apr-93  created
* 98/dec/01 D.B.        - y2k
* 99/jan/20 B.E.        - changed y2k birth date from 'comp' to normal 9(8)
*                         and increased rec length accordingly
* 03/oct/03 M.C.        - include the additional chart nbr
*                       - extend the size for first and last names

fd  corrected-pat
*       data  block  contains 132 characters
* y2k         block  contains 132 characters
* 2003/10/03 - MC
*             block  contains 138 characters
*             record contains 138 characters.
              block  contains 192 characters
              record contains 192 characters.
* 2003/10/03 - end

01 pat-id-rec.
    05  clmhdr-pat-ohip-id-or-chart             pic x(16).
* y2k    05  pat-last-birth-date                     pic 9(4) comp.
    05  pat-last-birth-date                     pic 9(8).
    05  pat-last-version-cd                     pic xx.
* 2003/10/03 - MC
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page  24
*                      createf020f090.cbl (/alpha/rmabill/rmabill101c)
*    05  pat-old-surname                         pic x(15).
*    05  pat-old-given-name                      pic x(12).
    05  pat-old-surname                         pic x(25).
    05  pat-old-given-name                      pic x(17).
* 2003/10/03 - end
    05  pat-old-health-nbr                      pic 9(10).
* 2003/10/03 - MC
*    05  pat-old-chart-nbr                       pic x(12).
    05  pat-old-chart-nbr                       pic x(10).
    05  pat-old-chart-nbr-2                     pic x(10).
    05  pat-old-chart-nbr-3                     pic x(10).
    05  pat-old-chart-nbr-4                     pic x(10).
    05  pat-old-chart-nbr-5                     pic x(11).
* 2003/10/03 - end
    05  pat-old-addr1                           pic x(21).
    05  pat-old-addr2                           pic x(21).
    05  pat-old-addr3                           pic x(21).
    copy "f090_constants_mstr.fd".
* 99/Jan/29     MC      - change iconst-clinic-nbr from numeric to character
* 03/nov/05 b.e. - alpha doctor nbr
* 06/nov/08     MC      - include iconst-clinic-pay-batch-nbr

fd  iconst-mstr
*       index block contains   2 characters
              block contains 384 characters
        record      contains 384 characters  .
*       feedback is feedback-iconst-mstr.

01 iconst-mstr-rec.
    05  iconst-clinic-nbr-1-2                   pic   99.
*    05  iconst-clinic-nbr                      pic  9(4).
    05  iconst-clinic-nbr                       pic  x(4).
    05  iconst-clinic-name                      pic x(20).
    05  iconst-clinic-cycle-nbr                 pic   99.
    05  iconst-date-period-end.
* y2k   10  iconst-date-period-end-yy           pic   99.
        10  iconst-date-period-end-yy           pic   9999.
        10  iconst-date-period-end-mm           pic   99.
        10  iconst-date-period-end-dd           pic   99.
    05  iconst-clinic-addr.
        10  iconst-clinic-addr-l1               pic  x(25).
        10  iconst-clinic-addr-l2               pic  x(25).
        10  iconst-clinic-addr-l3               pic  x(25).
    05  iconst-clinic-addr-r redefines iconst-clinic-addr.
        10  iconst-clinic-addr                  pic x(25)   occurs  3  times.
    05  iconst-clinic-card-colour               pic    x.
    05  iconst-clinic-over-lim1                 pic 99v99.
    05  iconst-clinic-under-lim2                pic 99v99.
    05  iconst-clinic-under-lim3                pic 99v99.
    05  iconst-clinic-over-lim4                 pic 99v99.

*!    05  iconst-clinic-batch-nbr                 pic 9(6).
    05  iconst-clinic-batch-nbr                 pic x(6).

    05  iconst-reduction-factor                 pic 99v99.
    05  iconst-overpay-factor                   pic 99v99.
* 2006/11/08
*   05  filler                                  pic x(242).
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page  25
*                      createf020f090.cbl (/alpha/rmabill/rmabill101c)
    05  filler                                  pic x(106).
    05  iconst-clinic-pay-batch-nbr             pic x(6).
    05  filler                                  pic x(130).
* 2006/11/08 - end
    copy "f091_diagnostic_codes.fd".
fd  diag-mstr
*       index block contains  3  characters
*       data  block contains 123  characters
              block contains 123  characters
        record      contains 123  characters.

01  diag-rec.
    05  diag-cd                         pic xxx.
    05  diag-cd-desc                    pic x(120).

    copy "f094_msg_sub_mstr.fd".

fd  msg-sub-mstr
*       index block contains   3 characters
*       data  block contains 193 characters
              block contains 193 characters
        record      contains 193 characters   .
*       feedback    is feedback-msg-sub-mstr.

01 msg-sub-mstr-rec.
    05  msg-sub-key.
        10  msg-sub-key-1                       pic x.
        10  msg-sub-key-23.
            15  msg-sub-key-2                   pic x.
            15  msg-sub-key-3                   pic x.
*    message records     require "M" in msg-sub-key-1
*    subdivision records require "S" in msg-sub-key-1 an
*                                " " in msg-sub-key-2
    05  msg-rec.
        10  msg-reprint-flag                    pic x.
        10  msg-auto-logout                     pic x.
        10  msg-dtl1                            pic x(47).
        10  msg-dtl2                            pic x(47).
        10  msg-dtl3                            pic x(47).
        10  msg-dtl4                            pic x(47).
    05  sub-rec redefines msg-rec.
        10  sub-name                            pic x(25).
        10  sub-fee-complex                     pic x.
        10  sub-auto-logout                     pic x.
        10  filler                              pic x(163).
    copy "f096_ohip_pay_code.fd".
fd  pay-code-mstr
*    index block contains 512 characters
*    data  block contains 512 characters
           block contains 512 characters
    record      contains  72 characters .
*    feedback is feedback-pay-code-mstr.

01  pay-code-rec.
    05  pay-code                        pic x(2).
    05  pay-explanation                 pic x(70).

    copy "r051_docrev_work_mstr.fd".
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page  26
*                      createf020f090.cbl (/alpha/rmabill/rmabill101c)
fd  r051-work-file
        block contains 49 characters.

01  work-file-rec.

  03  wf-sort-key.
    05  wf-dept                                 pic 99.
    05  wf-class-code                           pic x.
*!    05  wf-doc-nbr                            pic 9(3).
    05  wf-doc-nbr                              pic x(3).
    05  wf-oma-cd.
        10  wf-oma-code-ltr                     pic x.
        10  filler                              pic x(4).
  03  wf-data.
    05  wf-month-to-date.
        10  wf-mtd-svcs                         pic s9(8).
        10  wf-mtd-amt                          pic s9(9)v99.
    05  wf-year-to-date.
        10  wf-ytd-svcs                         pic s9(8).
        10  wf-ytd-amt                          pic s9(9)v99.



working-storage section.

77  password-input                              pic x(3).
77  status-common                               pic x(11).
77  status-batctrl-file                         pic x(11)       value zero.
77  status-cobol-batctrl-file                   pic  xx         value zero.
77  status-claims-mstr                          pic x(11)       value zero.
77  status-cobol-claims-mstr                    pic  xx         value zero.
77  status-cobol-claims-mstr-new                pic  xx         value zero.
77  status-cobol-suspend-hdr                    pic  xx         value zero.
77  status-cobol-suspend-addr                   pic  xx         value zero.
77  status-cobol-suspend-dtl                    pic  xx         value zero.
77  status-cobol-client-mstr                    pic  xx         value zero.
77  status-cobol-client-rma-nbr                 pic  xx         value zero.
77  status-cobol-client-doc-mstr                pic  xx         value zero.
77  status-pat-mstr                             pic x(11)       value zero.
77  status-cobol-pat-mstr                       pic  xx         value zero.
77  status-cobol-new-pat-file                   pic  xx         value zero.
77  status-pat-mstr-hc                          pic x(11)       value zero.
77  status-pat-mstr-od                          pic x(11)       value zero.
77  status-pat-mstr-chrt                        pic x(11)       value zero.
77  status-pat-mstr-acr                         pic x(11)       value zero.
77  status-cobol-pat-mstr-hc                    pic xx          value zero.
77  status-cobol-pat-mstr-od                    pic xx          value zero.
77  status-cobol-pat-mstr-chrt                  pic xx          value zero.
77  status-cobol-pat-mstr-acr                   pic xx          value zero.
77  status-corrected-pat                        pic xx          value zero.
77  status-doc-mstr                             pic x(11)       value zero.
77  status-cobol-doc-mstr                       pic  xx         value zero.
77  status-oma-mstr                             pic x(11)       value zero.
77  status-cobol-oma-mstr                       pic  xx         value zero.
77  status-iconst-mstr                          pic x(11)       value zero.
77  status-cobol-iconst-mstr                    pic  xx         value zero.
77  status-diag-mstr                            pic x(11)       value zero.
77  status-cobol-diag-mstr                      pic  xx         value zero.
* Micro Focus COBOL for UNIX         V4.0 revision 005 01-Jun-11 11:49 Page  27
*                      createf020f090.cbl                            )
77  status-cobol-msg-sub-mstr                   pic xx          value zero.
77  status-cobol-clm-shadow-mstr                pic xx          value zero.
77  status-cobol-shadow-mstr-new                pic xx          value zero.
77  status-cobol-rejected-claims                pic xx          value zero.
77  status-cobol-claims-extra                   pic xx          value zero.
77  status-cobol-dept-mstr                      pic xx          value zero.
77  status-cobol-loc-mstr                       pic xx          value zero.
77  status-cobol-docrev-mstr                    pic xx          value zero.
77  status-cobol-docrevtp-mstr                  pic xx          value zero.
77  status-cobol-docash-mstr                    pic xx          value zero.
77  status-cobol-docashtp-mstr                  pic xx          value zero.
77  status-cobol-chq-reg-mstr                   pic xx          value zero.
77  status-cobol-bank-mstr                      pic xx          value zero.
77  status-cobol-pay-code-mstr                  pic xx          value zero.

procedure division.
main-line section.
mainline.
*    open i-o   eft-logical-rec-file
    open i-o
                doc-mstr
                iconst-mstr     .
* Micro Focus COBOL for UNIX         V4.0 revision 005 Compiler
* Copyright (C) 1984-1995 Micro Focus Ltd.     URN 2XUPG/GB0/00000F
*                                              REF GNB-030056000AA
*
* Total Messages:     0
* Data:       12288     Code:        1362
