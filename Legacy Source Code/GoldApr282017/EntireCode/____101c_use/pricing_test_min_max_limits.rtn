* file: pricing_test_min_max_limits.rtn
* 00/aug/14 B.E. original
* 01/aug/29 B.E. - remove error messages when reducing or increase amounts 
* 01/sep/01 B.E. - changed min/max fee checkings so that it takes place only
*		   on "A" suffix claim details

test-min-max-limits.

*   (test min/max price to ensure that calculated basic prices are within
*    acceptable range for "A" suffix claims only - doesn't apply to 
*    assistant(B) and anesthetist(C) details)

*   (non add-on, non OP'd fees must be > minimum if specified)

    if    hold-fee-min    (ss, oma) <> 0
      and hold-fee-oma    (ss)      <  hold-fee-min(ss, oma)
*        and hold-oma-rec-ind(ss, ss-add-on-perc-or-flat-ind) <> "P"
*        and hold-oma-rec-ind(ss, ss-add-on-perc-or-flat-ind) <> "F"
      and hold-sv-day     (ss,1) <> "OP"
      and hold-oma-suff   (ss)   = "A"
    then
        move hold-fee-min (ss, oma)             to hold-fee-oma (ss).
*          move 86                                 to      err-ind
*          perform za0-common-error                thru    za0-99-exit.
*   endif

    if    hold-fee-min    (ss,ohip) <> 0
      and hold-fee-ohip   (ss)      <  hold-fee-min(ss,ohip)
*        and hold-oma-rec-ind(ss, ss-add-on-perc-or-flat-ind) <> "P"
*        and hold-oma-rec-ind(ss, ss-add-on-perc-or-flat-ind) <> "F"
      and hold-sv-day     (ss,1) <> "OP"
      and hold-oma-suff   (ss)   = "A"
    then
        move hold-fee-min (ss,ohip)             to hold-fee-ohip(ss).
*          move 87                                 to      err-ind
*          perform za0-common-error                thru    za0-99-exit.
*   endif

*   (non add-on, non OP'd fees must be < maximum if specified)
    if    hold-fee-max    (ss, oma) <> 0
      and hold-fee-oma    (ss)       > hold-fee-max(ss, oma)
*         and hold-oma-rec-ind(ss, ss-add-on-perc-or-flat-ind) <> "P"
*         and hold-oma-rec-ind(ss, ss-add-on-perc-or-flat-ind) <> "F"
      and hold-sv-day     (ss,1) <> "OP"
      and hold-oma-suff   (ss)   = "A"
    then
        move hold-fee-max (ss, oma)             to hold-fee-oma (ss).
*          move 88                                 to      err-ind
*          perform za0-common-error                thru    za0-99-exit.
*   endif

    if    hold-fee-max    (ss,ohip) <> 0
      and hold-fee-ohip   (ss)       > hold-fee-max(ss,ohip)
*         and hold-oma-rec-ind(ss, ss-add-on-perc-or-flat-ind) <> "P"
*         and hold-oma-rec-ind(ss, ss-add-on-perc-or-flat-ind) <> "F"
      and hold-sv-day     (ss,1) <> "OP"
      and hold-oma-suff   (ss)   = "A"
    then
        move hold-fee-max (ss,ohip)             to hold-fee-ohip(ss).
*          move 89                                 to      err-ind
*          perform za0-common-error                thru    za0-99-exit.
*   endif

test-min-max-limits-99-exit.
    exit.
