/alpha/rmabill/rmabill101/dvlp/moira
Thu Sep  8 15:27:37 EDT 2016
 + + + Sourced in /alpha/rmabill/rmabill101/dvlp/moira + + +
;Compiling program [/alpha/rmabill/rmabill101/dvlp/moira/u122b.qts]
Q T P   (7.33.E)
Copyright 1996 COGNOS INCORPORATED
Licensed PH-RUNTIME for customer: 5139390001 C.O.T.A UNIX

> ;#> PROGRAM         U122B.QTS
> ;
> ;       ((C)) Dyad Infosys LTD
> ;
> ;    PURPOSE: SUB-PROCESS WITHIN "EARNINGS GENERATION" PROCESS.
> ;	Purpose:
> ;		This pgm calculates the TITHE1/2/3 amounts for EP and
> ;		updates stuff.
> ;	 Logic
> ;	      Get "TOTITE/D" record in f119/f110 just generated by u130/ and originally u115b but now u015a_0. This
> ;	      record has total of this EP's titheable income.
> ;	      GET "TOTITE/D" potentially existing in f119 ("D") of previous
> ;	      YTD total titheable income.  Adding these 2 amounts together
> ;	      to get potential TITHE1/2/3 amounts.
> ;	      Access f119 for potentially existing TITHE1/2/3 ("A") records to
> ;	      see what has previously been changed and determine for
> ;	      each TITHE1/2/3 what should be charge this EP.
> ;	      Create TITHE1/2/3 records in f110 with these amounts and
> ;	      update TITHE1/2/3 records in f119 with YTD amounts
> ;
> ;
> ;    MODIFICATION HISTORY
> ;        DATE    SAF #  WHO      DESCRIPTION
> ; 2008/jun/10 M.C.      - original
> ; 2008/aug/19 M.C.	- generate  for TITHD1/2/3 or TITHE1/2/3
> ;			  depending on payroll-flag
> ; 2008/oct/21 M.C.	- create a new request to either create/update f119-doctor-ytd with rec-type 'D'
> ;			  add amt-net to amt-mtd and amt-ytd in f119-doctor-ytd
> ; 2008/oct/21 brad1     - consider that incoming transactions can have ytd values so use those amounts
> ; 2008/oct/22 brad2     - use net amounts not gross since gross figures reduced by factor to get net and that's values neeeded
> ; 2008/oct/24 brad3     - don't output prim doctor is prim doct nbr is blank (happends if all docs are terminate)
> ; 2008/oct/27 brad4     - use gross figures to update 97 screen "D" records
> ; 2008/nov/04 brad5     - correct tithing mtd calculation
> ; 2008/nov/04 brad6     - TITHE1/2/3 mtd set to 0 if no new monthly amount
> ; 2008/nov/05 brad7	- for YTD get existing value and add new MTD
> ; 2008/nov/05 brad8	- changed TITHE1/2/3 calc to get mtd amount and then add previous ytd to get new ytd
> ; 2008/nov/05 brad9	- added additional tithe2 situation to handle (A4)
> ; 2008/nov/11 M.C.	- change from 1 = 2 to 1=1 when output f119
> ;			- remove if condition when output to brad* subfiles
> ;			- include comp-code = 'TOTIT' in the select statement of the last request
> ; 2008/nov/11 brad10    - 1st request changed to process only TOTITD/E summary records (doc = 000) to get the correct new YTD values
> ;                         as the other records already have the YTD updated by previous pgms (u115a_0/1??) so don't need to
> ;                         process again
> ; 2009/feb/24 MC1	- modify the definition for amt-tithe2/3-actual-mtd
> ; 2010/Jul/08 MC2	- Change the amount range accordingly for July 1, 2010
> ;			  2.5% up to $75,000 billings
> ;			  5.0% from $ 75,001 - $150,000
> ;			  7.5% from$ 150,001 - $448,333.35
> ; 2016/Aug/04 MC3	- still consider doctor is active even though there is term date and as long as the term date
> ;			  is after the run date of this program
> 
> 
> cancel clear
> run u122b
> 
> set default
WORKSPACE and STACKSIZE can't be reset within a QTP run.
> set process nolimit
> set lock record update
> 
> global temp totexp-code   char*6
> global temp totexp-seq    zoned*2 unsigned
> global temp totexp-type   char*1
> global temp totexp-group  char*1
> 
> global temp incexp-code   char*6
> global temp incexp-seq    zoned*2 unsigned
> global temp incexp-type   char*1
> global temp incexp-group  char*1
> 
> global temp tithe1-code   char*6
> global temp tithe1-seq    zoned*2 unsigned
> global temp tithe1-type   char*1
> global temp tithe1-group  char*1
> global temp tithe1-factor numeric
> 
> global temp tithe2-code   char*6
> global temp tithe2-seq    zoned*2 unsigned
> global temp tithe2-type   char*1
> global temp tithe2-group  char*1
> global temp tithe2-factor numeric
> 
> global temp tithe3-code   char*6
> global temp tithe3-seq    zoned*2 unsigned
> global temp tithe3-type   char*1
> global temp tithe3-group  char*1
> global temp tithe3-factor numeric
> 
> global temp tithd1-code   char*6
> global temp tithd1-seq    zoned*2 unsigned
> global temp tithd1-type   char*1
> global temp tithd1-group  char*1
> global temp tithd1-factor numeric
> 
> global temp tithd2-code   char*6
> global temp tithd2-seq    zoned*2 unsigned
> global temp tithd2-type   char*1
> global temp tithd2-group  char*1
> global temp tithd2-factor numeric
> 
> global temp tithd3-code   char*6
> global temp tithd3-seq    zoned*2 unsigned
> global temp tithd3-type   char*1
> global temp tithd3-group  char*1
> global temp tithd3-factor numeric
> 
> global temp totite-code   char*6
> global temp totite-seq    zoned*2 unsigned
> global temp totite-type   char*1
> global temp totite-group  char*1
> global temp totite-factor numeric
> global temp totitd-code   char*6
> global temp totitd-seq    zoned*2 unsigned
> global temp totitd-type   char*1
> global temp totitd-group  char*1
> global temp totitd-factor numeric
> 
> global temp payroll-flag  char*1  parm prompt 'Enter payroll (A/C) : '
> 
> global temp x-comp-code1  char*6
> global temp x-comp-code2  char*6
> global temp x-comp-code3  char*6
> ;-------------------------------------------------------------------------------
> 
> request u122b_get_totexp                     &
>  		on edit        errors report &
> 		on calculation errors report
> access f190-comp-codes
> choose comp-code "TOTEXP"
Choose viaindex COMP-CODE.
> item totexp-code = 'TOTEXP'
> item totexp-seq  =  reporting-seq
> item totexp-group = comp-code-group
> ;-------------------------------------------------------------------------------
> 
> request u122b_get_incexp                     &
>  		on edit        errors report &
> 		on calculation errors report
> access f190-comp-codes
> choose comp-code "INCEXP"
Choose viaindex COMP-CODE.
> item incexp-code = 'INCEXP'
> item incexp-seq  =  reporting-seq
> item incexp-group = comp-code-group
> ;-------------------------------------------------------------------------------
> 
> request u122b_get_tithe1                     &
>  		on edit        errors report &
> 		on calculation errors report
> access f190-comp-codes
> choose comp-code "TITHE1"
Choose viaindex COMP-CODE.
> item tithe1-code = 'TITHE1'
> item tithe1-seq  =  reporting-seq
> item tithe1-type =  comp-type
> item tithe1-group = comp-code-group
> item tithe1-factor = factor
> ;-----------------------------------------------
> ; solo deduction
> request u122b_get_tithd1                     &
>                 on edit        errors report &
>                 on calculation errors report
> access f190-comp-codes
> choose comp-code   "TITHD1"
Choose viaindex COMP-CODE.
> item tithd1-code = "TITHD1"
> item tithd1-seq  =  reporting-seq
> item tithd1-type =  comp-type
> item tithe1-group = comp-code-group
> item tithe1-factor = factor
> ;-------------------------------------------------------------------------------
> 
> request u122b_get_tithe2                     &
>  		on edit        errors report &
> 		on calculation errors report
> access f190-comp-codes
> choose comp-code "TITHE2"
Choose viaindex COMP-CODE.
> item tithe2-code = 'TITHE2'
> item tithe2-seq  =  reporting-seq
> item tithe2-type =  comp-type
> item tithe2-group = comp-code-group
> item tithe2-factor = factor
> ;----------------------------------------------
> ; solo deduction
> request u122b_get_tithd2                     &
>                 on edit        errors report &
>                 on calculation errors report
> access f190-comp-codes
> choose comp-code   "TITHD2"
Choose viaindex COMP-CODE.
> item tithd2-code = "TITHD2"
> item tithd2-seq  =  reporting-seq
> item tithd2-type =  comp-type
> item tithe2-group = comp-code-group
> item tithe2-factor = factor
> 
> ;-------------------------------------------------------------------------------
> request u122b_get_tithe3                     &
>  		on edit        errors report &
> 		on calculation errors report
> access f190-comp-codes
> choose comp-code "TITHE3"
Choose viaindex COMP-CODE.
> item tithe3-code = 'TITHE3'
> item tithe3-seq  =  reporting-seq
> item tithe3-type =  comp-type
> item tithe3-group = comp-code-group
> item tithe3-factor = factor
> ;---------------------------------------------
> ; solo deduction
> request u122b_get_tithd3                     &
>                 on edit        errors report &
>                 on calculation errors report
> access f190-comp-codes
> choose comp-code   "TITHD3"
Choose viaindex COMP-CODE.
> item tithd3-code = "TITHD3"
> item tithd3-seq  =  reporting-seq
> item tithd3-type =  comp-type
> item tithd3-group = comp-code-group
> item tithe3-factor = factor
> 
> ;-------------------------------------------------------------------------------
> 
> request u122b_get_totite                     &
>  		on edit        errors report &
> 		on calculation errors report
> access f190-comp-codes
> choose comp-code "TOTITE"
Choose viaindex COMP-CODE.
> item totite-code = 'TOTITE'
> item totite-seq  =  reporting-seq
> item totite-type =  comp-type
> item totite-group = comp-code-group
> item totite-factor = factor
> ;-------------------------------------------------------------------------------
> 
> request u122b_get_totitd                     &
>  		on edit        errors report &
> 		on calculation errors report
> access f190-comp-codes
> choose comp-code "TOTITD"
Choose viaindex COMP-CODE.
> item totitd-code = 'TOTITD'
> item totitd-seq  =  reporting-seq
> item totitd-type =  comp-type
> item totitd-group = comp-code-group
> item totitd-factor = factor
> 
> item x-comp-code1 = tithe1-code if payroll-flag = 'A'	&
> 	    else    tithd1-code if payroll-flag = 'C'
> 
> item x-comp-code2 = tithe2-code if payroll-flag = 'A'	&
> 	    else    tithd2-code if payroll-flag = 'C'
> 
> item x-comp-code3 = tithe3-code if payroll-flag = 'A'	&
> 	    else    tithd3-code if payroll-flag = 'C'
> 
> ;-------------------------------------------------------------------------------
> request u122b_create_update_f119_rec_type_d	&
> 		on edit        errors report	&
>                 on calculation errors report
> ; main access
> 
> ; NOTE: this subfile has both amt-gross and amt-net the same and equal to the mtd calculations
> ; note request is effectively bypassed - see output 1 = 2
> access *f119_tithe_one_comp_code_per_doc_nbr		&
> 	link doc-ohip-nbr,				&
*E* The subfile requested does not exist.
*E* Can't find item named DOC-OHIP-NBR.
> 	     doc-nbr,					&
*E* Can't find item named DOC-NBR.
> 	     comp-code, rec-type-d			&
*E* Can't find item named COMP-CODE.
> 	  to doc-ohip-nbr,				&
*E* Can't find item named REC-TYPE-D.
> 	     doc-nbr,         				&
> 	     comp-code, rec-type of f119-doctor-ytd opt
> 
> ; do not select summarized doctor records
> ;brad10
> ;select if doc-nbr of f119_tithe_one_comp_code_per_doc_nbr <> '000'
> select if       doc-nbr of f119_tithe_one_comp_code_per_doc_nbr <> '000' 	&
*E* Can't find the file for item named DOC-NBR OF 
F119_TITHE_ONE_COMP_CODE_PER_DOC_NBR.
> 	  and	(    comp-code = "TOTITD"					&
> 		  or comp-code = "TOTITE"					&
> 		)
> 
> 
> def new-amt-ytd zoned*9 numeric =  amt-ytd 	of f119-doctor-ytd	&
> 				 + x-amt-gross
*E* Can't find numeric item named X-AMT-GROSS.
> ; 2008/11/11 - MC
> ;subfile brad keep   if doc-ohip-nbr = 107839	&
> subfile brad keep                               &
> ; 2008/11/11 - end
> include  comp-code of f119_tithe_one_comp_code_per_doc_nbr , 	&
*E* Can't find the file named COMP-CODE OF 
F119_TITHE_ONE_COMP_CODE_PER_DOC_NBR.
> 	doc-nbr    of f119_tithe_one_comp_code_per_doc_nbr,	&
*E* Can't find the file named DOC-NBR OF F119_TITHE_ONE_COMP_CODE_PER_DOC_NBR.
> 	amt-ytd    of f119-doctor-ytd,				&
> 	x-amt-gross  alias brad-amt-gross,			&
*E* Can't find the item or file named X-AMT-GROSS.
> 	new-amt-ytd
> 
> ; 2008/11/11 - MC
> ;output f119-doctor-ytd update if record f119-doctor-ytd exists on errors report         if 1 = 2
> output f119-doctor-ytd update if 1=1 and record f119-doctor-ytd exists on errors report
> ; 2008/11/11 - end
> ;brad4
> ;   item amt-mtd 		final 		x-amt-net
> ;;   item amt-ytd 		final amt-ytd + x-amt-gross
> ;   item amt-ytd 		final           x-amt-net; brad2 - gross is reduced by factor so net is amount needed in both
> ;							 ;	   mtd and ytd fields
>    item amt-mtd 		final 		x-amt-gross
*E* Can't find numeric item named X-AMT-GROSS.
> ;  item amt-ytd 		final           x-amt-gross 	; brad3 - net is reduced by factor so original gross amt is
> 			 					;         needed in both mtd and ytd fields
> ;brad6 don't add amt-ytd or get double????
> ;   item amt-ytd 		final amt-ytd + x-amt-gross	;brad6 gross in MTD value - add to existing YTD
> ;   item amt-ytd 		final           x-amt-gross	;brad6 gross in MTD value - add to existing YTD
>     item amt-ytd		final new-amt-ytd
> 
>    item last-mod-date 		final sysdate
>    item last-mod-time 		final systime / 10000
>    item last-mod-user-id	final 'u122b'
> 
> ;' 2008/11/11 - MC
> ;output f119-doctor-ytd alias f119-add add if 1 =2 and not record f119-doctor-ytd exists on errors report
> output f119-doctor-ytd alias f119-add add if 1=1 and not record f119-doctor-ytd exists on errors report
> ; 2008/11/11 - end
>    item doc-ohip-nbr 		final doc-ohip-nbr 	of f119_tithe_one_comp_code_per_doc_nbr
*E* Can't find the file for item named DOC-OHIP-NBR OF 
F119_TITHE_ONE_COMP_CODE_PER_DOC_NBR.
>    item doc-nbr 		final doc-nbr 		of f119_tithe_one_comp_code_per_doc_nbr
*E* Can't find the file for item named DOC-NBR OF 
F119_TITHE_ONE_COMP_CODE_PER_DOC_NBR.
>    item comp-code 		final comp-code 	of f119_tithe_one_comp_code_per_doc_nbr
*E* Can't find the file for item named COMP-CODE OF 
F119_TITHE_ONE_COMP_CODE_PER_DOC_NBR.
>    item comp-code-group 	final comp-code-group 	of f119_tithe_one_comp_code_per_doc_nbr
*E* Can't find the file for item named COMP-CODE-GROUP OF 
F119_TITHE_ONE_COMP_CODE_PER_DOC_NBR.
>    item process-seq 		final reporting-seq 	of f119_tithe_one_comp_code_per_doc_nbr
*E* Can't find the file for item named REPORTING-SEQ OF 
F119_TITHE_ONE_COMP_CODE_PER_DOC_NBR.
>    item rec-type 		final rec-type-d
*E* Can't find character item named REC-TYPE-D.
> ;brad3
>    item amt-mtd 		final x-amt-gross
*E* Can't find numeric item named X-AMT-GROSS.
>    item amt-ytd 		final x-amt-gross 	; brad3 - net is reduced by factor so original gross amt is
*E* Can't find numeric item named X-AMT-GROSS.
> 							;         needed in both mtd and ytd fields
>    item last-mod-date final sysdate
>    item last-mod-time final systime / 10000
>    item last-mod-user-id final 'u122b'
> 
> ;-------------------------------------------------------------------------------
> request u122b_search_primary_doctor    		&
Item TEXT OF F119-ADD initial TEXT OF F119-ADD.
> 		on edit        errors report	&
>                 on calculation errors report
> 
> access *f119_tithe_one_comp_code_per_doc_nbr            &
> 	link doc-ohip-nbr				&
*E* The subfile requested does not exist.
>           to doc-ohip-nbr of f020-doctor-mstr  opt      &
*E* Can't find item named DOC-OHIP-NBR.
>         link doc-nbr of f020-doctor-mstr                &
>           to doc-nbr of f020-doctor-extra opt
> 
> ;brad3
> ;select if doc-date-fac-term = 0
> 
> 
> select f119_tithe_one_comp_code_per_doc_nbr if                  &
*E* Can't find the file named F119_TITHE_ONE_COMP_CODE_PER_DOC_NBR.
>         (comp-code = totite-code and payroll-flag = 'A')        &
*E* Can't find item named COMP-CODE.
>    or   (comp-code = totitd-code and payroll-flag = 'C')
*E* Can't find item named COMP-CODE.
> 
> ;select if     doc-flag-primary = 'Y'
> 
> ;sorted on doc-ohip-nbr
> sort on doc-ohip-nbr on doc-nbr
*E* Need to know which file contains DOC-NBR.
> ;brad3
> ;temp x-amt-net-summary-doc zoned*9 numeric
> ;item x-amt-net-summary-doc = x-amt-net 				   &
> ;	if doc-nbr of f119_tithe_one_comp_code_per_doc_nbr = "000" &
> ;		 	reset at doc-ohip-nbr
> temp x-amt-gross-summary-doc zoned*9 numeric
> item x-amt-gross-summary-doc = x-amt-gross 				   &
> 	if doc-nbr of f119_tithe_one_comp_code_per_doc_nbr = "000" &
*E* Can't find numeric item named X-AMT-GROSS.
*E* Can't find the file for item named DOC-NBR OF 
F119_TITHE_ONE_COMP_CODE_PER_DOC_NBR.
> 		 	reset at doc-ohip-nbr
*E* Can't find the item named DOC-OHIP-NBR in the SORT statement.
> 
> temp x-primary-doc-nbr char*3
> item x-primary-doc-nbr = doc-nbr of f020-doctor-mstr		   &
> 	if doc-flag-primary = "Y" 	reset at doc-ohip-nbr
*E* Can't find the item named DOC-OHIP-NBR in the SORT statement.
> 
> 
> ;brad3
> subfile u122b_prim_doc_temp keep at doc-ohip-nbr include     	&
*E* Can't find the item named DOC-OHIP-NBR in the SORT statement.
> 	x-primary-doc-nbr,					&
> ;brad3								&
> ;	x-amt-net-summary-doc,					&
> 	x-amt-gross-summary-doc,				&
>         f119_tithe_one_comp_code_per_doc_nbr
*E* Can't find the item or file named F119_TITHE_ONE_COMP_CODE_PER_DOC_NBR.
> 
> ;----------------------------------------------------------
> request u122b_swap_doc_nbr_with_primary		&
> 		on edit        errors report	&
>                 on calculation errors report
> 
> access *u122b_prim_doc_temp               &
>         link x-primary-doc-nbr 		&
> 	 to  doc-nbr of f020-doctor-mstr
> 
> subfile u122b_prim_doc keep  if doc-date-fac-term = 0	&
> ; MC3
> 	or (doc-date-fac-term > sysdate)  &
> ; MC3 - end
> 	include u122b_prim_doc_temp
> item doc-nbr final x-primary-doc-nbr
*E* Only output files and temporary items can have ITEM statements.
> 
> ;----------------------------------------------------------
> request u122b_calc_tithe_1_2_3         		&
> 		on edit        errors report	&
>                 on calculation errors report
> 
> ; subfile comes in with net=gross and assigned the MTD titeable income - link to D/f119 records to pickup previous YTD to get new YTD
> access *u122b_prim_doc 						&
> 	link 6 to const-rec-nbr of constants-mstr-rec-6 	&
>         link doc-ohip-nbr, 					&
*E* Can't find item named DOC-OHIP-NBR.
> 	     '000', 						&
> ; comp-code is either 'TOTITE' or 'TOTITD'
> 	     comp-code,  					&
*E* Can't find item named COMP-CODE.
> 	     'D'                            			&
>           to doc-ohip-nbr, 					&
> 	     doc-nbr, 						&
> 	     comp-code, 					&
> 	     rec-type of f119-doctor-ytd   alias f119-totite opt  &
>         link doc-ohip-nbr, 					&
> 	     '000', 						&
> ; comp-code is either 'TITHE1' or 'TITHD1'
> 	     x-comp-code1,					&
> 	     'D'                            			&
>           to doc-ohip-nbr, 					&
> 	     doc-nbr, 						&
> 	     comp-code, 					&
> 	     rec-type of f119-doctor-ytd   alias f119-tithe1 opt  &
>         link doc-ohip-nbr, 					&
*E* Need to know which file contains DOC-OHIP-NBR.
> 	     '000', 						&
> ; comp-code is either 'TITHE2' or 'TITHD2'
> 	     x-comp-code2,					&
> 	     'D'                            			&
>         to   doc-ohip-nbr, 					&
> 	     doc-nbr, 						&
> 	     comp-code, 					&
> 	     rec-type of f119-doctor-ytd   alias f119-tithe2 opt  &
>         link doc-ohip-nbr, 					&
*E* Need to know which file contains DOC-OHIP-NBR.
> 	     '000', 						&
> ; comp-code is either 'TITHE3' or 'TITHD3'
> 	     x-comp-code3,					&
> 	     'D'                            			&
>           to doc-ohip-nbr, 					&
> 	     doc-nbr, 						&
> 	     comp-code, 					&
> 	     rec-type of f119-doctor-ytd   alias f119-tithe3 opt  ;&
> 
> ;brad6 - mth amounts not used
> ;def tithe1-mtd zoned*10 numeric = amt-mtd   of f119-tithe1
> def tithe1-ytd zoned*10 numeric = amt-ytd   of f119-tithe1
> 
> ;def tithe2-mtd zoned*10 numeric = amt-mtd   of f119-tithe2
> def tithe2-ytd zoned*10 numeric = amt-ytd   of f119-tithe2
> 
> ;def tithe3-mtd zoned*10 numeric = amt-mtd   of f119-tithe3
> def tithe3-ytd zoned*10 numeric = amt-ytd   of f119-tithe3
> 
> ; mtd/ytd total titheable revenue is existing YTD + this mth's calculation
> 
> ;def new-totite-mtd zoned*10 numeric = x-amt-net of u122b_prim_doc
> ;brad3
> ;def new-totite-mtd zoned*10 numeric = x-amt-net-summary-doc of u122b_prim_doc
> def new-totite-mtd zoned*10 numeric = x-amt-gross-summary-doc of u122b_prim_doc
> 
> def new-totite-ytd zoned*10 numeric = amt-ytd   of f119-totite	&
> ;				    + x-amt-net of u122b_prim_doc
> ;brad3				    + x-amt-net-summary-doc of u122b_prim_doc
> 				    + x-amt-gross-summary-doc of u122b_prim_doc
> 
> def x-current-ep-nbr = current-ep-nbr
> 
> ; get new tithe total income and compare against last ytd tithe income.
> ; if new       YTD titheable income is<= 75000 then calcluate using just this month's new MTD titheable income
> ; otherwise if YTD titheable income is > 75000 then calculate on what was left between last month's YTD titheabe income and 750000
> 
> def old-totite-ytd  zoned*10  = amt-ytd of f119-totite
> def tot1 zoned*10 numeric = new-totite-ytd - amt-ytd of f119-totite
> def tot2 zoned*10 numeric =  7500000       - amt-ytd of f119-totite
> def tot3 zoned*10 numeric = 15000000       - amt-ytd of f119-totite
> 
> ;brad8
> ; tithe1 conditions
> ; (titheable income for first 75K has 2 options:
> ; 1 - if new ytd tithe is <= 75K then tithe1 income is difference  between this mths and last mths ytd titheable income
> ; 2 - if new ytd tithe is >  75K and last mths ytd was <= 75K then tithe1 income is remaining include up to 75K limit
> 
> ;def amt-tithe1-actual-ytd  zoned*10 numeric = 	       			      		&
> def amt-tithe1-actual-mtd  zoned*10 numeric = 	       			      		&
>      round(((new-totite-ytd        - old-totite-ytd) * tithe1-factor)/10000,0,near) 	&
> 							if new-totite-ytd <=  7500000	&
> else round(((7500000               - old-totite-ytd) * tithe1-factor)/10000,0,near) 	&
> 			          if     old-totite-ytd                   <=  7500000	&
> 			   	     and new-totite-ytd		  	  >   7500000
> 
> ; tithe2 conditions
> ; (titheable income for 2nd 75K (75K to 150K range) has 4 options:
> ; 1 - if old ytd tithe was in the same 75K to 150K range as new ytd,
> ;	then tithe2 income is this mths new income (new-old)
> ; 2 - if old ytd tithe was <= 75K and new ytd is in 75K to 150K range,
> ;	then tithe2 income is amount of income within that 75K to 150K range
> ; 3 - if old ytd tithe was <= 75K and new ytd is over 150K range,
> ;	then total 75K of range is titheable income
> ; 4 - if old ytd tithe was in 75K to 150K range and new ytd is over 150K range,
> ;	then tithe2 income is remaining include up to 150K limit
> 
> ;      75000        150000        491667
> ;        |  A1  A1   |             |
> ;   A2   |    A2     |             |
> ;   A3   |           |    A3       |
> ;        |    A4     |    A4       |
> 
> ; 2001/07/08 - MC2 - now the new range
> ;      75000        150000        448333.35
> ;        |  A1  A1   |             |
> ;   A2   |    A2     |             |
> ;   A3   |           |    A3       |
> ;        |    A4     |    A4       |
> 
> ;brad8
> ;def amt-tithe2-actual-ytd  zoned*10 numeric = 	       			      		&
> def amt-tithe2-actual-mtd  zoned*10 numeric = 	       			      		&
> ; A1
>      round(((new-totite-ytd        - old-totite-ytd) * tithe2-factor)/10000,0,near) 	&
> 			          if     old-totite-ytd                   >   7500000	&
> 			             and old-totite-ytd                   <= 15000000	&
> 			   	     and new-totite-ytd		  	  >   7500000	&
> 			   	     and new-totite-ytd		  	  <= 15000000	&
> ; A2
> else round(((new-totite-ytd        -  7500000      ) * tithe2-factor)/10000,0,near) 	&
> ; 2009/02/24 - MC1
> ;			          if     old-totite-ytd                   <   7500000	&
> 			          if     old-totite-ytd                   <=  7500000	&
> ; 2009/02/24 - end
> 			   	     and new-totite-ytd		  	  >   7500000	&
> 			   	     and new-totite-ytd		  	  <= 15000000	&
> ; A3
> else round(((                         7500000      ) * tithe2-factor)/10000,0,near) 	&
> ; 2009/02/24 - MC1
> ;			          if     old-totite-ytd                   <   7500000	&
> 			          if     old-totite-ytd                   <=  7500000	&
> ; 2009/02/24 - end
> 			   	     and new-totite-ytd		  	  >  15000000	&
> ;brad9
> ; A4
> else round(((15000000              - old-totite-ytd ) * tithe2-factor)/10000,0,near) 	&
> 			          if     old-totite-ytd                   >   7500000	&
> 			   	     and old-totite-ytd		  	  <= 15000000	&
> 			   	     and new-totite-ytd		  	  >  15000000	&
> ; 2010/07/08 - MC2
> ;			   	     and new-totite-ytd		  	  <= 49166700
> 			   	     and new-totite-ytd		  	  <= 44833335
> ; 20101/07/08 - end
> 
> ; tithe3 conditions
> ;  97,894.64    133,435.10
> ; 147,158.10    189,858.25
> ; (titheable income for 3rd 75K (150K to 49166700 range) has 4 options:
> ; 1 - if old ytd tithe was in the same 150K to 491K range as new ytd,
> ;	then tithe3 income is this mths new income (new-old)
> ; 2 - if old ytd tithe was <= 150K and new ytd is in 150K to 491K range,
> ;	then tithe3 income is amount of income within that 150K to 491K range
> ; 3 - if old ytd tithe <= 150K and new ytd is over 491K range,
> ;	then total 34166666 of range is titheable income
> ; 4 - if old ytd tithe was in 150K to 49166700 range and new ytd is over 49166700 range,
> ;	then tithe3 income is remaining include up to 49166700 limit
> 
> ;      75000        150000        491667
> ;        |           |   A1  A1    |
> ;        |    A2     |     A2      |
> ;        |    A3     |             |   A3
> ;        |           |     A4      |   A4
> 
> 
> ;brad8
> ;def amt-tithe3-actual-ytd  zoned*10 numeric = 	       			      		&
> def amt-tithe3-actual-mtd  zoned*10 numeric = 	       			      		&
> ; A1
>      round(((new-totite-ytd        - old-totite-ytd) * tithe3-factor)/10000,0,near) 	&
> 			          if     old-totite-ytd                   >  15000000	&
> ; 2010/07/08 - MC2
> ;			             and old-totite-ytd                   <= 49166700	&
> 			             and old-totite-ytd                   <= 44833335	&
> ; 2010/07/08 - end
> 			   	     and new-totite-ytd		  	  >  15000000	&
> ; 2010/07/08 - MC2
> ;			   	     and new-totite-ytd		  	  <= 49166700	&
> 			   	     and new-totite-ytd		  	  <= 44833335	&
> ; 2010/07/08 - end
> 
> ; A2
> else round(((new-totite-ytd        - 15000000      ) * tithe3-factor)/10000,0,near) 	&
> 			          if     old-totite-ytd                   <  15000000	&
> ; 2009/02/24 - MC1
> ;			   	     and new-totite-ytd		  	  >= 15000000	&
> 			   	     and new-totite-ytd		  	  >  15000000	&
> ; 2009/02/24 - end
> ; 2010/07/08 - MC2
> ;			   	     and new-totite-ytd		  	  <= 49166700	&
> 			   	     and new-totite-ytd		  	  <= 44833335	&
> ; 2010/07/08 - end
> 
> ; A3
> ; 2009/02/24 - MC1
> ;else round(((                        7500000       ) * tithe3-factor)/10000,0,near) 	&
> ;			          if     old-totite-ytd                   <  15000000	&
> ; 2010/07/08 - MC2
> ;else round(((                        34166666       ) * tithe3-factor)/10000,0,near) 	&
> else round(((                       29833335        ) * tithe3-factor)/10000,0,near) 	&
> 			          if     old-totite-ytd                   <= 15000000	&
> ; 2009/02/29 - end
> ; 2010/07/08 - MC2
> ;			   	     and new-totite-ytd		  	  >  49166700	&
> 			   	     and new-totite-ytd		  	  >  44833335	&
> ; 2010/07/08 - end
> 
> ; 2009/02 - MC1 - add the 4th option
> ; A4
> ; 2010/07/08 - MC2
> ;else round(((49166700              - old-totite-ytd) * tithe3-factor)/10000,0,near) 	&
> ;			          if     old-totite-ytd                   >  15000000	&
> ;			             and old-totite-ytd                   <= 49166700	&
> ;			   	     and new-totite-ytd		  	  >  49166700
> else round(((44833335              - old-totite-ytd) * tithe3-factor)/10000,0,near) 	&
> 			          if     old-totite-ytd                   >  15000000	&
> 			             and old-totite-ytd                   <= 44833335	&
> 			   	     and new-totite-ytd		  	  >  44833335
> ; 2010/07/08 - end
> ; 2009/02/29 - end
> 
> 
> ;def amt-tithe3-actual-ytd  zoned*10 numeric = 	       					&
> ;     round(((new-totite-ytd       - 15000000 )  * tithe3-factor)/10000,0,near) 		&
> ;	 if (new-totite-ytd       > 15000000  and new-totite-ytd        <= 49166700)	&
> ;else round(((49166700 - amt-ytd of f119-totite) * tithe3-factor)/10000,0,near) 		&
> ;	if amt-ytd of f119-totite > 15000000 and amt-ytd of f119-totite <= 49166700
> 
> ;brad8
> ;def amt-tithe1-actual-mtd  zoned*10 numeric   	&
> ;       = amt-tithe1-actual-ytd  - tithe1-ytd 	&
> ;		if amt-tithe1-actual-ytd > 0	&
> ;   else  0
> def amt-tithe1-actual-ytd  zoned*10 numeric   	&
>        = amt-tithe1-actual-mtd + tithe1-ytd 	&
> 		if amt-tithe1-actual-mtd > 0	&
>    else  tithe1-ytd
> ;brad8
> ;def amt-tithe2-actual-mtd  zoned*10 numeric   	&
> ;       = amt-tithe2-actual-ytd  - tithe2-ytd 	&
> ;		if amt-tithe2-actual-ytd > 0	&
> ;   else  0
> def amt-tithe2-actual-ytd  zoned*10 numeric   	&
>        = amt-tithe2-actual-mtd + tithe2-ytd 	&
> 		if amt-tithe2-actual-mtd > 0	&
>    else  tithe2-ytd
> ;brad8
> ;def amt-tithe3-actual-mtd  zoned*10 numeric   	&
> ;       = amt-tithe3-actual-ytd  - tithe3-ytd 	&
> ;		if amt-tithe3-actual-ytd > 0	&
> ;   else  0
> def amt-tithe3-actual-ytd  zoned*10 numeric   	&
>        = amt-tithe3-actual-mtd + tithe3-ytd 	&
> 		if amt-tithe3-actual-mtd > 0	&
>    else  tithe3-ytd
> 
> subfile brad_tithe1 keep include &
> doc-nbr of u122b_prim_doc  ,&
*E* Can't find the item or file named DOC-NBR OF U122B_PRIM_DOC.
> x-primary-doc-nbr 	of u122b_prim_doc, &
> ;x-amt-net-summary-doc	of u122b_prim_doc, &
> x-amt-gross-summary-doc	of u122b_prim_doc, &
> doc-ohip-nbr of u122b_prim_doc  ,&
*E* Can't find the item or file named DOC-OHIP-NBR OF U122B_PRIM_DOC.
> amt-ytd  of f119-totite ,&
> x-amt-net of u122b_prim_doc, &
*E* Can't find the item or file named X-AMT-NET OF U122B_PRIM_DOC.
> old-totite-ytd, &
> new-totite-ytd, &
> tot1, &
> tot2, &
> tot3, &
> amt-tithe1-actual-mtd,   &
> amt-tithe1-actual-ytd
> 
> subfile brad_tithe2 keep include &
> doc-nbr of u122b_prim_doc  ,&
*E* Can't find the item or file named DOC-NBR OF U122B_PRIM_DOC.
> x-primary-doc-nbr 	of u122b_prim_doc, &
> ;x-amt-net-summary-doc	of u122b_prim_doc, &
> x-amt-gross-summary-doc	of u122b_prim_doc, &
> doc-ohip-nbr of u122b_prim_doc  ,&
*E* Can't find the item or file named DOC-OHIP-NBR OF U122B_PRIM_DOC.
> amt-ytd  of f119-totite ,&
> x-amt-net of u122b_prim_doc, &
*E* Can't find the item or file named X-AMT-NET OF U122B_PRIM_DOC.
> old-totite-ytd, &
> new-totite-ytd, &
> tot1, &
> tot2, &
> tot3, &
> amt-tithe2-actual-mtd,   &
> amt-tithe2-actual-ytd
> 
> subfile brad_tithe3 keep include &
> doc-nbr of u122b_prim_doc  ,&
*E* Can't find the item or file named DOC-NBR OF U122B_PRIM_DOC.
> x-primary-doc-nbr 	of u122b_prim_doc, &
> ;x-amt-net-summary-doc	of u122b_prim_doc, &
> x-amt-gross-summary-doc	of u122b_prim_doc, &
> doc-ohip-nbr of u122b_prim_doc  ,&
*E* Can't find the item or file named DOC-OHIP-NBR OF U122B_PRIM_DOC.
> amt-ytd  of f119-totite ,&
> x-amt-net of u122b_prim_doc, &
*E* Can't find the item or file named X-AMT-NET OF U122B_PRIM_DOC.
> old-totite-ytd, &
> new-totite-ytd, &
> tot1, &
> tot2, &
> tot3, &
> amt-tithe3-actual-mtd,   &
> amt-tithe3-actual-ytd
> 
> define x-rec-type  char*1 = "A"
> 
> def comp-code1 char*6 = tithe1-code if payroll-flag = 'A'	&
> 		else    tithd1-code if payroll-flag = 'C'
> 
> def comp-seq1 zoned*2 unsigned  = tithe1-seq  if payroll-flag = 'A'	&
> 	              else 	  tithd1-seq  if payroll-flag = 'C'
> 
> def comp-group1 char*1 = tithe1-group if payroll-flag = 'A'	&
> 		else     tithd1-group if payroll-flag = 'C'
> 
> 
> subfile f119_tithe_1_2_3_trans  keep   	          &
> 	if   amt-tithe1-actual-mtd <> 0 	  &
> 	  or amt-tithe1-actual-ytd <> 0  include  &
> 	 doc-ohip-nbr      of u122b_prim_doc 	, &
*E* Can't find the item or file named DOC-OHIP-NBR OF U122B_PRIM_DOC.
>          x-primary-doc-nbr of u122b_prim_doc		, &
>          comp-code1                     	, &
>          comp-seq1                              , &
>          comp-group1                            , &
>          x-rec-type				, &
>          amt-tithe1-actual-mtd    		, &
>          amt-tithe1-actual-ytd
> 
> def comp-code2 char*6 = tithe2-code if payroll-flag = 'A'	&
> 		else    tithd2-code if payroll-flag = 'C'
> 
> def comp-seq2 zoned*2 unsigned  = tithe2-seq  if payroll-flag = 'A'	&
> 	              else 	  tithd2-seq  if payroll-flag = 'C'
> 
> def comp-group2 char*1 = tithe2-group if payroll-flag = 'A'	&
> 		else     tithd2-group if payroll-flag = 'C'
> 
> subfile f119_tithe_1_2_3_trans alias f119tithe2        append  &
> 	if amt-tithe2-actual-mtd <> 0 		  &
> 	or amt-tithe2-actual-ytd <> 0  include	  &
> 	 doc-ohip-nbr      of u122b_prim_doc 	, &
*E* Can't find the item or file named DOC-OHIP-NBR OF U122B_PRIM_DOC.
>          x-primary-doc-nbr of u122b_prim_doc	, &
>          comp-code2                    		, &
>          comp-seq2                              , &
>          comp-group2                            , &
>          x-rec-type				, &
>          amt-tithe2-actual-mtd    		, &
>          amt-tithe2-actual-ytd
> 
> def comp-code3 char*6 = tithe3-code if payroll-flag = 'A'	&
> 		else    tithd3-code if payroll-flag = 'C'
> 
> def comp-seq3 zoned*2 unsigned  = tithe3-seq  if payroll-flag = 'A'	&
> 	              else 	  tithd3-seq  if payroll-flag = 'C'
> 
> def comp-group3 char*1 = tithe3-group if payroll-flag = 'A'	&
> 		else     tithd3-group if payroll-flag = 'C'
> 
> subfile f119_tithe_1_2_3_trans alias f119tithe3        append  &
> 	if amt-tithe3-actual-mtd <> 0 		  &
> 	or amt-tithe3-actual-ytd <> 0  include	  &
> 	 doc-ohip-nbr      of u122b_prim_doc 	, &
*E* Can't find the item or file named DOC-OHIP-NBR OF U122B_PRIM_DOC.
>          x-primary-doc-nbr of u122b_prim_doc	, &
>          comp-code3                    		, &
>          comp-seq3                              , &
>          comp-group3                            , &
>          x-rec-type				, &
>          amt-tithe3-actual-mtd    		, &
>          amt-tithe3-actual-ytd
> 
> 
> output f110-compensation alias f110-totite-add add   &
> 	if 1=1
> 	item doc-nbr	     = doc-nbr of u122b_prim_doc
*E* Can't find character item named DOC-NBR OF U122B_PRIM_DOC.
> ;	item doc-nbr	     = x-primary-doc-nbr  of u122b_prim_doc
>         item ep-nbr          = current-ep-nbr
>         item ep-nbr-entry    = current-ep-nbr
> ;either "TOTITE"  or "TOTITD"
>         item comp-code       = comp-code of u122b_prim_doc
*E* Can't find character item named COMP-CODE OF U122B_PRIM_DOC.
>         item comp-type       = totite-type if payroll-flag = 'A'	&
> 			else   totitd-type if payroll-flag = 'C'
>         item process-seq     = totite-seq  if payroll-flag = 'A'	&
> 			else   totitd-seq  if payroll-flag = 'C'
>         item factor          = 10000
>         item factor-override = " "
>         item comp-units      = 0
> 
>         item amt-gross         =  new-totite-mtd	; note these figures verified as valid
>         item amt-net           =  new-totite-ytd
> 
>         item compensation-status = " "
>         item last-mod-date    = sysdate
> 
> 
> ;either 'TITHE1' or 'TITHD1'
> output f110-compensation alias f110-tithe1-add add  &
>      if     (   amt-tithe1-actual-mtd <> 0           &
>              or amt-tithe1-actual-ytd <> 0           &
>             )                                        &
> 	and  1=1
> 	item doc-nbr	     = doc-nbr of u122b_prim_doc
*E* Can't find character item named DOC-NBR OF U122B_PRIM_DOC.
> ;	item doc-nbr	     = x-primary-doc-nbr  of u122b_prim_doc
>         item ep-nbr          = current-ep-nbr
>         item ep-nbr-entry    = current-ep-nbr
>         item comp-code       = comp-code1
>         item comp-type       = tithe1-type if payroll-flag = 'A'	&
> 			else   tithd1-type if payroll-flag = 'C'
>         item process-seq     = comp-seq1
>         item factor          = 10000
>         item factor-override = " "
>         item comp-units      = 0
>         item amt-net           =  amt-tithe1-actual-mtd
>         item amt-gross         =  amt-tithe1-actual-ytd
>         item compensation-status = " "
>         item last-mod-date    = sysdate
> 
> ;either 'TITHE2' or 'TITHD2'
> output f110-compensation alias f110-tithe2-add add   &
>      if     (   amt-tithe2-actual-mtd <> 0           &
>              or amt-tithe2-actual-ytd <> 0           &
>             )                                        &
> 	and  1=1
> 	item doc-nbr	     = doc-nbr of u122b_prim_doc
*E* Can't find character item named DOC-NBR OF U122B_PRIM_DOC.
> ;	item doc-nbr	     = x-primary-doc-nbr  of u122b_prim_doc
>         item ep-nbr          = current-ep-nbr
>         item ep-nbr-entry    = current-ep-nbr
>         item comp-code       = comp-code2
>         item comp-type       = tithe2-type if payroll-flag = 'A'	&
> 			else   tithd2-type if payroll-flag = 'C'
>         item process-seq     = comp-seq2
>         item factor          = 10000
>         item factor-override = " "
>         item comp-units      = 0
>         item amt-net           =  amt-tithe2-actual-mtd
>         item amt-gross         =  amt-tithe2-actual-ytd
>         item compensation-status = " "
>         item last-mod-date    = sysdate
> 
> ;either 'TITHE3' or 'TITHD3'
> output f110-compensation alias f110-tithe3-add add   &
>      if     (   amt-tithe3-actual-mtd <> 0           &
>              or amt-tithe3-actual-ytd <> 0           &
>             )                                        &
>         and  1=1
> 	item doc-nbr	     = doc-nbr of u122b_prim_doc
*E* Can't find character item named DOC-NBR OF U122B_PRIM_DOC.
> ;	item doc-nbr	     = x-primary-doc-nbr  of u122b_prim_doc
>         item ep-nbr          = current-ep-nbr
>         item ep-nbr-entry    = current-ep-nbr
>         item comp-code       = comp-code3
>         item comp-type       = tithe3-type if payroll-flag = 'A'	&
> 			else   tithd3-type if payroll-flag = 'C'
>         item process-seq     = comp-seq3
>         item factor          = 10000
>         item factor-override = " "
>         item comp-units      = 0
>         item amt-net           =  amt-tithe3-actual-mtd
>         item amt-gross         =  amt-tithe3-actual-ytd
>         item compensation-status = " "
>         item last-mod-date    = sysdate
>         item last-mod-time    = systime / 10000
>         item last-mod-user-id = "u122b gen'd"
> 
> ;---------------------------------------------------------
> ; TITHE1 or TITHD1
> output f119-tithe1 update                               &
>      if     (   amt-tithe1-actual-mtd <> 0           &
>              or amt-tithe1-actual-ytd <> 0           &
>             )                                        &
>        and  1=1  and record f119-tithe1 exists on errors report
>   item amt-mtd         final amt-tithe1-actual-mtd
>   item amt-ytd         final amt-tithe1-actual-ytd
> 
> output f119-doctor-ytd   alias f119-tithe1-add add    &
>       if     (   amt-tithe1-actual-mtd <> 0           &
>               or amt-tithe1-actual-ytd <> 0           &
>              )					      &
>        and  not record f119-tithe1 exists and 1=1  on errors report
>   item doc-ohip-nbr    final doc-ohip-nbr     of u122b_prim_doc
*E* Can't find numeric item named DOC-OHIP-NBR OF U122B_PRIM_DOC.
>   item doc-nbr         final '000'
>   item rec-type	       final 'D'
>   item comp-code       final comp-code1
>   item process-seq     final comp-seq1
>   item comp-code-group final comp-group1
>   item amt-mtd         final amt-tithe1-actual-mtd
>   item amt-ytd         final amt-tithe1-actual-ytd
> ;---------------------------------------------------------
> ; TITHE2 or TITHD2
> output f119-tithe2 update                               &
>      if     (   amt-tithe2-actual-mtd <> 0           &
>              or amt-tithe2-actual-ytd <> 0           &
>             )                                        &
>        and  1=1 and  record f119-tithe2 exists on errors report
>   item amt-mtd         final amt-tithe2-actual-mtd
>   item amt-ytd         final amt-tithe2-actual-ytd
> 
> output f119-doctor-ytd   alias f119-tithe2-add add    &
>       if     (   amt-tithe2-actual-mtd <> 0           &
>               or amt-tithe2-actual-ytd <> 0           &
>              )					      &
>        and  not record f119-tithe2 exists and 1=1 on errors report
>   item doc-ohip-nbr    final doc-ohip-nbr     of u122b_prim_doc
*E* Can't find numeric item named DOC-OHIP-NBR OF U122B_PRIM_DOC.
>   item doc-nbr         final '000'
>   item rec-type	       final 'D'
>   item comp-code       final comp-code2
>   item process-seq     final comp-seq2
>   item comp-code-group final comp-group2
>   item amt-mtd         final amt-tithe2-actual-mtd
>   item amt-ytd         final amt-tithe2-actual-ytd
> ;---------------------------------------------------------
> ; TITHE3 or TITHD3
> output f119-tithe3 update                               &
>      if     (   amt-tithe3-actual-mtd <> 0           &
>              or amt-tithe3-actual-ytd <> 0           &
>             )                                        &
>        and  1=1 and record f119-tithe3  exists on errors report
>   item amt-mtd         final amt-tithe3-actual-mtd
>   item amt-ytd         final amt-tithe3-actual-ytd
> 
> output f119-doctor-ytd   alias f119-tithe3-add add    &
>       if     (   amt-tithe3-actual-mtd <> 0           &
>               or amt-tithe3-actual-ytd <> 0           &
>              )					      &
>        and  not record f119-tithe3 exists and 1=1 on errors report
>   item doc-ohip-nbr    final doc-ohip-nbr     of u122b_prim_doc
*E* Can't find numeric item named DOC-OHIP-NBR OF U122B_PRIM_DOC.
>   item doc-nbr         final '000'
>   item rec-type	       final 'D'
>   item comp-code       final comp-code3
>   item process-seq     final comp-seq3
>   item comp-code-group final comp-group3
>   item amt-mtd         final amt-tithe3-actual-mtd
>   item amt-ytd         final amt-tithe3-actual-ytd
> 
> ;----------------------------------------------------------------------------------
> 
> ; this request updates 000 doctor records in "D"/f119
> request u122b_add_summary_doctor_recs_to_f119	&
Item LAST-MOD-TIME OF F110-TOTITE-ADD initial LAST-MOD-TIME OF F119-TOTITE.
Item LAST-MOD-USER-ID OF F110-TOTITE-ADD initial LAST-MOD-USER-ID OF 
F119-TOTITE.
Item FILLER OF F110-TOTITE-ADD initial FILLER OF CONSTANTS-MSTR-REC-6.
Item LAST-MOD-TIME OF F110-TITHE1-ADD initial LAST-MOD-TIME OF F119-TOTITE.
Item LAST-MOD-USER-ID OF F110-TITHE1-ADD initial LAST-MOD-USER-ID OF 
F119-TOTITE.
Item FILLER OF F110-TITHE1-ADD initial FILLER OF CONSTANTS-MSTR-REC-6.
Item LAST-MOD-TIME OF F110-TITHE2-ADD initial LAST-MOD-TIME OF F119-TOTITE.
Item LAST-MOD-USER-ID OF F110-TITHE2-ADD initial LAST-MOD-USER-ID OF 
F119-TOTITE.
Item FILLER OF F110-TITHE2-ADD initial FILLER OF CONSTANTS-MSTR-REC-6.
Item FILLER OF F110-TITHE3-ADD initial FILLER OF CONSTANTS-MSTR-REC-6.
Item TEXT OF F119-TITHE1-ADD initial TEXT OF F119-TOTITE.
Item LAST-MOD-DATE OF F119-TITHE1-ADD initial LAST-MOD-DATE OF F119-TOTITE.
Item LAST-MOD-TIME OF F119-TITHE1-ADD initial LAST-MOD-TIME OF F119-TOTITE.
Item LAST-MOD-USER-ID OF F119-TITHE1-ADD initial LAST-MOD-USER-ID OF 
F119-TOTITE.
Item TEXT OF F119-TITHE2-ADD initial TEXT OF F119-TOTITE.
Item LAST-MOD-DATE OF F119-TITHE2-ADD initial LAST-MOD-DATE OF F119-TOTITE.
Item LAST-MOD-TIME OF F119-TITHE2-ADD initial LAST-MOD-TIME OF F119-TOTITE.
Item LAST-MOD-USER-ID OF F119-TITHE2-ADD initial LAST-MOD-USER-ID OF 
F119-TOTITE.
Item TEXT OF F119-TITHE3-ADD initial TEXT OF F119-TOTITE.
Item LAST-MOD-DATE OF F119-TITHE3-ADD initial LAST-MOD-DATE OF F119-TOTITE.
Item LAST-MOD-TIME OF F119-TITHE3-ADD initial LAST-MOD-TIME OF F119-TOTITE.
Item LAST-MOD-USER-ID OF F119-TITHE3-ADD initial LAST-MOD-USER-ID OF 
F119-TOTITE.
> 		on edit        errors report	&
>                 on calculation errors report
> 
> access *f119_tithe_one_comp_code_per_doc_nbr			&
>         link doc-ohip-nbr, 					&
*E* The subfile requested does not exist.
*E* Can't find item named DOC-OHIP-NBR.
> 	     doc-nbr,						&
*E* Can't find item named DOC-NBR.
> 	     comp-code,  					&
*E* Can't find item named COMP-CODE.
> 	     'D'                            			&
>           to doc-ohip-nbr, 					&
> 	     doc-nbr, 						&
> 	     comp-code, 					&
> 	     rec-type of f119-doctor-ytd   alias f119-totite opt &
>  	 link comp-code						&
> 	  to  comp-code of f190-comp-codes
> 
> ;brad7
> ;select if     doc-nbr = '000'
> ; dont want individual comp codes (NONRBetc) with 000 records - only TOTITD/E
> ; 2008/11/11 - MC
> ;select if doc-nbr = "000" and comp-code = "TOTITD"
> select if doc-nbr = "000" and (comp-code = "TOTITD"  or comp-code = "TOTITE")
*E* Need to know which file contains COMP-CODE.
*E* Need to know which file contains COMP-CODE.
> ; 2008/11/11 - end
> 
> ;brad7
> subfile brad2 keep                             include 			&
> 	doc-nbr of f119_tithe_one_comp_code_per_doc_nbr ,		&
*E* Can't find the file named DOC-NBR OF F119_TITHE_ONE_COMP_CODE_PER_DOC_NBR.
> 	comp-code of f119_tithe_one_comp_code_per_doc_nbr alias code,	&
*E* Can't find the file named COMP-CODE OF 
F119_TITHE_ONE_COMP_CODE_PER_DOC_NBR.
> 	x-amt-net alias net, x-amt-gross alias gross, amt-mtd alias mtd, amt-ytd alias ytd
*E* Can't find the item or file named X-AMT-NET.
*E* Can't find the item or file named X-AMT-GROSS.
> 
> ; TOTITE/TOTITD
> output f119-totite    update                               &
>        if 1=1 and record f119-totite exists on errors report
> ;brad4
> ;  item amt-mtd         final x-amt-net
> ;  item amt-ytd         final x-amt-net       ; we're not sure what it should be added to amt-ytd(TODO)
> ;brad7
> ;  item amt-mtd         final x-amt-gross
> ;  item amt-ytd         final x-amt-gross	; we're not sure what it should be added to amt-ytd(TODO)
>   item amt-mtd         final x-amt-gross
*E* Can't find numeric item named X-AMT-GROSS.
>   item amt-ytd         final amt-ytd + x-amt-gross	; we're not sure what it should be added to amt-ytd(TODO)
*E* Can't find numeric item named X-AMT-GROSS.
> 
> output f119-doctor-ytd   alias f119-totite-add add    &
>        if not record f119-totite exists and 1=1 on errors report
>   item doc-ohip-nbr    final doc-ohip-nbr      	of f119_tithe_one_comp_code_per_doc_nbr
*E* Can't find the file for item named DOC-OHIP-NBR OF 
F119_TITHE_ONE_COMP_CODE_PER_DOC_NBR.
>   item doc-nbr         final "000"
>   item rec-type	       final 'D'
>   item comp-code       final comp-code   	of f119_tithe_one_comp_code_per_doc_nbr
*E* Can't find the file for item named COMP-CODE OF 
F119_TITHE_ONE_COMP_CODE_PER_DOC_NBR.
>   item process-seq     final process-seq 	of f190-comp-codes
>   item comp-code-group final comp-code-group 	of f190-comp-codes
> ;brad4
> ;  item amt-mtd         final x-amt-net
> ;  item amt-ytd         final x-amt-net
>   item amt-mtd         final x-amt-gross
*E* Can't find numeric item named X-AMT-GROSS.
>   item amt-ytd         final x-amt-gross
*E* Can't find numeric item named X-AMT-GROSS.
> 
> ;---------------------------------------------------------
> build  $pb_obj/u122b
*E* There were errors in the source code. BUILD wasn't performed.
Thu Sep  8 15:27:39 EDT 2016
