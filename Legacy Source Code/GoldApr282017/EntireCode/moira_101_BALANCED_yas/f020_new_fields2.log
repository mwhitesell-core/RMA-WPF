/alpha/rmabill/rmabill101/src
Mon Sep 30 14:49:24 EDT 2013
 + + + Sourced in /alpha/rmabill/rmabill101/src + + +
;Compiling program [/alpha/rmabill/rmabill101/src/f020_new_fields2.qts]
Q T P   (7.33.E)
Copyright 1996 COGNOS INCORPORATED
Licensed PH-RUNTIME for customer: 5139390001 C.O.T.A UNIX

> 
> ; 2006/04/10 	M.C.	- extend email address from x(30) to x(50)
> 
> cancel clear
> set process nolimit
> request one                                     &
>                 on edit        errors report    &
>                 on calculation errors report
> 
> access *wb &
>   link 	" "	,					&
*E* The subfile requested does not exist.
> 	doc-nbr	,					&
*E* Can't find item named DOC-NBR.
> 	"D"						&
>     to filler	,					&
> 	doc-nbr	,					&
> 	contacts-type of f027-contacts-mstr 		&
> 				alias f027-doc     	&
>   link 	" "	,					&
> 	doc-nbr	,					&
> 	"D"	,					&
>   	"H"						&
>     to filler	,					&
> 	doc-nbr	,					&
> 	contacts-type	,				&
> 	contacts-location of f028-contacts-info-mstr	&
> 				alias f028-doc-home     &
>   link 	" " 	,					&
> 	doc-nbr	,					&
*E* Need to know which file contains DOC-NBR.
> 	"D"	,					&
>   	"O"						&
>     to filler	,					&
> 	doc-nbr	,					&
> 	contacts-type,					&
> 	contacts-location of f028-contacts-info-mstr 	&
> 				alias f028-doc-office     &
>     link doc-nbr					&
>     to   doc-nbr of f020-doctor-extra opt
*E* Need to know which file contains DOC-NBR.
> 
> 
> ;DOCTOR
> ; 2006/04/10 - MC
> ;def x-doc-home-email char*30						&
> def x-doc-home-email char*50						&
> ; 2006/04/10 -end
>    = email-doctor1 							&
> 	 if    not matchpattern(downshift(email-doctor1),"@master.ca@") &
*E* Can't find character item named EMAIL-DOCTOR1.
*E* Can't find character item named EMAIL-DOCTOR1.
> 	   and not matchpattern(downshift(email-doctor1),"@hhsc.ca@") 	&
*E* Can't find character item named EMAIL-DOCTOR1.
> 	   and not matchpattern(downshift(email-doctor1),"@stjosham.on.ca@")&
*E* Can't find character item named EMAIL-DOCTOR1.
>  else " "
> 
> ; 2006/04/10 - MC
> ;def x-doc-office-email char*30					&
> def x-doc-office-email char*50					&
> ; 2006/04/10 -end
>    = email-doctor1 						&
> 	 if        matchpattern(downshift(email-doctor1),"@master.ca@") 	&
*E* Can't find character item named EMAIL-DOCTOR1.
*E* Can't find character item named EMAIL-DOCTOR1.
> 	    or     matchpattern(downshift(email-doctor1),"@hhsc.ca@") 	&
*E* Can't find character item named EMAIL-DOCTOR1.
> 	    or     matchpattern(downshift(email-doctor1),"@stjosham.on.ca@")	&
*E* Can't find character item named EMAIL-DOCTOR1.
>  else " "
> 
> def x-doc-office-newsletter-flag char*1				&
>    = "E" if     (news-by-mail = "E" or news-by-mail = "e")	&
*E* Can't find item named NEWS-BY-MAIL.
*E* Can't find item named NEWS-BY-MAIL.
> 	    and  x-doc-office-email <> " "			&
> else "H" if     news-by-mail = "H" or news-by-mail = "h"	&
*E* Can't find item named NEWS-BY-MAIL.
*E* Can't find item named NEWS-BY-MAIL.
> else " "
> def x-doc-home-newsletter-flag char*1	&
>    = "E" if     (news-by-mail = "E" or news-by-mail = "e")	&
*E* Can't find item named NEWS-BY-MAIL.
*E* Can't find item named NEWS-BY-MAIL.
> 	    and x-doc-office-newsletter-flag = " "		&
> else "H" if     (news-by-mail = "H" or news-by-mail = "h")	&
*E* Can't find item named NEWS-BY-MAIL.
*E* Can't find item named NEWS-BY-MAIL.
> 	    and x-doc-office-newsletter-flag = " "		&
> else " "
> 
> def x-doc-paper char*1		&
>    = "Y" if paper <> " "	&
*E* Can't find item named PAPER.
> else " "
> def x-doc-diskette char*1	&
>    = "Y" if diskette <> " "	&
*E* Can't find item named DISKETTE.
> else " "
> def x-doc-web-test char*1	&
>    = "Y" if web <> " "		&
*E* Can't find item named WEB.
> else " "
> def x-doc-web-live char*1	&
>    = "Y" if web <> " "		&
*E* Can't find item named WEB.
> else " "
> def x-doc-rev-only char*1	&
>    = "Y" if rev-web <> " "	&
*E* Can't find item named REV-WEB.
> else " "
> 
> def x-chair char*1			&
>    = "Y" if chair = "Y" or chair = "y"	&
*E* Can't find item named CHAIR.
*E* Can't find item named CHAIR.
> else " "
> def x-abe char*1			&
>    = "Y" if abe = "Y" or abe = "y"	&
*E* Can't find item named ABE.
*E* Can't find item named ABE.
> else " "
> def x-med-prof char*1					&
>    = "Y" if matchpattern(email-doctor1,"@PROF@")  	&
*E* Can't find character item named EMAIL-DOCTOR1.
> else " "
> 
> def x-oma-nbr char*9						&
>    = oma-nbr[1:3] + oma-nbr[5:4] + oma-nbr[10:2]		&
> 		if oma-nbr[4:1] = "-" and oma-nbr[9:1] = "-"	&
> else								&
>      oma-nbr[1:3] + oma-nbr[5:4]				&
> 		if oma-nbr[4:1] = "-"				&
> else oma-nbr
> 
> def x-phone-nbr zoned*10					&
>    = nconvert(  doctor-phone-nbr[1:3] 				&
*E* Can't find character item named DOCTOR-PHONE-NBR.
> 	      + doctor-phone-nbr[5:3]				&
*E* Can't find character item named DOCTOR-PHONE-NBR.
> 	      + doctor-phone-nbr[9:4]				&
*E* Can't find character item named DOCTOR-PHONE-NBR.
> 	     )							&
> 		if     doctor-phone-nbr[4:1] = "-" 		&
*E* Can't find item named DOCTOR-PHONE-NBR.
> 		   and doctor-phone-nbr[8:1] = "-"		&
*E* Can't find item named DOCTOR-PHONE-NBR.
> else 0
> 
> def x-pager-nbr zoned*10					&
>    = nconvert(  pager-nbr[1:3] 				&
*E* Can't find character item named PAGER-NBR.
> 	      + pager-nbr[5:3]				&
*E* Can't find character item named PAGER-NBR.
> 	      + pager-nbr[9:4]				&
*E* Can't find character item named PAGER-NBR.
> 	     )							&
> 		if     pager-nbr[4:1] = "-" 		&
*E* Can't find item named PAGER-NBR.
> 		   and pager-nbr[8:1] = "-"		&
*E* Can't find item named PAGER-NBR.
> else nconvert(pager-nbr[1:4])				&
*E* Can't find character item named PAGER-NBR.
> 		if    pager-nbr[1:1] <> " "		&
*E* Can't find item named PAGER-NBR.
> 		  and pager-nbr[5:1] = " "		&
*E* Can't find item named PAGER-NBR.
> else 0
> 
> def x-fax-nbr zoned*10					&
>    = nconvert(  fax-nbr[1:3] 				&
*E* Can't find character item named FAX-NBR.
> 	      + fax-nbr[5:3]				&
*E* Can't find character item named FAX-NBR.
> 	      + fax-nbr[9:4]				&
*E* Can't find character item named FAX-NBR.
> 	     )							&
> 		if     fax-nbr[4:1] = "-" 		&
*E* Can't find item named FAX-NBR.
> 		   and fax-nbr[8:1] = "-"		&
*E* Can't find item named FAX-NBR.
> else nconvert(fax-nbr[1:4])				&
*E* Can't find character item named FAX-NBR.
> 		if    fax-nbr[1:1] <> " "		&
*E* Can't find item named FAX-NBR.
> 		  and fax-nbr[5:1] = " "		&
*E* Can't find item named FAX-NBR.
> else 0
> 
> ;TODO - get cell from fax field
> 
> output f020-doctor-extra                         update
>   item billing-via-paper-flag		final x-doc-paper
>   item billing-via-diskette-flag	final x-doc-diskette
>   item billing-via-web-test-flag	final x-doc-web-test
>   item billing-via-web-live-flag 	final x-doc-web-live
>   item web-user-revenue-only-flag	final x-doc-rev-only
> ;  date-start-diskette
> ;  date-start-paper
> ;  date-start-web-live
> ;  date-start-web-test
>   item leave-description           	final rl-loa-mat of wb
*E* Can't find the file for item named RL-LOA-MAT OF WB.
> 
> ;  item leave-date-start   		final
> ;  item leave-date-end                	final
> ;  item manager-flag                  	final "?"
> 
>   item doc-med-prof-corp		final x-med-prof
>   item chair-flag                     	final x-chair
>   item abe-user-flag                  	final x-abe
>   item cpso-nbr                       	final cpso-nbr of wb
*E* Can't find the file for item named CPSO-NBR OF WB.
>   item cmpa-nbr                    	final cmpa-nbr of wb
*E* Can't find the file for item named CMPA-NBR OF WB.
>   item oma-nbr                        	final x-oma-nbr
>   item cfpc-nbr                       	final cfpc-nbr of wb
*E* Can't find the file for item named CFPC-NBR OF WB.
>   item rcpsc-nbr                      	final rcpsc-nbr of wb
*E* Can't find the file for item named RCPSC-NBR OF WB.
>   item doc-med-prof-corp              	final " "
>   item mcmaster-employee-id 		final 0
> 
> ; DOCTOR
> output f027-contacts-mstr   update
Access F027-CONTACTS-MSTR viaindex CONTACTS-KEY.
Access via FILLER using FILLER OF F027-DOC.
Access via DOC-NBR using DOC-NBR OF F027-DOC.
Access via CONTACTS-TYPE using CONTACTS-TYPE OF F027-DOC.
> ;  item filler			final	" "
> ;  item doc-nbr			final	doc-nbr of f020-doctor-mstr
> ;  item contacts-type		final	"D"
> ;  item contacts-surname		final 	doc-name
>   item contacts-given-names	final   given-name  of wb
*E* Can't find the file for item named GIVEN-NAME OF WB.
>   item contacts-inits      	final   init	of wb
*E* Can't find the file for item named INIT OF WB.
>   item contacts-title		final 	"Dr."
>   item CONTACTS-SEX        	final   gender of wb
*E* Can't find the file for item named GENDER OF WB.
>   item billing-entry-flag   	final   " "
>   item logon-username  		final   " "
> 
> output f028-doc-home         update
> ;  item filler			final	" "
> ;  item doc-nbr			final	doc-nbr of f020-doctor-mstr
> ;  item contacts-type		final	"D"
> ;  item contacts-location	final	"H"
> ;  item contacts-addr-1		final 	doc-addr-home-1
> ;  item contacts-addr-2		final 	doc-addr-home-2
> ;  item contacts-addr-3		final 	doc-addr-home-3
> ;  item postal-code		final	doc-addr-home-pc
>    item contacts-email-addr	final x-doc-home-email
>    item contacts-phone-nbr 	final 0
>    item contacts-phone-ext 	final 0
>    item contacts-pager-nbr 	final 0
>    item contacts-cell-nbr 	final 0
>    item contacts-fax-nbr  	final x-fax-nbr
>    item newsletter-flag 	final x-doc-home-newsletter-flag
> 
> output f028-doc-office  update
> ;  item filler			final	" "
> ;  item doc-nbr			final	doc-nbr of f020-doctor-mstr
> ;  item contacts-type		final	"D"
> ;  item contacts-location	final	"O"
> ;  item contacts-addr-1		final 	doc-addr-office-1
> ;  item contacts-addr-2		final 	doc-addr-office-2
> ;  item contacts-addr-3		final 	doc-addr-office-3
> ;  item postal-code		final	doc-addr-office-pc
>    item contacts-email-addr	final x-doc-office-email
>    item contacts-phone-nbr 	final x-phone-nbr
>    item contacts-phone-ext 	final nconvert(doctor-phone-ext)
*E* Can't find character item named DOCTOR-PHONE-EXT.
>    item contacts-pager-nbr 	final x-pager-nbr
>    item contacts-cell-nbr 	final 0 ;x-cell-nbr
>    item contacts-fax-nbr  	final 0
>    item newsletter-flag 	final x-doc-office-newsletter-flag
> 
Mon Sep 30 14:49:24 EDT 2013
