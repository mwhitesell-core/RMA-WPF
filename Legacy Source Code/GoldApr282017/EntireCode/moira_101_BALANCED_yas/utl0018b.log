/alpha/rmabill/rmabill101/dvlp/moira
Tue Jan  6 13:01:19 EST 2015
 + + + Sourced in /alpha/rmabill/rmabill101/dvlp/moira + + +
;Compiling program [/alpha/rmabill/rmabill101/dvlp/moira/utl0018b.qts]
Q T P   (7.33.E)
Copyright 1996 COGNOS INCORPORATED
Licensed PH-RUNTIME for customer: 5139390001 C.O.T.A UNIX

> ; 2015/Jan/06   M.C.    utl0018b.qts
> ;                       - this program should only be run once a year after yearend
> ;                       - this program should be run after user has entered the first ped for clinic 37, 60 ,22
> ;                         as they are run in monthend 1, 2 & 3 respectively
> 
> cancel clear
> set process nolimit
> set lock record update
> 
> request extract_clinic_22_60_37	on calculation errors report  &
> 				on edit errors report
> 
> access iconst-mstr-rec
> 
> choose iconst-clinic-nbr-1-2 22, 60, 37
*W* Item (ICONST-CLINIC-NBR-1-2) is stored by the file system as a character 
type.
Choose viaindex ICONST-CLINIC-NBR-1-2.
> 
> subfile ext_clinic22 keep if iconst-clinic-nbr-1-2  = 22 &
> include	iconst-date-period-end-1  of iconst-mstr-rec	,&
> 	iconst-date-period-end-2  of iconst-mstr-rec	,&
> 	iconst-date-period-end-3  of iconst-mstr-rec	,&
> 	iconst-date-period-end-4  of iconst-mstr-rec	,&
> 	iconst-date-period-end-5  of iconst-mstr-rec	,&
> 	iconst-date-period-end-6  of iconst-mstr-rec	,&
> 	iconst-date-period-end-7  of iconst-mstr-rec	,&
> 	iconst-date-period-end-8  of iconst-mstr-rec	,&
> 	iconst-date-period-end-9  of iconst-mstr-rec	,&
> 	iconst-date-period-end-10 of iconst-mstr-rec	,&
> 	iconst-date-period-end-11 of iconst-mstr-rec	,&
> 	iconst-date-period-end-12 of iconst-mstr-rec	,&
> 	iconst-date-period-end-13 of iconst-mstr-rec	,&
> 	iconst-monthend           of iconst-mstr-rec    ,&
>         iconst-date-period-end    of iconst-mstr-rec    ,&
>         iconst-ped-number-within-fiscal-year of iconst-mstr-rec
> 
> subfile ext_clinic37 keep if iconst-clinic-nbr-1-2  = 37 &
> include	iconst-date-period-end-1  of iconst-mstr-rec	,&
> 	iconst-date-period-end-2  of iconst-mstr-rec	,&
> 	iconst-date-period-end-3  of iconst-mstr-rec	,&
> 	iconst-date-period-end-4  of iconst-mstr-rec	,&
> 	iconst-date-period-end-5  of iconst-mstr-rec	,&
> 	iconst-date-period-end-6  of iconst-mstr-rec	,&
> 	iconst-date-period-end-7  of iconst-mstr-rec	,&
> 	iconst-date-period-end-8  of iconst-mstr-rec	,&
> 	iconst-date-period-end-9  of iconst-mstr-rec	,&
> 	iconst-date-period-end-10 of iconst-mstr-rec	,&
> 	iconst-date-period-end-11 of iconst-mstr-rec	,&
> 	iconst-date-period-end-12 of iconst-mstr-rec	,&
> 	iconst-date-period-end-13 of iconst-mstr-rec	,&
> 	iconst-monthend           of iconst-mstr-rec    ,&
>         iconst-date-period-end    of iconst-mstr-rec    ,&
>         iconst-ped-number-within-fiscal-year of iconst-mstr-rec
> 
> subfile ext_clinic60 keep if iconst-clinic-nbr-1-2  = 60 &
> include	iconst-date-period-end-1  of iconst-mstr-rec	,&
> 	iconst-date-period-end-2  of iconst-mstr-rec	,&
> 	iconst-date-period-end-3  of iconst-mstr-rec	,&
> 	iconst-date-period-end-4  of iconst-mstr-rec	,&
> 	iconst-date-period-end-5  of iconst-mstr-rec	,&
> 	iconst-date-period-end-6  of iconst-mstr-rec	,&
> 	iconst-date-period-end-7  of iconst-mstr-rec	,&
> 	iconst-date-period-end-8  of iconst-mstr-rec	,&
> 	iconst-date-period-end-9  of iconst-mstr-rec	,&
> 	iconst-date-period-end-10 of iconst-mstr-rec	,&
> 	iconst-date-period-end-11 of iconst-mstr-rec	,&
> 	iconst-date-period-end-12 of iconst-mstr-rec	,&
> 	iconst-date-period-end-13 of iconst-mstr-rec    ,&
> 	iconst-monthend           of iconst-mstr-rec    ,&
>         iconst-date-period-end    of iconst-mstr-rec    ,&
>         iconst-ped-number-within-fiscal-year of iconst-mstr-rec
> 
> request update_monthend_1_clinics on calculation errors report  &
> 				  on edit errors report
> 
> access iconst-mstr-rec link to record 0 of *ext_clinic37
> 
> choose iconst-clinic-nbr-1-2 22 to 99
*W* Item (ICONST-CLINIC-NBR-1-2) is stored by the file system as a character 
type.
Choose viaindex ICONST-CLINIC-NBR-1-2.
> 
> sel if iconst-monthend of iconst-mstr-rec		&
>      = iconst-monthend of ext_clinic37
> 
> ; According to Yasemin, all clinics belong to first monthend do not have PED for July
> output iconst-mstr-rec update on errors report
>    item iconst-date-period-end   = iconst-date-period-end    of ext_clinic37
>    item iconst-ped-number-within-fiscal-year = iconst-ped-number-within-fiscal-year of ext_clinic37 + 1
>    item iconst-date-period-end-1 = iconst-date-period-end-1  of ext_clinic37
>    item iconst-date-period-end-2 = iconst-date-period-end-2  of ext_clinic37
>    item iconst-date-period-end-3 = iconst-date-period-end-3  of ext_clinic37
>    item iconst-date-period-end-4 = iconst-date-period-end-4  of ext_clinic37
>    item iconst-date-period-end-5 = iconst-date-period-end-5  of ext_clinic37
>    item iconst-date-period-end-6 = iconst-date-period-end-6  of ext_clinic37
>    item iconst-date-period-end-7 = iconst-date-period-end-7  of ext_clinic37
>    item iconst-date-period-end-8 = iconst-date-period-end-8  of ext_clinic37
>    item iconst-date-period-end-9 = iconst-date-period-end-9  of ext_clinic37
>    item iconst-date-period-end-10= iconst-date-period-end-10 of ext_clinic37
>    item iconst-date-period-end-11= iconst-date-period-end-11 of ext_clinic37
>    item iconst-date-period-end-12= iconst-date-period-end-12 of ext_clinic37
>    item iconst-date-period-end-13= iconst-date-period-end-13 of ext_clinic37
> 
> request update_monthend_2_clinics on calculation errors report  &
> 				  on edit errors report
> 
> access iconst-mstr-rec link to record 0 of *ext_clinic60
> 
> choose iconst-clinic-nbr-1-2 22 to 99
*W* Item (ICONST-CLINIC-NBR-1-2) is stored by the file system as a character 
type.
Choose viaindex ICONST-CLINIC-NBR-1-2.
> 
> sel if iconst-monthend of iconst-mstr-rec		&
>      = iconst-monthend of ext_clinic60
> 
> output iconst-mstr-rec update on errors report
>    item iconst-date-period-end   = iconst-date-period-end    of ext_clinic60
>    item iconst-ped-number-within-fiscal-year = iconst-ped-number-within-fiscal-year of ext_clinic60
>    item iconst-date-period-end-1 = iconst-date-period-end-1  of ext_clinic60
>    item iconst-date-period-end-2 = iconst-date-period-end-2  of ext_clinic60
>    item iconst-date-period-end-3 = iconst-date-period-end-3  of ext_clinic60
>    item iconst-date-period-end-4 = iconst-date-period-end-4  of ext_clinic60
>    item iconst-date-period-end-5 = iconst-date-period-end-5  of ext_clinic60
>    item iconst-date-period-end-6 = iconst-date-period-end-6  of ext_clinic60
>    item iconst-date-period-end-7 = iconst-date-period-end-7  of ext_clinic60
>    item iconst-date-period-end-8 = iconst-date-period-end-8  of ext_clinic60
>    item iconst-date-period-end-9 = iconst-date-period-end-9  of ext_clinic60
>    item iconst-date-period-end-10= iconst-date-period-end-10 of ext_clinic60
>    item iconst-date-period-end-11= iconst-date-period-end-11 of ext_clinic60
>    item iconst-date-period-end-12= iconst-date-period-end-12 of ext_clinic60
>    item iconst-date-period-end-13= iconst-date-period-end-13 of ext_clinic60
> 
> request update_monthend_3_clinics on calculation errors report  &
> 				  on edit errors report
> 
> access iconst-mstr-rec link to record 0 of *ext_clinic22
> 
> choose iconst-clinic-nbr-1-2 22 to 99
*W* Item (ICONST-CLINIC-NBR-1-2) is stored by the file system as a character 
type.
Choose viaindex ICONST-CLINIC-NBR-1-2.
> 
> sel if iconst-monthend of iconst-mstr-rec		&
>      = iconst-monthend of ext_clinic22
> 
> output iconst-mstr-rec update on errors report
>    item iconst-date-period-end   = iconst-date-period-end    of ext_clinic22
>    item iconst-ped-number-within-fiscal-year = iconst-ped-number-within-fiscal-year of ext_clinic22
>    item iconst-date-period-end-1 = iconst-date-period-end-1  of ext_clinic22
>    item iconst-date-period-end-2 = iconst-date-period-end-2  of ext_clinic22
>    item iconst-date-period-end-3 = iconst-date-period-end-3  of ext_clinic22
>    item iconst-date-period-end-4 = iconst-date-period-end-4  of ext_clinic22
>    item iconst-date-period-end-5 = iconst-date-period-end-5  of ext_clinic22
>    item iconst-date-period-end-6 = iconst-date-period-end-6  of ext_clinic22
>    item iconst-date-period-end-7 = iconst-date-period-end-7  of ext_clinic22
>    item iconst-date-period-end-8 = iconst-date-period-end-8  of ext_clinic22
>    item iconst-date-period-end-9 = iconst-date-period-end-9  of ext_clinic22
>    item iconst-date-period-end-10= iconst-date-period-end-10 of ext_clinic22
>    item iconst-date-period-end-11= iconst-date-period-end-11 of ext_clinic22
>    item iconst-date-period-end-12= iconst-date-period-end-12 of ext_clinic22
>    item iconst-date-period-end-13= iconst-date-period-end-13 of ext_clinic22
> 
> build $obj/utl0018b
0 ERRORS  4 WARNINGS.
Tue Jan  6 13:01:20 EST 2015
