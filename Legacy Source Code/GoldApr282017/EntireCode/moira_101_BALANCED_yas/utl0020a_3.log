/alpha/rmabill/rmabill101/dvlp/moira
Tue Aug 23 11:46:25 EDT 2016
 + + + Sourced in /alpha/rmabill/rmabill101/dvlp/moira + + +
;Compiling program [/alpha/rmabill/rmabill101/dvlp/moira/utl0020a_3.qts]
Q T P   (7.33.E)
Copyright 1996 COGNOS INCORPORATED
Licensed PH-RUNTIME for customer: 5139390001 C.O.T.A UNIX

> ;#> PROGRAM-ID.   utl0020a_3.qts
> ;
> ;	((C)) Dyad Technologies
> ;
> ;    R.M.A. VERSION
> ;
> ;    PROGRAM PURPOSE :
> ;			- PART 3
> ;			- extract data from the payroll system and download to
> ;			  PC for upload into spreadsheet
> ;			- this program updates the generic revenue code in
> ;			  file tmp-pc-download-file
> ;
> ;  MODIFICATION HISTORY
> ;    DATE   WHO   DESCRIPTION
> ; 2007/oct/01 b.e - original
> ; 2008/oct/28 brad1 - added select only rec-type "A" records from f119 as the "C"/"D" hidden records were being
> ;                       included in download and shouldn't  have been
> ; 2009/sep/29 brad2 - added SHIFT
> ; 2009/oct/01 brad3 - added tithe1/2/3
> ; 2009/oct/26 brad4 - added DEPMEM
> ; 2012/Jun/11 brad5 - added PERC
> ; 2013/may/28 brad6 - added MOHD
> ; 2016/Jan/13 MC1   - added MACC, MIBD, MPAP, MSLP, MMDU & MBRT to amt-ytd-rev-32 to 35 and amt-mtd-rev-01 to 02
> ;		      corresponding  Note: amt-mtd-rev-01 to 20 are not used in utl0020* programs; thus they can be used
> ;		      for future use
> ; 2016/Aug/22 MC2   - added 'ADVOUT' to amt-mtd-rev-03; use amt-mtd instead of amt-ytd as others
> 
> can clear
> 
> run download_to_pc_3
> 
> set default
WORKSPACE and STACKSIZE can't be reset within a QTP run.
> set stacksize 15000
*W* SET STACKSIZE statement not allowed within a run.  Statement ignored.
> set verify errors
> set process nolimit
> set lock record update
> 
> ;-------------------------------------------------------------------------------
> 
> ; obtain current costing "constants" and pass to subsequent requests
> ;
> use $use/get_const_rec_7_values_globals.qts
> ; File: globals_get_const_rec_7_values.qts
> 
> ;-------------------------------------------------------------------------------
> ; obtain current costing "constants" and pass to subsequent requests
> ;
> global temp w-current-fiscal-start-yymmdd   date
> global temp w-current-fiscal-end-yymmdd     date
> global temp w-current-costing-cutoff-yymmdd date
> global temp w-current-costing-ped	    date
> global temp w-current-costing-ped-yymm	    zoned*6
> 
> global temp w-previous-fiscal-start-yymmdd  date
> global temp w-previous-fiscal-end-yymmdd    date
> 
> global temp w-ep-yr num*2
> 
> use $use/get_const_rec_7_values.qts
> ; File: get_const_rec_7_values.qts
> 
> ;-------------------------------------------------------------------------------
> ; obtain current costing "constants" and pass to subsequent requests
> ;
> 
> request costing1_get_rec_7              &
>                 on edit        errors report    &
>                 on calculation errors report
> access constants-mstr-rec-7
> choose const-rec-nbr 7
*W* Item (CONST-REC-NBR) is stored by the file system as a character type.
Choose viaindex CONSTANTS-MSTR-REC-7.
> 
> item w-current-fiscal-start-yymmdd   = current-fiscal-start-yymmdd
> item w-current-fiscal-end-yymmdd     = current-fiscal-end-yymmdd
> item w-current-costing-cutoff-yymmdd = current-costing-cutoff-yymmdd
> item w-current-costing-ped	     = current-costing-ped
> item w-current-costing-ped-yymm      = current-costing-ped / 100
> 
> item w-previous-fiscal-start-yymmdd  = previous-fiscal-start-yymmdd
> item w-previous-fiscal-end-yymmdd    = previous-fiscal-end-yymmdd
> item w-ep-yr			     = ep-yr
> 
> ;-------------------------------------------------------------------------------
> request download_doc_1  on edit        errors report &
>                         on calculation errors report
> ;
> ;-------------------------------------------------------------------------------
> 
> access tmp-pc-download-file 				&
>         link doc-ohip-nbr of tmp-pc-download-file,	&
> 	     doc-nbr of tmp-pc-download-file,           &
>    	     "MICF",                                    &
> 	     "A" 					&
>         to   doc-ohip-nbr,				&
> 	     doc-nbr,                                   &
>              comp-code,                                 &
>              rec-type  of f119-doctor-ytd               &
>                         alias f119-micf         optional&
>         link doc-ohip-nbr of tmp-pc-download-file,	&
> 	     doc-nbr of tmp-pc-download-file,           &
>    	     "MICG",                                    &
> 	     "A" 					&
>         to   doc-ohip-nbr,				&
> 	     doc-nbr,                                   &
>              comp-code,                                 &
>              rec-type  of f119-doctor-ytd               &
>                         alias f119-micg         optional&
>         link doc-ohip-nbr of tmp-pc-download-file,	&
> 	     doc-nbr of tmp-pc-download-file,           &
>    	     "MICH",                                    &
> 	     "A" 					&
>         to   doc-ohip-nbr,				&
> 	     doc-nbr,                                   &
>              comp-code,                                 &
>              rec-type  of f119-doctor-ytd               &
>                         alias f119-mich         optional&
>         link doc-ohip-nbr of tmp-pc-download-file,	&
> 	     doc-nbr of tmp-pc-download-file,           &
>    	     "MICI",                                    &
> 	     "A" 					&
>         to   doc-ohip-nbr,				&
> 	     doc-nbr,                                   &
>              comp-code,                                 &
>              rec-type  of f119-doctor-ytd               &
>                         alias f119-mici         optional&
>         link doc-ohip-nbr of tmp-pc-download-file,	&
> 	     doc-nbr of tmp-pc-download-file,           &
>    	     "MICJ",                                    &
> 	     "A" 					&
>         to   doc-ohip-nbr,				&
> 	     doc-nbr,                                   &
>              comp-code,                                 &
>              rec-type  of f119-doctor-ytd               &
>                         alias f119-micj         optional&
>         link doc-ohip-nbr of tmp-pc-download-file,	&
> 	     doc-nbr of tmp-pc-download-file,           &
>    	     "MICK",                                    &
> 	     "A" 					&
>         to   doc-ohip-nbr,				&
> 	     doc-nbr,                                   &
>              comp-code,                                 &
>              rec-type  of f119-doctor-ytd               &
>                         alias f119-mick         optional&
>         link doc-ohip-nbr of tmp-pc-download-file,	&
> 	     doc-nbr of tmp-pc-download-file,           &
>    	     "MICL",                                    &
> 	     "A" 					&
>         to   doc-ohip-nbr,				&
> 	     doc-nbr,                                   &
>              comp-code,                                 &
>              rec-type  of f119-doctor-ytd               &
>                         alias f119-micl         optional&
> ;brad2
>         link doc-ohip-nbr of tmp-pc-download-file,	&
> 	     doc-nbr of tmp-pc-download-file,           &
>    	     "SHIFT",                                   &
> 	     "A" 					&
>         to   doc-ohip-nbr,				&
> 	     doc-nbr,                                   &
>              comp-code,                                 &
>              rec-type  of f119-doctor-ytd               &
>                         alias f119-shift        optional&
> ;brad3
>         link doc-ohip-nbr of tmp-pc-download-file,	&
> 	     doc-nbr of tmp-pc-download-file,           &
>    	     "TITHE1",                                  &
> 	     "A" 					&
>         to   doc-ohip-nbr,				&
> 	     doc-nbr,                                   &
>              comp-code,                                 &
>              rec-type  of f119-doctor-ytd               &
>                         alias f119-tithe1       optional&
>         link doc-ohip-nbr of tmp-pc-download-file,	&
> 	     doc-nbr of tmp-pc-download-file,           &
>    	     "TITHE2",                                  &
> 	     "A" 					&
>         to   doc-ohip-nbr,				&
> 	     doc-nbr,                                   &
>              comp-code,                                 &
>              rec-type  of f119-doctor-ytd               &
>                         alias f119-tithe2       optional&
>         link doc-ohip-nbr of tmp-pc-download-file,	&
> 	     doc-nbr of tmp-pc-download-file,           &
>    	     "TITHE3",                                  &
> 	     "A" 					&
>         to   doc-ohip-nbr,				&
> 	     doc-nbr,                                   &
>              comp-code,                                 &
>              rec-type  of f119-doctor-ytd               &
>                         alias f119-tithe3       optional&
> ;brad4							&
>         link doc-ohip-nbr of tmp-pc-download-file,	&
> 	     doc-nbr of tmp-pc-download-file,           &
>    	     "DEPMEM",                                  &
> 	     "A" 					&
>         to   doc-ohip-nbr,				&
> 	     doc-nbr,                                   &
>              comp-code,                                 &
>              rec-type  of f119-doctor-ytd               &
>                         alias f119-depmem       optional&
> ;brad5							&
>         link doc-ohip-nbr of tmp-pc-download-file,	&
> 	     doc-nbr of tmp-pc-download-file,           &
>    	     "PERC",                                    &
> 	     "A" 					&
>         to   doc-ohip-nbr,				&
> 	     doc-nbr,                                   &
>              comp-code,                                 &
>              rec-type  of f119-doctor-ytd               &
>                         alias f119-perc         optional&
> ;brad6							&
>         link doc-ohip-nbr of tmp-pc-download-file,	&
> 	     doc-nbr of tmp-pc-download-file,           &
>    	     "MOHD",                                    &
> 	     "A" 					&
>         to   doc-ohip-nbr,				&
> 	     doc-nbr,                                   &
>              comp-code,                                 &
>              rec-type  of f119-doctor-ytd               &
>                         alias f119-mohd        optional &
> ;;MC2
>          link doc-ohip-nbr of tmp-pc-download-file,	&
>  	      doc-nbr of tmp-pc-download-file,          &
>     	      "ADVOUT",                                 &
>  	      "A" 					&
>          to   doc-ohip-nbr,				&
>   	      doc-nbr,                                  &
>               comp-code,                                &
>               rec-type  of f119-doctor-ytd              &
>                         alias f119-advout      optional &
> ;;MC2 - end
> ;;MC1
>          link doc-ohip-nbr of tmp-pc-download-file,	&
>  	      doc-nbr of tmp-pc-download-file,          &
>     	      "MACC",                                   &
>  	      "A" 					&
>          to   doc-ohip-nbr,				&
>   	      doc-nbr,                                  &
>               comp-code,                                &
>               rec-type  of f119-doctor-ytd              &
>                         alias f119-macc        optional &
>          link doc-ohip-nbr of tmp-pc-download-file,	&
>  	      doc-nbr of tmp-pc-download-file,          &
>     	      "MIBD",                                   &
>  	      "A" 					&
>          to   doc-ohip-nbr,				&
>  	      doc-nbr,                                  &
>               comp-code,                                &
>               rec-type  of f119-doctor-ytd              &
>                          alias f119-mibd       optional &
>          link doc-ohip-nbr of tmp-pc-download-file,	&
>  	      doc-nbr of tmp-pc-download-file,          &
>     	      "MPAP",                                   &
>  	      "A" 					&
>          to   doc-ohip-nbr,				&
>  	      doc-nbr,                                  &
>               comp-code,                                &
>               rec-type  of f119-doctor-ytd              &
>                         alias f119-mpap        optional &
>          link doc-ohip-nbr of tmp-pc-download-file,	&
>  	      doc-nbr of tmp-pc-download-file,          &
>     	      "MSLP",                                   &
>  	      "A" 					&
>          to   doc-ohip-nbr,				&
>  	      doc-nbr,                                  &
>               comp-code,                                &
>               rec-type  of f119-doctor-ytd              &
>                          alias f119-mslp       optional &
>          link doc-ohip-nbr of tmp-pc-download-file,	&
>  	      doc-nbr of tmp-pc-download-file,          &
>     	      "MMDU",                                   &
>  	      "A" 					&
>          to   doc-ohip-nbr,				&
>  	      doc-nbr,                                  &
>               comp-code,                                &
>               rec-type  of f119-doctor-ytd              &
>                         alias f119-mmdu        optional &
>          link doc-ohip-nbr of tmp-pc-download-file,	&
>  	      doc-nbr of tmp-pc-download-file,          &
>     	      "MBRT",                                   &
>  	      "A" 					&
>          to   doc-ohip-nbr,				&
>  	      doc-nbr,                                  &
>               comp-code,                                &
>               rec-type  of f119-doctor-ytd              &
>                          alias f119-mbrt       optional
> ;;MC1 - end
> 
> output tmp-pc-download-file alias tmp-pc-download-file-update update
Access TMP-PC-DOWNLOAD-FILE-UPDATE viaindex DOC-NBR.
Access via DOC-NBR using DOC-NBR OF TMP-PC-DOWNLOAD-FILE.
>         item amt-ytd-rev-22 final       amt-ytd of f119-micf
>         item amt-ytd-rev-23 final       amt-ytd of f119-micg
>         item amt-ytd-rev-24 final       amt-ytd of f119-mich
>         item amt-ytd-rev-25 final       amt-ytd of f119-mici
>         item amt-ytd-rev-26 final       amt-ytd of f119-micj
>         item amt-ytd-rev-27 final       amt-ytd of f119-mick
>         item amt-ytd-rev-28 final       amt-ytd of f119-micl
> ;brad2
>         item amt-ytd-rev-29 final       amt-ytd of f119-shift
> ;brad5
>         item amt-ytd-rev-30 final       amt-ytd of f119-perc
> 
> ;brad6
>         item amt-ytd-rev-31 final       amt-ytd of f119-mohd
> ;MC1
>     	item amt-ytd-rev-32 final       amt-ytd of f119-macc
>         item amt-ytd-rev-33 final       amt-ytd of f119-mibd
>         item amt-ytd-rev-34 final       amt-ytd of f119-mpap
>         item amt-ytd-rev-35 final       amt-ytd of f119-mslp
> ; future - no more variable left past rev-35 - reuse amt-mtd-rev-01 to 20
>         item amt-mtd-rev-01 final       amt-ytd of f119-mmdu
>         item amt-mtd-rev-02 final       amt-ytd of f119-mbrt
> ; MC1 - end
> 
> ; MC2
>         item amt-mtd-rev-03 final       amt-mtd of f119-advout
> ; MC2 - end
> 
>         item amt-ytd-exp-01 final       amt-ytd of f119-tithe1
>         item amt-ytd-exp-02 final       amt-ytd of f119-tithe2
>         item amt-ytd-exp-03 final       amt-ytd of f119-tithe3
>         item amt-ytd-exp-04 final       amt-ytd of f119-depmem
> ;future
> ;        item amt-ytd-exp-05 final       amt-ytd of f119-
> ;        item amt-ytd-exp-06 final       amt-ytd of f119-
> ;        item amt-ytd-exp-07 final       amt-ytd of f119-
> ;        item amt-ytd-exp-08 final       amt-ytd of f119-
> ;        item amt-ytd-exp-09 final       amt-ytd of f119- ....
> 
> build $obj/utl0020a_3
0 ERRORS  2 WARNINGS.
The file /alpha/rmabill/rmabill101/obj/utl0020a_3.qtc already exists. Ok to 
delete?
Tue Aug 23 11:46:28 EDT 2016
