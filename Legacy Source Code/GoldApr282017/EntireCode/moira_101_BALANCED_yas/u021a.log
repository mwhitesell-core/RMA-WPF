/alpha/rmabill/rmabill101/dvlp/moira
Tue Jun 18 17:10:35 EDT 2013
 + + + Sourced in /alpha/rmabill/rmabill101/dvlp/moira + + +
;Compiling program [/alpha/rmabill/rmabill101/dvlp/moira/u021a.qts]
Q T P   (7.33.E)
Copyright 1996 COGNOS INCORPORATED
Licensed PH-RUNTIME for customer: 5139390001 C.O.T.A UNIX

> ;#> PROGRAM-ID.     u021a.qts
> ;
> ;	((C)) Dyad Technologies
> ;
> ;
> ;    PROGRAM PURPOSE :  this is the prepass before generating r021b report
> ;
> ;    MODIFICATION HISTORY
> ;    DATE   WHO         DESCRIPTION
> ; 03/dec/02 M.C.        - original
> ; 06/sep/07 M.C. 	- add more defined item to determine the type of errors
> ; 10/mar/04 MC1		- define V09 as a referring doctor reject error (like ERF and AC4)
> ; 13/Jun/18 MC2		- define ARF as a referring doctor reject error (like ERF and AC4)
> 
> can clear
> set default
> set process nolimit
> set lock record update
> 
> request determine_type_of_errors   		&
>                 on edit        errors report	&
>                 on calculation errors report
> 
> access u021a-edt-1ht-file                               &
>   	link rat-rmb-error-h-cd-1			&
>     	to   ohip-err-code of f093-ohip-error-msg-mstr  &
> 		alias f093-hdr-1 opt 			&
>   	link rat-rmb-error-h-cd-2			&
>     	to   ohip-err-code of f093-ohip-error-msg-mstr  &
> 		alias f093-hdr-2 opt 			&
>   	link rat-rmb-error-h-cd-3			&
>     	to   ohip-err-code of f093-ohip-error-msg-mstr  &
> 		alias f093-hdr-3 opt 			&
>   	link rat-rmb-error-h-cd-4			&
>     	to   ohip-err-code of f093-ohip-error-msg-mstr  &
> 		alias f093-hdr-4 opt 			&
>   	link rat-rmb-error-h-cd-5			&
>     	to   ohip-err-code of f093-ohip-error-msg-mstr  &
> 		alias f093-hdr-5 opt 			&
>   	link rat-rmb-error-t-cd-1			&
>     	to   ohip-err-code of f093-ohip-error-msg-mstr  &
> 		alias f093-dtl-1 opt 			&
>   	link rat-rmb-error-t-cd-2			&
>     	to   ohip-err-code of f093-ohip-error-msg-mstr  &
> 		alias f093-dtl-2 opt 			&
>   	link rat-rmb-error-t-cd-3			&
>     	to   ohip-err-code of f093-ohip-error-msg-mstr  &
> 		alias f093-dtl-3 opt 			&
>   	link rat-rmb-error-t-cd-4			&
>     	to   ohip-err-code of f093-ohip-error-msg-mstr  &
> 		alias f093-dtl-4 opt 			&
>   	link rat-rmb-error-t-cd-5			&
>     	to   ohip-err-code of f093-ohip-error-msg-mstr  &
> 		alias f093-dtl-5 opt
> 
> sorted	on rat-rmb-account-nbr
> 
> ; 2006/09/07 - MC
> ; (find referring  error in header/dtl records)
> def  x-ohip-err-ref-serv-ss                                     &
>         =  1    if     rat-rmb-error-h-cd-1 = "EQ6"             &
> 		   or  rat-rmb-error-h-cd-2 = "EQ6"		&
>                    or  rat-rmb-error-h-cd-3 = "EQ6"             &
>                    or  rat-rmb-error-h-cd-4 = "EQ6"             &
>                    or  rat-rmb-error-h-cd-5 = "EQ6"             &
>                    or  rat-rmb-error-t-cd-1 = "EQ6"             &
> 		   or  rat-rmb-error-t-cd-2 = "EQ6"		&
>                    or  rat-rmb-error-t-cd-3 = "EQ6"             &
>                    or  rat-rmb-error-t-cd-4 = "EQ6"             &
>                    or  rat-rmb-error-t-cd-5 = "EQ6"             &
>                    or  rat-rmb-error-h-cd-1 = "AC4"             &
> 		   or  rat-rmb-error-h-cd-2 = "AC4"		&
>                    or  rat-rmb-error-h-cd-3 = "AC4"             &
>                    or  rat-rmb-error-h-cd-4 = "AC4"             &
>                    or  rat-rmb-error-h-cd-5 = "AC4"             &
>                    or  rat-rmb-error-t-cd-1 = "AC4"             &
> 		   or  rat-rmb-error-t-cd-2 = "AC4"		&
>                    or  rat-rmb-error-t-cd-3 = "AC4"             &
>                    or  rat-rmb-error-t-cd-4 = "AC4"             &
>                    or  rat-rmb-error-t-cd-5 = "AC4"             &
>                    or  rat-rmb-error-h-cd-1 = "ERF"             &
> 		   or  rat-rmb-error-h-cd-2 = "ERF"		&
>                    or  rat-rmb-error-h-cd-3 = "ERF"             &
>                    or  rat-rmb-error-h-cd-4 = "ERF"             &
>                    or  rat-rmb-error-h-cd-5 = "ERF"             &
>                    or  rat-rmb-error-t-cd-1 = "ERF"             &
> 		   or  rat-rmb-error-t-cd-2 = "ERF"		&
>                    or  rat-rmb-error-t-cd-3 = "ERF"             &
>                    or  rat-rmb-error-t-cd-4 = "ERF"             &
>                    or  rat-rmb-error-t-cd-5 = "ERF"             &
> ; 2010/03/04 - MC1 - include V09
>                    or  rat-rmb-error-h-cd-1 = "V09"             &
> 		   or  rat-rmb-error-h-cd-2 = "V09"		&
>                    or  rat-rmb-error-h-cd-3 = "V09"             &
>                    or  rat-rmb-error-h-cd-4 = "V09"             &
>                    or  rat-rmb-error-h-cd-5 = "V09"             &
>                    or  rat-rmb-error-t-cd-1 = "V09"             &
> 		   or  rat-rmb-error-t-cd-2 = "V09"		&
>                    or  rat-rmb-error-t-cd-3 = "V09"             &
>                    or  rat-rmb-error-t-cd-4 = "V09"             &
>                    or  rat-rmb-error-t-cd-5 = "V09"             &
> ; 2010/03/04 - end
> ; 2013/06/18 - MC2 - include ARF
>                    or  rat-rmb-error-h-cd-1 = "ARF"             &
> 		   or  rat-rmb-error-h-cd-2 = "ARF"		&
>                    or  rat-rmb-error-h-cd-3 = "ARF"             &
>                    or  rat-rmb-error-h-cd-4 = "ARF"             &
>                    or  rat-rmb-error-h-cd-5 = "ARF"             &
>                    or  rat-rmb-error-t-cd-1 = "ARF"             &
> 		   or  rat-rmb-error-t-cd-2 = "ARF"		&
>                    or  rat-rmb-error-t-cd-3 = "ARF"             &
>                    or  rat-rmb-error-t-cd-4 = "ARF"             &
>                    or  rat-rmb-error-t-cd-5 = "ARF"             &
> ; 2013/06/18 - end
>      else  0
> 
> ; (find in non-referring  error in header/dtl records)
> def  x-ohip-err-non-ref-serv-ss                                    &
>         =   1    if     rat-rmb-error-h-cd-1 <> "EQ6"             &
> 		   and  rat-rmb-error-h-cd-2 <> "EQ6"		   &
>                    and  rat-rmb-error-h-cd-3 <> "EQ6"             &
>                    and  rat-rmb-error-h-cd-4 <> "EQ6"             &
>                    and  rat-rmb-error-h-cd-5 <> "EQ6"             &
>                    and  rat-rmb-error-t-cd-1 <> "EQ6"             &
> 		   and  rat-rmb-error-t-cd-2 <> "EQ6"		   &
>                    and  rat-rmb-error-t-cd-3 <> "EQ6"             &
>                    and  rat-rmb-error-t-cd-4 <> "EQ6"             &
>                    and  rat-rmb-error-t-cd-5 <> "EQ6"             &
>                    and  rat-rmb-error-h-cd-1 <> "AC4"             &
> 		   and  rat-rmb-error-h-cd-2 <> "AC4"		   &
>                    and  rat-rmb-error-h-cd-3 <> "AC4"             &
>                    and  rat-rmb-error-h-cd-4 <> "AC4"             &
>                    and  rat-rmb-error-h-cd-5 <> "AC4"             &
>                    and  rat-rmb-error-t-cd-1 <> "AC4"             &
> 		   and  rat-rmb-error-t-cd-2 <> "AC4"		   &
>                    and  rat-rmb-error-t-cd-3 <> "AC4"             &
>                    and  rat-rmb-error-t-cd-4 <> "AC4"             &
>                    and  rat-rmb-error-t-cd-5 <> "AC4"             &
>                    and  rat-rmb-error-h-cd-1 <> "ERF"             &
> 		   and  rat-rmb-error-h-cd-2 <> "ERF"		   &
>                    and  rat-rmb-error-h-cd-3 <> "ERF"             &
>                    and  rat-rmb-error-h-cd-4 <> "ERF"             &
>                    and  rat-rmb-error-h-cd-5 <> "ERF"             &
>                    and  rat-rmb-error-t-cd-1 <> "ERF"             &
> 		   and  rat-rmb-error-t-cd-2 <> "ERF"		   &
>                    and  rat-rmb-error-t-cd-3 <> "ERF"             &
>                    and  rat-rmb-error-t-cd-4 <> "ERF"             &
>                    and  rat-rmb-error-t-cd-5 <> "ERF"             &
> ; 2010/03/04 - MC1 - exclude V09
>                    and  rat-rmb-error-h-cd-1 <> "V09"             &
> 		   and  rat-rmb-error-h-cd-2 <> "V09"		   &
>                    and  rat-rmb-error-h-cd-3 <> "V09"             &
>                    and  rat-rmb-error-h-cd-4 <> "V09"             &
>                    and  rat-rmb-error-h-cd-5 <> "V09"             &
>                    and  rat-rmb-error-t-cd-1 <> "V09"             &
> 		   and  rat-rmb-error-t-cd-2 <> "V09"		   &
>                    and  rat-rmb-error-t-cd-3 <> "V09"             &
>                    and  rat-rmb-error-t-cd-4 <> "V09"             &
>                    and  rat-rmb-error-t-cd-5 <> "V09"             &
> ; 2010/03/04 - end
> ; 2013/06/18 - MC2 - exclude ARF
>                    and  rat-rmb-error-h-cd-1 <> "ARF"             &
> 		   and  rat-rmb-error-h-cd-2 <> "ARF"		   &
>                    and  rat-rmb-error-h-cd-3 <> "ARF"             &
>                    and  rat-rmb-error-h-cd-4 <> "ARF"             &
>                    and  rat-rmb-error-h-cd-5 <> "ARF"             &
>                    and  rat-rmb-error-t-cd-1 <> "ARF"             &
> 		   and  rat-rmb-error-t-cd-2 <> "ARF"		   &
>                    and  rat-rmb-error-t-cd-3 <> "ARF"             &
>                    and  rat-rmb-error-t-cd-4 <> "ARF"             &
>                    and  rat-rmb-error-t-cd-5 <> "ARF"             &
> ; 2013/06/18 - end
>                    and  rat-rmb-error-h-cd-1 <> " "             &
> 		   and  rat-rmb-error-h-cd-2 <> " "		   &
>                    and  rat-rmb-error-h-cd-3 <> " "             &
>                    and  rat-rmb-error-h-cd-4 <> " "             &
>                    and  rat-rmb-error-h-cd-5 <> " "             &
>                    and  rat-rmb-error-t-cd-1 <> " "             &
> 		   and  rat-rmb-error-t-cd-2 <> " "		   &
>                    and  rat-rmb-error-t-cd-3 <> " "             &
>                    and  rat-rmb-error-t-cd-4 <> " "             &
>                    and  rat-rmb-error-t-cd-5 <> " "             &
>      else  0
> ; 2006/09/07 -end
> 
> 
> ; (find "S"ervice error in header record)
> def  x-ohip-err-hdr-serv-ss					&
>         =  1	if     rat-rmb-error-h-cd-1 <> " "		&
> 		   and ohip-err-cat-code of f093-hdr-1 = "S" 	&
>      else  2	if     rat-rmb-error-h-cd-2 <> " "		&
> 		   and ohip-err-cat-code of f093-hdr-2 = "S" 	&
>      else  3	if     rat-rmb-error-h-cd-3 <> " "		&
> 		   and ohip-err-cat-code of f093-hdr-3 = "S" 	&
>      else  4	if     rat-rmb-error-h-cd-4 <> " "		&
> 		   and ohip-err-cat-code of f093-hdr-4 = "S" 	&
>      else  5 	if     rat-rmb-error-h-cd-5 <> " "		&
> 		   and ohip-err-cat-code of f093-hdr-5 = "S"	&
>      else  0
> 
> ; (find "S"ervice error in detail records)
> def  x-ohip-err-dtl-serv-ss					&
>         =  1 	if     rat-rmb-error-t-cd-1 <> " "		&
> 		   and ohip-err-cat-code of f093-dtl-1 = "S" 	&
>      else  2	if     rat-rmb-error-t-cd-2 <> " "		&
> 		   and ohip-err-cat-code of f093-dtl-2 = "S" 	&
>      else  3	if     rat-rmb-error-t-cd-3 <> " "		&
> 		   and ohip-err-cat-code of f093-dtl-3 = "S" 	&
>      else  4	if     rat-rmb-error-t-cd-4 <> " "		&
> 		   and ohip-err-cat-code of f093-dtl-4 = "S" 	&
>      else  5 	if     rat-rmb-error-t-cd-5 <> " "		&
> 		   and ohip-err-cat-code of f093-dtl-5 = "S"	&
>      else  0
> 
> ; (find "E"ligibility error in header record)
> def  x-ohip-err-hdr-elig-ss					&
>         =  1	if     rat-rmb-error-h-cd-1 <> " "		&
> 		   and ohip-err-cat-code of f093-hdr-1 = "E" 	&
>      else  2	if     rat-rmb-error-h-cd-2 <> " "		&
> 		   and ohip-err-cat-code of f093-hdr-2 = "E" 	&
>      else  3	if     rat-rmb-error-h-cd-3 <> " "		&
> 		   and ohip-err-cat-code of f093-hdr-3 = "E" 	&
>      else  4	if     rat-rmb-error-h-cd-4 <> " "		&
> 		   and ohip-err-cat-code of f093-hdr-4 = "E" 	&
>      else  5 	if     rat-rmb-error-h-cd-5 <> " "		&
> 		   and ohip-err-cat-code of f093-hdr-5 = "E"	&
>      else  0
> 
> ; (find "E"ligibility error in detail records)
> def  x-ohip-err-dtl-elig-ss					&
>         =  1 	if     rat-rmb-error-t-cd-1 <> " "		&
> 		   and ohip-err-cat-code of f093-dtl-1 = "E" 	&
>      else  2	if     rat-rmb-error-t-cd-2 <> " "		&
> 		   and ohip-err-cat-code of f093-dtl-2 = "E" 	&
>      else  3	if     rat-rmb-error-t-cd-3 <> " "		&
> 		   and ohip-err-cat-code of f093-dtl-3 = "E" 	&
>      else  4	if     rat-rmb-error-t-cd-4 <> " "		&
> 		   and ohip-err-cat-code of f093-dtl-4 = "E" 	&
>      else  5 	if     rat-rmb-error-t-cd-5 <> " "		&
> 		   and ohip-err-cat-code of f093-dtl-5 = "E"	&
>      else  0
> 
> ; 2006/09/07 - MC
> ; (find if claim has referring error from header and/or detail)
> temp x-serv-ref-code-this-rec
> item x-serv-ref-code-this-rec				&
> 	= x-serv-ref-code-this-rec + 1      		&
>      if     x-ohip-err-ref-serv-ss > 0			&
>      reset at rat-rmb-account-nbr
> 
> ; (find if claim has non-referring error from header and/or detail)
> temp x-serv-non-ref-code-this-rec
> item x-serv-non-ref-code-this-rec				&
> 	= x-serv-non-ref-code-this-rec + 1      		&
>      if     x-ohip-err-non-ref-serv-ss > 0			&
>      reset at rat-rmb-account-nbr
> ; 2006/09/07 - end
> 
> 
> ; (find if claim has service error from header and/or detail)
> temp x-serv-err-code-this-rec
> item x-serv-err-code-this-rec				&
> 	= x-serv-err-code-this-rec + 1      		&
>      if     x-ohip-err-hdr-serv-ss > 0			&
>          or x-ohip-err-dtl-serv-ss > 0			&
>      reset at rat-rmb-account-nbr
> 
> ; (find if claim has eligibility error from header and/or detail)
> temp x-elig-err-code-this-rec
> item x-elig-err-code-this-rec				&
> 	= x-elig-err-code-this-rec + 1      		&
>      if     x-ohip-err-hdr-elig-ss > 0			&
>          or x-ohip-err-dtl-elig-ss > 0			&
>      reset at rat-rmb-account-nbr
> 
> ; (determine nbr of detail records per claim)
> temp rec-counter
> item rec-counter = rec-counter + 1	reset at rat-rmb-account-nbr
> 
> ; HEADER update
> output tmp-serv-err-claim       add           	&
>     at rat-rmb-account-nbr	on error report
> 
>   item rat-rmb-account-nbr      final rat-rmb-account-nbr of u021a-edt-1ht-file
>   item trailer-t-count		final rec-counter
>   item clmhdr-elig-error	final 'Y' if x-elig-err-code-this-rec > 0
>   item clmhdr-serv-error 	final 'Y' if x-serv-err-code-this-rec > 0
> ; 2006/09/07 - MC
>   item clmhdr-status-ohip	final 'R ' if x-serv-ref-code-this-rec > 0 	&
> 				         and x-serv-non-ref-code-this-rec = 0   &
> 			        else  'RN' if x-serv-ref-code-this-rec > 0 	&
> 				         and x-serv-non-ref-code-this-rec > 0   &
> 			        else  ' N' if x-serv-ref-code-this-rec = 0 	&
> 				         and x-serv-non-ref-code-this-rec > 0
> ; 2006/09/07 - end
> 
>   item entry-date		final sysdate
>   item entry-time-long       	final systime
>   item entry-user-id		final "system"
> 
> build $pb_obj/u021a
0 ERRORS  0 WARNINGS.
The file /alpha/rmabill/rmabill101/obj/u021a.qtc already exists. Ok to delete?
Tue Jun 18 17:10:36 EDT 2013
