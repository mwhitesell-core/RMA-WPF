/alpha/rmabill/rmabill101/dvlp/moira
Thu Jul 16 11:05:27 EDT 2015
 + + + Sourced in /alpha/rmabill/rmabill101/dvlp/moira + + +
;Compiling program [/alpha/rmabill/rmabill101/dvlp/moira/r005_csv.qzs]
Q U I Z   (7.33.E)
Copyright 1996 COGNOS INCORPORATED
Licensed PH-RUNTIME for customer: 5139390001 C.O.T.A UNIX

> ; DOC: R005_CSV.QZS
> ; DOC: MONTHLY CASH APPLIED RECONCILIATION
> ; DOC: SORT BY CLINIC
> ; DOC: RUN FOR: Ross
> ;
> ;PROGRAM PURPOSE : CASH ANALYSIS BY CLINIC   (DETAIL & SUMMARY REPORTS)
> ;
> ;DATE           WHO       DESCRIPTION
> ;2015/Jun/16	MC	  ORIGINAL
> ;2015/jun/24	be1	  added sort
> ;2015/jun/25	MC1	  added sort in the summary section as well
> ;2015/jul/07	MC2	  added a new pass to generate report with final total for all clinics
> ;
> can clear
> set rep nolimit
> set page length 62 width 132
> set rep device disc name r005dtl_csv
> set nohead
> set noformfeed
> 
> 
> access *r005_dtl
*E* The subfile requested does not exist.
> ;----------------------------------------
> def x-delimiter char*1 = "~"
> 
> def x-period char*1 = "."
> 
> def x-amt-mtd-sign char*1 = "-"                  	if agent-mtd-amt < 0       &
                                                   	   ^^^^^^^^^^^^^
*E* Expected:  NOT  (  RECORD  SETSYSTEMVAL  DELETESYSTEMVAL  VALIDPATTERN
      MATCHPATTERN  MATCHUSER  <number>  <string>  MISSING  NULL  CHARACTERS
      LOGONID  PORTID  SYSDATE  SYSTIME  SYSNAME  SIGNONUSER  UIC  <qualifier>
      <item>
>                 else " "
> def x-amt-mtd-dollars = abs(agent-mtd-amt) / 100 	if agent-mtd-amt <> 0      &
                              ^^^^^^^^^^^^^
*E* Expected:  -  (  ABSOLUTE  CEILING  CHECKSUM  DATE  DATEEXTRACT  DAYS
      ROUND  LINKVALUE  FLOOR  LASTDAY  ADDCENTURY  REMOVECENTURY  NCONVERT
      SIZE  INDEX  MOD  SUM  <number>  MISSING  NULL  SYSDATE  SYSTIME
      <qualifier>  <item>
>                 else  0
> def x-amt-mtd-cents   = mod(abs(agent-mtd-amt),100)     if agent-mtd-amt <> 0      &
                                  ^^^^^^^^^^^^^
*E* Expected:  -  (  ABSOLUTE  CEILING  CHECKSUM  DATE  DATEEXTRACT  DAYS
      ROUND  LINKVALUE  FLOOR  LASTDAY  ADDCENTURY  REMOVECENTURY  NCONVERT
      SIZE  INDEX  MOD  SUM  <number>  MISSING  NULL  SYSDATE  SYSTIME
      <qualifier>  <item>
>                 else  0
> 
> def x-amt-ytd-sign char*1 = "-"                 	if agent-ytd-amt < 0       &
                                                  	   ^^^^^^^^^^^^^
*E* Expected:  NOT  (  RECORD  SETSYSTEMVAL  DELETESYSTEMVAL  VALIDPATTERN
      MATCHPATTERN  MATCHUSER  <number>  <string>  MISSING  NULL  CHARACTERS
      LOGONID  PORTID  SYSDATE  SYSTIME  SYSNAME  SIGNONUSER  UIC  <qualifier>
      <item>
>                 else " "
> def x-amt-ytd-dollars = abs(agent-ytd-amt) / 100 	if agent-ytd-amt <> 0      &
                              ^^^^^^^^^^^^^
*E* Expected:  -  (  ABSOLUTE  CEILING  CHECKSUM  DATE  DATEEXTRACT  DAYS
      ROUND  LINKVALUE  FLOOR  LASTDAY  ADDCENTURY  REMOVECENTURY  NCONVERT
      SIZE  INDEX  MOD  SUM  <number>  MISSING  NULL  SYSDATE  SYSTIME
      <qualifier>  <item>
>                 else  0
> def x-amt-ytd-cents   = mod(abs(agent-ytd-amt),100)     if agent-ytd-amt <> 0      &
                                  ^^^^^^^^^^^^^
*E* Expected:  -  (  ABSOLUTE  CEILING  CHECKSUM  DATE  DATEEXTRACT  DAYS
      ROUND  LINKVALUE  FLOOR  LASTDAY  ADDCENTURY  REMOVECENTURY  NCONVERT
      SIZE  INDEX  MOD  SUM  <number>  MISSING  NULL  SYSDATE  SYSTIME
      <qualifier>  <item>
>                 else  0
> 
> def x-clinic       char*4  = '"' + docash-clinic-1-2  + '"'
                                     ^^^^^^^^^^^^^^^^^
*E* Expected:  (  CENTRE  CENTER  DOWNSHIFT  GETSYSTEMVAL  LINKVALUE  LEFT  LJ
      PACK  SUBSTITUTE  RIGHT  RJ  SPREAD  TRUNCATE  UPSHIFT  ZEROFILL
      DECRYPT  ENCRYPT  SOUNDEX  ASCII  CONTENTS  <string>  MISSING  NULL
      CHARACTERS  LOGONID  PORTID  SYSNAME  SIGNONUSER  UIC  <qualifier>
      <item>
> 
> def x-dept         char*4  = '"' + ascii(docash-dept,2) + '"'
                                           ^^^^^^^^^^^
*E* Expected:  -  (  ABSOLUTE  CEILING  CHECKSUM  DATE  DATEEXTRACT  DAYS
      ROUND  LINKVALUE  FLOOR  LASTDAY  ADDCENTURY  REMOVECENTURY  NCONVERT
      SIZE  INDEX  MOD  SUM  <number>  MISSING  NULL  SYSDATE  SYSTIME
      <qualifier>  <item>
> 
> def x-company	   char*1  = ascii(dept-company)
               	                   ^^^^^^^^^^^^
*E* Expected:  -  (  ABSOLUTE  CEILING  CHECKSUM  DATE  DATEEXTRACT  DAYS
      ROUND  LINKVALUE  FLOOR  LASTDAY  ADDCENTURY  REMOVECENTURY  NCONVERT
      SIZE  INDEX  MOD  SUM  <number>  MISSING  NULL  SYSDATE  SYSTIME
      <qualifier>  <item>
> 
> def x-doc-nbr      char*5  = '"' + docash-doc-nbr     + '"'
                                     ^^^^^^^^^^^^^^
*E* Expected:  (  CENTRE  CENTER  DOWNSHIFT  GETSYSTEMVAL  LINKVALUE  LEFT  LJ
      PACK  SUBSTITUTE  RIGHT  RJ  SPREAD  TRUNCATE  UPSHIFT  ZEROFILL
      DECRYPT  ENCRYPT  SOUNDEX  ASCII  CONTENTS  <string>  MISSING  NULL
      CHARACTERS  LOGONID  PORTID  SYSNAME  SIGNONUSER  UIC  <qualifier>
      <item>
> 
> def x-agent	   char*1  = docash-agency-type
             	             ^^^^^^^^^^^^^^^^^^
*E* Expected:  CASE  PARM  (  CENTRE  CENTER  DOWNSHIFT  GETSYSTEMVAL
      LINKVALUE  LEFT  LJ  PACK  SUBSTITUTE  RIGHT  RJ  SPREAD  TRUNCATE
      UPSHIFT  ZEROFILL  DECRYPT  ENCRYPT  SOUNDEX  ASCII  CONTENTS  <string>
      MISSING  NULL  CHARACTERS  LOGONID  PORTID  SYSNAME  SIGNONUSER  UIC
      <qualifier>  <item>
> 
> def x-amt-mtd-alpha char*10 =  pack(trunc(lj(x-amt-mtd-sign +       		&
                                               ^^^^^^^^^^^^^^
*E* Expected:  (  CENTRE  CENTER  DOWNSHIFT  GETSYSTEMVAL  LINKVALUE  LEFT  LJ
      PACK  SUBSTITUTE  RIGHT  RJ  SPREAD  TRUNCATE  UPSHIFT  ZEROFILL
      DECRYPT  ENCRYPT  SOUNDEX  ASCII  CONTENTS  <string>  MISSING  NULL
      CHARACTERS  LOGONID  PORTID  SYSNAME  SIGNONUSER  UIC  <qualifier>
      <item>
>                                               ascii(x-amt-mtd-dollars) +     	&
>                                               x-period +                        &
>                                               ascii(x-amt-mtd-cents,2))))
> 
> def x-amt-ytd-alpha char*11 =  pack(trunc(lj(x-amt-ytd-sign +       		&
                                               ^^^^^^^^^^^^^^
*E* Expected:  (  CENTRE  CENTER  DOWNSHIFT  GETSYSTEMVAL  LINKVALUE  LEFT  LJ
      PACK  SUBSTITUTE  RIGHT  RJ  SPREAD  TRUNCATE  UPSHIFT  ZEROFILL
      DECRYPT  ENCRYPT  SOUNDEX  ASCII  CONTENTS  <string>  MISSING  NULL
      CHARACTERS  LOGONID  PORTID  SYSNAME  SIGNONUSER  UIC  <qualifier>
      <item>
>                                               ascii(x-amt-ytd-dollars) +        &
>                                               x-period +                        &
>                                               ascii(x-amt-ytd-cents,2))))
> 
> def x-line char*132 =                                   &
>         lj(pack(                                        &
>                 x-clinic        +                       &
                  ^^^^^^^^
*E* Expected:  (  CENTRE  CENTER  DOWNSHIFT  GETSYSTEMVAL  LINKVALUE  LEFT  LJ
      PACK  SUBSTITUTE  RIGHT  RJ  SPREAD  TRUNCATE  UPSHIFT  ZEROFILL
      DECRYPT  ENCRYPT  SOUNDEX  ASCII  CONTENTS  <string>  MISSING  NULL
      CHARACTERS  LOGONID  PORTID  SYSNAME  SIGNONUSER  UIC  <qualifier>
      <item>
>                 x-delimiter  +                                   &
>                 x-dept          +                       &
>                 x-delimiter  +                                   &
>                 x-company       +                       &
>                 x-delimiter  +                                   &
>                 x-doc-nbr       +                       &
>                 x-delimiter  +                                   &
>                 x-agent         +                       &
>                 x-delimiter  +                                   &
>                 x-amt-mtd-alpha    +                         &
>                 x-delimiter  +                                   &
>                 x-amt-ytd-alpha                            &
>                 ) )
> 
> 
> initial heading							&
>         tab  1  'CLINIC'                             		&
> 	tab  7  x-delimiter					&
>         tab  8  'DEPT'                               		&
> 	tab 12  x-delimiter					&
>         tab 13  'COMPANY'                                       &
> 	tab 20  x-delimiter					&
>         tab 21  'DOC#'                               		&
> 	tab 25  x-delimiter					&
>         tab 26  'AGENT'                              		&
> 	tab 31  x-delimiter					&
>         tab 32  'MTD AMT'                                       &
> 	tab 39  x-delimiter					&
>         tab 40  'YTD AMT'
> 
> ;be1 added sort
> sort on  docash-clinic-1-2  	&
>      on  docash-dept        	&
*E* Can't find the item DOCASH-CLINIC-1-2.
>      on	 dept-company		&
>      on  docash-doc-nbr
> 
> report tab 01 x-line
                ^^^^^^
*E* Expected:  <string>  LOGONID  PORTID  SYSDATE  SYSTIME  SYSNAME  SYSPAGE
      SIGNONUSER  UIC  COUNT  <qualifier>  <item>  RESERVE  <eol>
> 
> build $pb_obj/r005a_csv
The file /alpha/rmabill/rmabill101/obj/r005a_csv.qzc already exists. Ok to 
delete?
> 
> ;------------------------------
> 
> set rep device disc name r005sum_csv
> set nohead
> set noformfeed
> 
> 
> access *r005_summ
*E* The subfile requested does not exist.
> 
> ;MC1 added sort
> sort on  docash-clinic-1-2
*E* Can't find the item DOCASH-CLINIC-1-2.
> 
> ;----------------------------------------
> def x-delimiter char*1 = "~"
> 
> def x-period char*1 = "."
> 
> def x-amt-mtd-sign char*1 = "-"                  	if dept-mtd-amt < 0       &
                                                   	   ^^^^^^^^^^^^
*E* Expected:  NOT  (  RECORD  SETSYSTEMVAL  DELETESYSTEMVAL  VALIDPATTERN
      MATCHPATTERN  MATCHUSER  <number>  <string>  MISSING  NULL  CHARACTERS
      LOGONID  PORTID  SYSDATE  SYSTIME  SYSNAME  SIGNONUSER  UIC  <qualifier>
      <item>
>                 else " "
> def x-amt-mtd-dollars = abs(dept-mtd-amt) / 100 	if dept-mtd-amt <> 0      &
                              ^^^^^^^^^^^^
*E* Expected:  -  (  ABSOLUTE  CEILING  CHECKSUM  DATE  DATEEXTRACT  DAYS
      ROUND  LINKVALUE  FLOOR  LASTDAY  ADDCENTURY  REMOVECENTURY  NCONVERT
      SIZE  INDEX  MOD  SUM  <number>  MISSING  NULL  SYSDATE  SYSTIME
      <qualifier>  <item>
>                 else  0
> def x-amt-mtd-cents   = mod(abs(dept-mtd-amt),100)      if dept-mtd-amt <> 0      &
                                  ^^^^^^^^^^^^
*E* Expected:  -  (  ABSOLUTE  CEILING  CHECKSUM  DATE  DATEEXTRACT  DAYS
      ROUND  LINKVALUE  FLOOR  LASTDAY  ADDCENTURY  REMOVECENTURY  NCONVERT
      SIZE  INDEX  MOD  SUM  <number>  MISSING  NULL  SYSDATE  SYSTIME
      <qualifier>  <item>
>                 else  0
> 
> def x-amt-ytd-sign char*1 = "-"                 	if dept-ytd-amt < 0       &
                                                  	   ^^^^^^^^^^^^
*E* Expected:  NOT  (  RECORD  SETSYSTEMVAL  DELETESYSTEMVAL  VALIDPATTERN
      MATCHPATTERN  MATCHUSER  <number>  <string>  MISSING  NULL  CHARACTERS
      LOGONID  PORTID  SYSDATE  SYSTIME  SYSNAME  SIGNONUSER  UIC  <qualifier>
      <item>
>                 else " "
> def x-amt-ytd-dollars = abs(dept-ytd-amt) / 100 	if dept-ytd-amt <> 0      &
                              ^^^^^^^^^^^^
*E* Expected:  -  (  ABSOLUTE  CEILING  CHECKSUM  DATE  DATEEXTRACT  DAYS
      ROUND  LINKVALUE  FLOOR  LASTDAY  ADDCENTURY  REMOVECENTURY  NCONVERT
      SIZE  INDEX  MOD  SUM  <number>  MISSING  NULL  SYSDATE  SYSTIME
      <qualifier>  <item>
>                 else  0
> def x-amt-ytd-cents   = mod(abs(dept-ytd-amt),100)      if dept-ytd-amt <> 0      &
                                  ^^^^^^^^^^^^
*E* Expected:  -  (  ABSOLUTE  CEILING  CHECKSUM  DATE  DATEEXTRACT  DAYS
      ROUND  LINKVALUE  FLOOR  LASTDAY  ADDCENTURY  REMOVECENTURY  NCONVERT
      SIZE  INDEX  MOD  SUM  <number>  MISSING  NULL  SYSDATE  SYSTIME
      <qualifier>  <item>
>                 else  0
> 
> def x-clinic       char*4  = '"' + docash-clinic-1-2 + '"'
                                     ^^^^^^^^^^^^^^^^^
*E* Expected:  (  CENTRE  CENTER  DOWNSHIFT  GETSYSTEMVAL  LINKVALUE  LEFT  LJ
      PACK  SUBSTITUTE  RIGHT  RJ  SPREAD  TRUNCATE  UPSHIFT  ZEROFILL
      DECRYPT  ENCRYPT  SOUNDEX  ASCII  CONTENTS  <string>  MISSING  NULL
      CHARACTERS  LOGONID  PORTID  SYSNAME  SIGNONUSER  UIC  <qualifier>
      <item>
> 
> def x-dept         char*4  = '"' + ascii(docash-dept,2) + '"'
                                           ^^^^^^^^^^^
*E* Expected:  -  (  ABSOLUTE  CEILING  CHECKSUM  DATE  DATEEXTRACT  DAYS
      ROUND  LINKVALUE  FLOOR  LASTDAY  ADDCENTURY  REMOVECENTURY  NCONVERT
      SIZE  INDEX  MOD  SUM  <number>  MISSING  NULL  SYSDATE  SYSTIME
      <qualifier>  <item>
> 
> def x-company	   char*1  = ascii(dept-company)
               	                   ^^^^^^^^^^^^
*E* Expected:  -  (  ABSOLUTE  CEILING  CHECKSUM  DATE  DATEEXTRACT  DAYS
      ROUND  LINKVALUE  FLOOR  LASTDAY  ADDCENTURY  REMOVECENTURY  NCONVERT
      SIZE  INDEX  MOD  SUM  <number>  MISSING  NULL  SYSDATE  SYSTIME
      <qualifier>  <item>
> 
> def x-amt-mtd-alpha char*10 =  pack(trunc(lj(x-amt-mtd-sign +       		&
                                               ^^^^^^^^^^^^^^
*E* Expected:  (  CENTRE  CENTER  DOWNSHIFT  GETSYSTEMVAL  LINKVALUE  LEFT  LJ
      PACK  SUBSTITUTE  RIGHT  RJ  SPREAD  TRUNCATE  UPSHIFT  ZEROFILL
      DECRYPT  ENCRYPT  SOUNDEX  ASCII  CONTENTS  <string>  MISSING  NULL
      CHARACTERS  LOGONID  PORTID  SYSNAME  SIGNONUSER  UIC  <qualifier>
      <item>
>                                               ascii(x-amt-mtd-dollars) +     	&
>                                               x-period +                        &
>                                               ascii(x-amt-mtd-cents,2))))
> 
> def x-amt-ytd-alpha char*11 =  pack(trunc(lj(x-amt-ytd-sign +       		&
                                               ^^^^^^^^^^^^^^
*E* Expected:  (  CENTRE  CENTER  DOWNSHIFT  GETSYSTEMVAL  LINKVALUE  LEFT  LJ
      PACK  SUBSTITUTE  RIGHT  RJ  SPREAD  TRUNCATE  UPSHIFT  ZEROFILL
      DECRYPT  ENCRYPT  SOUNDEX  ASCII  CONTENTS  <string>  MISSING  NULL
      CHARACTERS  LOGONID  PORTID  SYSNAME  SIGNONUSER  UIC  <qualifier>
      <item>
>                                               ascii(x-amt-ytd-dollars) +        &
>                                               x-period +                        &
>                                               ascii(x-amt-ytd-cents,2))))
> 
> def x-line char*132 =                                   &
>         lj(pack(                                        &
>                 x-clinic        +                       &
                  ^^^^^^^^
*E* Expected:  (  CENTRE  CENTER  DOWNSHIFT  GETSYSTEMVAL  LINKVALUE  LEFT  LJ
      PACK  SUBSTITUTE  RIGHT  RJ  SPREAD  TRUNCATE  UPSHIFT  ZEROFILL
      DECRYPT  ENCRYPT  SOUNDEX  ASCII  CONTENTS  <string>  MISSING  NULL
      CHARACTERS  LOGONID  PORTID  SYSNAME  SIGNONUSER  UIC  <qualifier>
      <item>
>                 x-delimiter  +                                   &
>                 x-dept          +                       &
>                 x-delimiter  +                                   &
>                 x-company       +                       &
>                 x-delimiter  +                                   &
>                 x-amt-mtd-alpha    +                         &
>                 x-delimiter  +                                   &
>                 x-amt-ytd-alpha                                &
>                 ) )
> 
> 
> initial heading							&
>         tab  1  'CLINIC'                             		&
> 	tab  7  x-delimiter					&
>         tab  8  'DEPT'                               		&
> 	tab 12  x-delimiter					&
>         tab 13  'COMPANY'                                       &
> 	tab 20  x-delimiter					&
>         tab 21  'MTD AMT'                                       &
> 	tab 28  x-delimiter					&
>         tab 29  'YTD AMT'
> 
> report tab 01 x-line
                ^^^^^^
*E* Expected:  <string>  LOGONID  PORTID  SYSDATE  SYSTIME  SYSNAME  SYSPAGE
      SIGNONUSER  UIC  COUNT  <qualifier>  <item>  RESERVE  <eol>
> 
> build $obj/r005b_csv
The file /alpha/rmabill/rmabill101/obj/r005b_csv.qzc already exists. Ok to 
delete?
> 
> ;------------------------------
> ; MC2
> set rep device disc name r005_all
> 
> access *r005_summ
*E* The subfile requested does not exist.
> 
> page heading  						&
> 	tab  1	'R005_all'				&
> 	tab  25 'Doctor Cash for all clinics'		&
> 	tab  60 'Run Date:'				&
> 	tab  70 sysdate					&
> 	skip 2
> 
> final footing  						&
> 	tab  1  'MTD Amt: '				&
> 	tab  10 dept-mtd-amt subt pic '^^^,^^^,^^^.^^ ' trail '-'	&
  	        ^^^^^^^^^^^^
*E* Expected:  <string>  LOGONID  PORTID  SYSDATE  SYSTIME  SYSNAME  SYSPAGE
      SIGNONUSER  UIC  COUNT  <qualifier>  <item>  RESERVE  <eol>
> skip 2  tab  1  'YTD Amt: '				&
>         tab  10 dept-ytd-amt subt pic '^^^,^^^,^^^.^^ ' trail '-'
> 
> build $obj/r005c_csv
> 
> ; MC2 - end
Thu Jul 16 11:05:28 EDT 2015
