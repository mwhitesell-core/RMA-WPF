# 2008/10/07  		yas - added solo data to be ba
# 2009/01/28  		MC  - backup to cpio with compress

echo  "backupdata"
echo  
echo 
echo  BACKUP NOW COMMENCING ...

date 
echo  
echo "Finding directories with sub directories and files..."

cd /
pwd

echo "Finding files in '101c' data without sub-directories and f002 and f010 ..."
find /alpha/rmabill/rmabill101c/data/*                          \
           \(   ! -name 'f010_pat_mstr'     	\
                ! -name 'f010_pat_mstr.dat' 	\
                ! -name 'f010_pat_mstr.idx' 	\
                ! -name 'f002_claims_mstr'  	\
                ! -name 'f002_claims_mstr.dat'  \
                ! -name 'f002_claims_mstr.idx'  \
                -prune ! -type d         	\
            \)                         -print  > $pb_data/backup_101c_mp_data.ls


echo "Finding files in 'mp' data without sub-directories ..."
find /alpha/rmabill/rmabillmp/data/*            \
		-prune !  -type d      -print >> $pb_data/backup_101c_mp_data.ls

echo
date

echo "Finding files in 'solo' data without sub-directories ..."
find /alpha/rmabill/rmabillsolo/data/*            \
                -prune !  -type d      -print >> $pb_data/backup_101c_mp_data.ls

echo
date

echo "backup to tape commencing ..."

cat $pb_data/backup_101c_mp_data.ls |cpio -ocuvB | compress -c  > /charly/backup_transfer_area/backup_101c_mp_data.cpio
echo
date

date
echo
echo VERIFICATION NOW COMMENCING ... Be patient - this may take some time!
echo
echo Output is being sent to a file that will be paged out at end of verify ...
echo
echo
date
echo
cpio -itcvB | uncompress -c  < /charly/backup_transfer_area/backup_101c_mp_data.cpio > $pb_data/backup_101c_mp_data.log

echo
ls -l $pb_data/backup_101c_mp_data.ls $pb_data/backup_101c_mp_data.log
cat $pb_data/backup_101c_mp_data.ls  | wc
cat $pb_data/backup_101c_mp_data.log | wc
echo
date
echo
#echo Press Enter to page out verification log
#read garbage
#pg backup_101c_mp_data.log

echo
date
echo "DONE!"

